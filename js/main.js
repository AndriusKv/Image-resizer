!function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e){j&&clearTimeout(j),j=setTimeout(function(){o()},e)}function o(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&r(2e3)}function s(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function a(e){m.value+=e}function i(){m.value=0}function c(){return 100===Math.round(m.value)}function u(){s(""),(0,g.toggleMasks)("remove")}function l(){(0,g.toggleMasks)("add"),n.isWorking=y=!0,(0,g.toggleElement)("add",m),(0,g.toggleElement)("remove",f),(0,g.toggleElement)("add",v)}function d(){n.isWorking=y=!1,(0,g.toggleElement)("remove",m),(0,g.toggleElement)("remove",v),i(),u()}Object.defineProperty(n,"__esModule",{value:!0}),n.removeMasksAndLabel=n.setProgressLabel=n.updateProgress=n.resetProgress=n.resetDropbox=n.showMessage=n.downloadBtn=n.progressBar=n.processBtn=n.isCanceled=n.beforeWork=n.isWorking=n.cancelBtn=n.isDone=void 0;var g=e("./main.js"),m=document.getElementById("js-progress"),f=document.getElementById("js-process"),p=document.getElementById("js-download"),v=document.getElementById("js-cancel"),h=!1,y=!1,j=void 0;n.isDone=c,n.cancelBtn=v,n.isWorking=y,n.beforeWork=l,n.isCanceled=h,n.processBtn=f,n.progressBar=m,n.downloadBtn=p,n.showMessage=o,n.resetDropbox=d,n.resetProgress=i,n.updateProgress=a,n.setProgressLabel=s,n.removeMasksAndLabel=u},{"./main.js":2}],2:[function(e,t,n){"use strict";function r(e,t,n){t.classList[e](n)}function o(e,t){r(e,t,"show")}function s(e){r(e,document.getElementById("js-dropbox-label"),"mask"),r(e,document.getElementById("js-selections-mask"),"mask")}Object.defineProperty(n,"__esModule",{value:!0}),n.toggleElement=n.changeClass=n.toggleMasks=void 0,e("./dropbox.js"),e("./selections.js"),e("./read.js"),e("./process.js"),n.toggleMasks=s,n.changeClass=r,n.toggleElement=o},{"./dropbox.js":1,"./process.js":3,"./read.js":4,"./selections.js":5}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){k.showMessage(e),(0,B.toggleElement)("add",t)}function s(){L||(n.worker=L=new Worker("js/workers/worker1.js"),L.onmessage=function(e){n.zip=x=e.data,k.isWorking=!1,k.removeMasksAndLabel(),o("Images are ready for downloading.",k.downloadBtn),L.postMessage({action:"remove"})},L.onerror=function(e){console.log(e)})}function a(e){try{saveAs(e,"images.zip")}catch(t){var n=document.createElement("script");n.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(e,"images.zip")}}}function i(e,t){return e*(Number.parseInt(t,10)/100)}function c(e,t){return e?e.includes("%")?i(t,e):Number.parseInt(e,10):void 0}function u(e){var t=e.width,n=e.height;return t&&!n?n=t:!t&&n&&(t=n),{width:t,height:n}}function l(e,t){var n=e.width,r=e.height;return n?r=n/t:r&&(n=r*t),{width:n,height:r}}function d(e,t,n){var r=n.width,o=n.height,s=document.createElement("canvas");return s.width=r,s.height=o,s.getContext("2d").drawImage(e,0,0,r,o),s.toDataURL(t)}function g(){k.setProgressLabel("Generating Archive"),L.postMessage({action:"generate"})}function m(){setTimeout(function(){k.isCanceled||((0,B.toggleElement)("remove",k.progressBar),(0,B.toggleElement)("remove",k.cancelBtn),k.resetProgress(),g())},1e3)}function f(e,t,n){return function r(o){var s=o.splice(0,1)[0];if(k.updateProgress(n),L.postMessage({action:"add",image:{name:t.name.setByUser,uri:d(e,t.type,s),type:t.type.slice(6)}}),k.isDone()&&m(),o.length){var a=t.size*s.width*s.height/2e3+100;setTimeout(function(){k.isCanceled||r(o)},a)}}}function p(e,t){var n=100/(e.length*t.length);return function r(o){var s=new Image,a=e.splice(0,1)[0];if(s.onload=function(){if(!k.isCanceled){var e=f(s,a,n),r=s.width/s.height,i=[];i=t.map(function(e){return{width:c(e.width,s.width),height:c(e.height,s.height)}}).map(function(e){return o(e,r)}),k.setProgressLabel("Processing: "+a.name.original),e(i)}},s.src=a.uri,e.length){var i=400*a.size+100;setTimeout(function(){k.isCanceled||r(o)},i)}}}function v(){var e=w.widthInputCointaner.children,t=w.heightInputContainer.children;if(!w.hasValue(e)&&!w.hasValue(t))return o("No dimensions specified.",k.processBtn),!1;var n=w.isValid(e),r=w.isValid(t);return n&&r?!0:(o("Only values in pixels or percents are allowed.",k.processBtn),!1)}function h(){for(var e=w.widthInputCointaner.children,t=w.heightInputContainer.children,n=[],r=0,o=e.length;o>r;r++){var s=e[r].value,a=t[r].value;(s||a)&&n.push({width:s,height:a})}return n}function y(){if(!v())return void k.resetDropbox();s(),k.beforeWork();var e=h(),t=p(C,e);t(w.checkbox.checked?l:u),w.saveToLocalStorage()}function j(){a(x)}function E(){k.isCanceled=!0,n.zip=x=null,C.length=0,k.resetDropbox(),k.showMessage("Work canceled.")}Object.defineProperty(n,"__esModule",{value:!0}),n.processImages=n.worker=n.images=n.zip=void 0;var I=e("./selections.js"),w=r(I),b=e("./dropbox.js"),k=r(b),B=e("./main.js"),C=[],L=void 0,x=void 0;k.processBtn.addEventListener("click",y,!1),k.downloadBtn.addEventListener("click",j,!1),k.cancelBtn.addEventListener("click",E,!1),n.zip=x,n.images=C,n.worker=L,n.processImages=y},{"./dropbox.js":1,"./main.js":2,"./selections.js":5}],4:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(){setTimeout(function(){y.isCanceled||(E.images.length?(y.resetProgress(),E.processImages()):(y.resetDropbox(),y.showMessage("No images to process.")))},1200)}function s(e){return e.includes("image")}function a(e){return e.slice(0,e.lastIndexOf("."))}function i(e){var t=document.getElementById("js-image-name").value||a(e),n=document.getElementById("js-image-name-seperator").value||"-";return t+n}function c(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(t){E.images.push({name:{original:e.name,setByUser:i(e.name)},type:e.type,size:e.size/1e6,uri:t.target.result})}}function u(e,t){var n=e[0];if(y.setProgressLabel("Reading: "+n.name),e=Array.prototype.slice.call(e,1),s(n.type)&&c(n),y.updateProgress(t),e.length||o(),e.length){var r=n.size/1e6*100+100;setTimeout(function(){y.isCanceled||u(e,t)},r)}}function l(e){var t=100/e.length;E.worker&&E.worker.postMessage({action:"remove"}),E.zip=null,y.isCanceled=!1,(0,v.toggleElement)("remove",y.downloadBtn),y.beforeWork(),u(e,t)}function d(e){var t=e.target.files;e.preventDefault(),t.length&&l(t)}function g(e){return w=0,(0,v.changeClass)("add",e.target,"over"),e.stopPropagation(),e.preventDefault(),y.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void l(e.dataTransfer.files))}function m(e){e.stopPropagation(),e.preventDefault()}function f(e){e.preventDefault(),y.isWorking||(w+=1,(0,v.changeClass)("add",e.target,"over"))}function p(e){y.isWorking||(w-=1,w||(0,v.changeClass)("remove",e.target,"over"))}var v=e("./main.js"),h=e("./dropbox.js"),y=r(h),j=e("./process.js"),E=r(j),I=document.getElementById("js-dropbox"),w=0;document.getElementById("js-image-select").addEventListener("change",d,!1),I.addEventListener("dragover",m,!1),I.addEventListener("dragenter",f,!1),I.addEventListener("dragleave",p,!1),I.addEventListener("drop",g,!1),I.addEventListener("click",function(e){y.isWorking&&e.preventDefault()})},{"./dropbox.js":1,"./main.js":2,"./process.js":3}],5:[function(e,t,n){"use strict";function r(){var e={numberOfInputs:j.value,checked:y.checked,widthInputValues:c(v.children),heightInputValues:c(h.children),imageName:document.getElementById("js-image-name").value||"",imageNameSeperator:document.getElementById("js-image-name-seperator").value||""};localStorage.setItem("Selections",JSON.stringify(e))}function o(e){(0,p.changeClass)("add",e,"invalid"),setTimeout(function(){(0,p.changeClass)("remove",e,"invalid")},400)}function s(e){var t=/^\d+(px|%)?$/,n=!0;return Array.prototype.forEach.call(e,function(e){e.value&&!t.test(e.value)&&(o(e),n=!1)}),n}function a(e){return Array.prototype.some.call(e,function(e){return e.value})}function i(e,t){Array.prototype.forEach.call(e,function(e,n){e.value=t[n]})}function c(e){return Array.prototype.map.call(e,function(e){return e.value})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function l(e){for(var t=document.createDocumentFragment(),n=0;e>n;n++)t.appendChild(u());return t}function d(e,t){var n=e.children.length;if(t>n){var r=t-n;e.appendChild(l(r))}else for(var o=n-t;o--;)n=e.children.length,e.removeChild(e.children[n-1])}function g(e){var t=Number.parseInt(e.target.value,10);d(v,t),d(h,t)}function m(e){document.getElementById(e).classList.toggle("show")}function f(e){var t=e.target;t.innerHTML="Settings"===t.innerHTML?"Selections":"Settings",m("js-selections"),m("js-settings")}Object.defineProperty(n,"__esModule",{value:!0}),n.checkbox=n.isValid=n.hasValue=n.saveToLocalStorage=n.heightInputContainer=n.widthInputCointaner=void 0;var p=e("./main.js"),v=document.getElementById("js-width-input-container"),h=document.getElementById("js-height-input-container"),y=document.getElementById("js-checkbox"),j=document.getElementById("js-select");!function(){var e=localStorage.getItem("Selections");e&&(e=JSON.parse(e),y.checked=e.checked,j.value=e.numberOfInputs,d(v,e.numberOfInputs),d(h,e.numberOfInputs),i(v.children,e.widthInputValues),i(h.children,e.heightInputValues),document.getElementById("js-image-name").value=e.imageName,document.getElementById("js-image-name-seperator").value=e.imageNameSeperator)}(),j.addEventListener("input",g,!1),document.getElementById("js-settings-toggle").addEventListener("click",f,!1),n.widthInputCointaner=v,n.heightInputContainer=h,n.saveToLocalStorage=r,n.hasValue=a,n.isValid=s,n.checkbox=y},{"./main.js":2}]},{},[2]);