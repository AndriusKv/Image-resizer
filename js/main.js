!function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){document.getElementById("js-quality-value").textContent=e}function i(e){h=e!==l,g=e,r(e)}function a(){h=!1,c.value=.92,r(l)}function o(){return h?g:l}function s(){return h}function u(e){var t=Number.parseFloat(e.target.value);i(t),(0,d.changeCanvasQuality)(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.get=n.reset=n.useImageWithQuality=void 0;var d=e("./cropper.js"),c=document.getElementById("js-crop-quality"),l=.92,h=!1,g=l;c.addEventListener("input",u,!1),n.useImageWithQuality=s,n.reset=a,n.get=o},{"./cropper.js":2}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){e.disabled=t}function a(e){var t=document.getElementById("js-crop-ok"),n=document.getElementById("js-crop-preview-btn");i(t,e),i(n,e)}function o(e){var t=document.getElementById("js-crop-skip"),n=e>1;i(t,!n)}function s(e){var t=document.getElementById("js-crop-remaining"),n=pe.images.length-1;return"remove"===e?void(t.textContent=""):1===n?void(t.textContent=n+" image remaining"):void(t.textContent=n+" images remaining")}function u(e){document.getElementById("js-crop-image-name").textContent=e}function d(e,t,n){var r=Oe,i=r[n];return e&&i?i>0?e:i+e:0}function c(e){var t=Re.getTransformedPoint(e.x,e.y),n=Re.getTransformedPoint(e.x+e.width,e.y+e.height),r=n.x-t.x,i=n.y-t.y;Oe.width=r,Oe.height=i,l(t.x,t.y),h(r,i)}function l(e,t){Oe.x=e,Oe.y=t,e=d(e,"x","width"),t=d(t,"y","height"),ke.value=Math.round(e*Ve.get("width")),Be.value=Math.round(t*Ve.get("height"))}function h(e,t){e=Math.round(e*Ve.get("width")),t=Math.round(t*Ve.get("height")),Ae.value=0>e?-e:e,Me.value=0>t?-t:t}function g(e){var t=qe.width,n=qe.height;return e?void Le.drawImage(e,0,0,t,n):ye.useImageWithQuality()?void Le.drawImage(qe.withQuality,0,0,t,n):void Le.drawImage(qe.original,0,0,t,n)}function m(){var e=new Image,t=void 0;return e.addEventListener("load",function(){t=Le.createPattern(e,"repeat")}),e.src="images/pattern.png",function(){Le.fillStyle=t,Le.save(),Le.setTransform(1,0,0,1,0,0),Le.fillRect(0,0,xe.width,xe.height),f(),Le.restore()}}function f(){Le.fillStyle="rgba(0, 0, 0, .4)",Le.fillRect(0,0,xe.width,xe.height)}function v(e){Le.strokeRect(e.x+.5,e.y+.5,e.width,e.height)}function p(e){var t=e.width&&e.height;if(t){var n=e.x,r=e.y,i=Le.getImageData(n,r,e.width,e.height);e.width<0&&(n+=e.width),e.height<0&&(r+=e.height),f(),Le.putImageData(i,n,r),v(e)}}function w(e,t){var n=e.width>0?e.width:-e.width,r=e.height>0?e.height:-e.height;Le.save(),Le.translate(e.x+.5+e.width/2,e.y+.5+e.height/2),Le.rotate(t),Le.strokeRect(-e.width/2,-e.height/2,e.width,e.height),Le.beginPath(),Le.rect(-n/2,-r/2,n,r),Le.restore(),Le.rect(xe.width,0,-xe.width,xe.height),Le.fillStyle="rgba(0, 0, 0, .4)",Le.fill()}function y(){var e=ye.useImageWithQuality()?qe.withQuality:qe.original;Ue(),g(e),Le.save(),Le.lineWidth=1,Le.strokeStyle="#006494",Le.setTransform(1,0,0,1,0,0),Ne?w(We,Ne):p(We),Le.restore(),He.draw(e)}function E(e,t,n,r){var i=e.width,a=e.height;return i>t&&(i=t,a=i/r),a>n&&(a=n,i=a*r),{width:i,height:a}}function x(e){qe.original.addEventListener("load",function(){var e=qe.original,t=e.width,r=e.height,i=t/r,a=window.innerWidth-212,o=window.innerHeight-40,s=E(qe.original,a,o,i),u=s.width,d=s.height;xe.width=a,xe.height=o,qe.width=u,qe.height=d,Re.translatedWidth=(a-u)/2,Re.translatedHeight=(o-d)/2,Ue(),Re.resetTransform(),Re.translate(Re.translatedWidth,Re.translatedHeight),Le.drawImage(qe.original,0,0,u,d),n.changeCanvasQuality=Se=ie(),Ve.set("width",t/u),Ve.set("height",r/d),xe.classList.add("show")}),qe.original.src=e}function L(){var e=Ve.get("width"),t=Ve.get("height"),n=We;return{x:n.x*e,y:n.y*t,width:n.width*e,height:n.height*t}}function j(e,t,n,r){var i=Re.getTransform(),a=i.e*Ve.get("width"),o=i.f*Ve.get("height"),s=i.a;if(n.save(),r){var u=t.x+t.width/2,d=t.y+t.height/2;n.translate(u,d),n.rotate(-r),n.translate(-u,-d)}return n.translate(a,o),n.scale(s,s),n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x,t.y,t.width,t.height)}function I(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=Re.translatedWidth*Ve.get("width"),a=Re.translatedHeight*Ve.get("height");n.width=e.width+2*i,n.height=e.height+2*a;var o=j(e,t,r,Ne);return n.width=o.width,n.height=o.height,r.putImageData(o,0,0),n}function b(e){var t=new Image;t.addEventListener("load",function(){var n=L(),r=I(t,n);pe.worker.postMessage({action:"add",image:{name:e.name.setByUser,type:e.type.slice(6),uri:r.toDataURL(e.type,ye.get())}}),pe.images.length?(ye.reset(),J()):(X(),pe.generateZip(),xe.removeEventListener("mousedown",C,!1))}),t.src=e.uri}function k(e){var t=xe.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function B(e,t){var n=4,r=We.x,i=We.y,a=r+We.width,o=i+We.height,s=e>=r-n&&a+n>=e||r+n>=e&&e>=a-n,u=t>=i-n&&o+n>=t||i+n>=t&&t>=o-n,d=t>=i-n&&i+n>=t,c=e>=a-n&&a+n>=e,l=t>=o-n&&o+n>=t,h=e>=r-n&&r+n>=e;if(d){if(h)return"nw";if(c)return"ne";if(s)return"n"}if(l){if(c)return"se";if(h)return"sw";if(s)return"s"}if(u){if(c)return"e";if(h)return"w"}return""}function A(e,t,n){var r=e.x,i=e.y,a=r+e.width,o=i+e.height,s=t>=r&&a>=t||r>=t&&t>=a,u=n>=i&&o>=n||i>=n&&n>=o;return s&&u}function M(e){var t=k(e),n=t.x,r=t.y,i=We,a={},o="";switch(_e){case"nw":a.x=n,a.y=r,a.width=i.x-n+i.width,a.height=i.y-r+i.height,o=O("nw","ne");break;case"ne":a.y=r,a.height=i.y-r+i.height,a.width=n-i.x,o=O("ne","nw");break;case"se":a.width=n-i.x,a.height=r-i.y,o=O("se","sw");break;case"sw":a.x=n,a.width=i.x-n+i.width,a.height=r-i.y,o=O("sw","se");break;case"n":a.y=r,a.height=i.y-r+i.height;break;case"e":a.width=n-i.x;break;case"s":a.height=r-i.y;break;case"w":a.x=n,a.width=i.x-n+i.width}o&&(xe.style.cursor=o+"-resize"),Object.assign(We,a),requestAnimationFrame(y),c(We)}function T(e,t){var n=e-We.x,r=t-We.y;return function(e){if(e.ctrlKey){var t=k(e),i=t.x,a=t.y;We.x=i-n,We.y=a-r,requestAnimationFrame(y);var o=Re.getTransformedPoint(We.x,We.y);l(o.x,o.y)}}}function C(e){if(1===e.which){var t=k(e),n=t.x,r=t.y,i=We,a=i.width&&i.height;if(_e=B(n,r),requestAnimationFrame(y),xe.removeEventListener("mousemove",z,!1),document.removeEventListener("keydown",q,!1),e.shiftKey)Fe=Re.getTransformedPoint(n,r),Ee.addEventListener("mousemove",R,!1),Ee.addEventListener("mouseup",$,!1);else if(e.ctrlKey&&a){var o=Ne?_:A;if(o(i,n,r))return Qe=T(n,r),Ee.addEventListener("mousemove",Qe,!1),void Ee.addEventListener("mouseup",V,!1);Ee.addEventListener("mousemove",Q,!1),Ee.addEventListener("mouseup",K,!1)}else _e&&a&&!Ne?(Ee.addEventListener("mousemove",M,!1),Ee.addEventListener("mouseup",U,!1)):(J(),Ne=0,We.x=n,We.y=r,Ee.addEventListener("mousemove",P,!1),Ee.addEventListener("mouseup",H,!1))}}function P(e){var t=k(e),n=t.x,r=t.y;We.width=n-We.x,We.height=r-We.y,requestAnimationFrame(y),c(We)}function D(){xe.style.cursor="default",document.removeEventListener("keyup",D,!1)}function q(e){var t=Ne?_:A,n=We,r=De.x,i=De.y;e.ctrlKey&&t(n,r,i)&&(xe.style.cursor="move"),document.addEventListener("keyup",D,!1)}function W(e,t){var n=We.width&&We.height;if(Ee.removeEventListener("mousemove",e,!1),Ee.removeEventListener("mouseup",t,!1),n)xe.addEventListener("mousemove",z,!1),document.addEventListener("keydown",q,!1);else{var r=Re.getTransform();We.x=r.e,We.y=r.f,Ue(),g(),xe.style.cursor="default"}a(!n)}function O(e,t){var n=We.x,r=We.y,i=n+We.width,a=r+We.height;if(i>n){if(r>a)return t}else if(a>r)return t;return e}function S(e,t){var n=B(e,t);switch(n){case"nw":n=O("nw","ne");break;case"ne":n=O("ne","nw");break;case"sw":n=O("sw","se");break;case"se":n=O("se","sw")}xe.style.cursor=n?n+"-resize":"default"}function _(e,t,n){var r=t-(e.x+e.width/2),i=n-(e.y+e.height/2),a=r*Math.cos(-Ne)-i*Math.sin(-Ne),o=r*Math.sin(-Ne)+i*Math.cos(-Ne),s={x:-e.width/2,y:-e.height/2,width:e.width,height:e.height};return A(s,a,o)}function z(e){var t=k(e),n=t.x,r=t.y,i=We;if(De.x=n,De.y=r,e.ctrlKey){var a=Ne?_:A;return a(i,n,r)?void(xe.style.cursor="move"):void(xe.style.cursor="default")}Ne||S(n,r)}function N(e){var t=k(e),n=t.x,r=t.y,i=We,a=i.x+i.width/2,o=i.y+i.height/2;return Math.atan2(o-r,a-n)}function F(e){var t=Math.round(180*e/Math.PI);return 0>t&&(t+=360),t}function Q(e){var t=0;Ne=N(e),t=F(Ne),Te.value=t,(0===t||360===t)&&(Ne=0),requestAnimationFrame(y)}function R(e){if(Fe){var t=k(e),n=t.x,r=t.y,i=Re.getTransformedPoint(n,r);if(Re.translate(i.x-Fe.x,i.y-Fe.y),requestAnimationFrame(y),We.width&&We.height){var a=Re.getTransformedPoint(We.x,We.y);l(a.x,a.y)}}}function U(){W(M,U)}function V(){W(Qe,V)}function H(){W(P,H)}function K(){W(Q,K)}function $(){Fe=null,W(R,$)}function G(){var e=pe.images[0];pe.initWorker(),Re=ge(Le),u(e.name.original),x(e.uri),a(!0),o(pe.images.length),xe.addEventListener("mousedown",C,!1),Ee.classList.add("show"),pe.images.length>1&&s()}function Z(e){xe.classList.remove("show"),o(pe.images.length),a(!0),pe.images.length&&(s(),u(e.name.original),setTimeout(function(){x(e.uri)},200))}function J(){We.x=0,We.y=0,We.width=0,We.height=0,Oe=Object.assign({},We),Te.value=0,He.clean(),c(We)}function Y(){Ne=0,Ce.value=100,Re.resetTransform(),Re.translate(Re.translatedWidth,Re.translatedHeight),ye.reset(),J(),Ue(),g()}function X(){Ce.value=100,ye.reset(),J(),s("remove"),Ee.classList.remove("show")}function ee(){var e=pe.images.splice(0,1)[0];b(e),Z(pe.images[0])}function te(){pe.images.splice(0,1),ye.reset(),J(),Z(pe.images[0])}function ne(){return ze?(ze=!1,Ie.classList.remove("show"),void setTimeout(function(){Ie.removeChild(Ie.children[0])},600)):(X(),void pe.worker.postMessage({action:"generate"}))}function re(){var e=L(),t=I(qe.original,e),n=new Image;ze=!0,n.classList.add("crop-preview-image"),n.addEventListener("load",function(){var e=t.width,r=t.height,i=window.innerWidth-8,a=window.innerHeight-40,o=e/r;e>i&&(e=i,r=Math.floor(e/o)),r>a&&(r=a,e=Math.floor(r*o)),n.style.width=e+"px",n.style.height=r+"px",Ie.appendChild(n),Ie.classList.add("show")}),n.src=t.toDataURL("image/jpeg",ye.get())}function ie(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=qe.original,r=!1;return e.width=n.width,e.height=n.height,t.drawImage(n,0,0,e.width,e.height),qe.withQuality.addEventListener("load",function(){requestAnimationFrame(function(){y(),r=!1})}),function(t){r||(r=!0,qe.withQuality.src=e.toDataURL("image/jpeg",t))}}function ae(e,t){var n=e.selectionStart,r=e.selectionEnd,i=e.value;return i=n===r?i.slice(0,n)+t+i.slice(n,i.length):i.slice(0,n)+t+i.slice(r,i.length),Number.parseInt(i,10)}function oe(e,t){var n=Ve.get(e),r=Re.getTransform(),i=r.a;if(Oe[e]=t/n*i||0,"x"===e){var a=r.e;We[e]=a,We.width<0&&(We.width=-We.width)}else if("y"===e){var o=r.f;We[e]=o,We.height<0&&(We.height=-We.height)}else"width"===e?(We[e]<0&&(We.x=We.x+We[e]),We[e]=0):"height"===e&&(We[e]<0&&(We.y=We.y+We[e]),We[e]=0);We[e]+=Oe[e]}function se(e,t){if("scale"===e)return me(xe.width/2,xe.height/2,t),void requestAnimationFrame(y);"angle"===e?Ne=de(t):oe(e,t);var n=We.width&&We.height;n&&requestAnimationFrame(y),a(!n)}function ue(e){if(e.key)return e.key;var t=e.keyCode||e.which;return t?8===t||13===t?t:String.fromCharCode(t):void 0}function de(e){return e>180&&(e-=360),e*Math.PI/180}function ce(e){var t=e.target,n=ue(e),r=t.getAttribute("data-input"),i="Backspace"===n||8===n,a="Enter"===n||13===n;if(r&&/\d|-/.test(n)){var o="-"===n||45===n;if(o&&"x"!==r&&"y"!==r)return void e.preventDefault();var s=ae(t,n);se(r,s)}else i||a||e.preventDefault()}function le(e){var t=ue(e),n="Backspace"===t||8===t,r="Enter"===t||13===t;if(n||r){var i=e.target,a=i.getAttribute("data-input");se(a,i.value)}}function he(e){var t=e.target.getAttribute("data-btn");switch(t){case"crop":ee();break;case"preview":re();break;case"skip":te()}}function ge(e){function t(){return s}function n(t){s.a=1,s.d=1,s=s.scale(t,t),e.setTransform(s.a,0,0,s.a,s.e,s.f)}function r(t,n){s=s.translate(t,n),e.translate(t,n)}function i(e,t){var n=o.createSVGPoint();return n.x=e,n.y=t,n.matrixTransform(s.inverse())}function a(){s.a=1,s.b=0,s.c=0,s.d=1,s.e=0,s.f=0,e.resetTransform()}var o=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=o.createSVGMatrix();return{getTransform:t,scale:n,translate:r,getTransformedPoint:i,resetTransform:a}}function me(e,t,n){var r=We;Re.translate(e,t),Re.scale(n/100),Re.translate(-e,-t),r.width&&r.height&&c(r)}function fe(e){var t=k(e),n=t.x,r=t.y,i=Re.getTransformedPoint(n,r),a=Ce.value;e.deltaY>0?a*=.8:a/=.8,me(i.x,i.y,a),requestAnimationFrame(y),Ce.value=Math.round(a)}Object.defineProperty(n,"__esModule",{value:!0}),n.changeCanvasQuality=n.init=void 0;var ve=e("./process.js"),pe=r(ve),we=e("./cropper-quality.js"),ye=r(we),Ee=document.getElementById("js-crop"),xe=document.getElementById("js-canvas"),Le=xe.getContext("2d"),je=document.getElementById("js-crop-close"),Ie=document.getElementById("js-crop-preview"),be=document.getElementById("js-crop-reset"),ke=document.getElementById("js-crop-x"),Be=document.getElementById("js-crop-y"),Ae=document.getElementById("js-crop-width"),Me=document.getElementById("js-crop-height"),Te=document.getElementById("js-crop-angle"),Ce=document.getElementById("js-crop-scale"),Pe=document.getElementById("js-crop-data"),De={},qe={original:new Image,withQuality:new Image},We={},Oe={},Se=null,_e="",ze=!1,Ne=0,Fe=null,Qe=void 0,Re=void 0,Ue=m(),Ve=function(){function e(e){return"x"===e?e="width":"y"===e&&(e="height"),n[e]}function t(e,t){n[e]=t}var n={};return{get:e,set:t}}(),He=function(){function e(){r.clearRect(0,0,i,a)}function t(t){var n=L();!o&&n.width&&n.height&&(o=!0,requestAnimationFrame(function(){var s=I(t,n),u=s.width/s.height,d=E(s,i,a,u),c=d.width,l=d.height;e(),r.drawImage(s,(i-c)/2,(a-l)/2,c,l),o=!1}))}var n=document.getElementById("js-sidebar-preview"),r=n.getContext("2d"),i=192,a=150,o=!1;return n.width=i,n.height=a,{clean:e,draw:t}}();je.addEventListener("click",ne,!1),Pe.addEventListener("keypress",ce,!1),Pe.addEventListener("keyup",le,!1),document.getElementById("js-crop-data-btns").addEventListener("click",he,!1),xe.addEventListener("wheel",fe,!1),be.addEventListener("click",Y,!1),n.init=G,n.changeCanvasQuality=Se},{"./cropper-quality.js":1,"./process.js":5}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){N=e}function a(){return N}function o(e){document.getElementById("js-dropbox-label").classList[e]("mask"),document.getElementById("js-mask").classList[e]("show")}function s(e){F&&clearTimeout(F),F=setTimeout(function(){u()},e)}function u(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&s(2e3)}function d(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function c(e){W.value+=e}function l(){W.value=0}function h(){return 100===Math.round(W.value)}function g(){d(""),o("remove")}function m(){o("add"),i(!0),W.classList.add("show"),O.classList.remove("show"),_.classList.add("show")}function f(){i(!1),W.classList.remove("show"),_.classList.remove("show"),l(),g()}function v(){setTimeout(function(){return z?void 0:M.images.length?void(C.cropperEnabled?(f(),D.init()):(l(),M.processImages())):(f(),void u("No images to process"))},1200)}function p(e){return e.includes("image")}function w(e){return e.slice(0,e.lastIndexOf("."))}function y(e){var t=document.getElementById("js-image-name").value||w(e),n=document.getElementById("js-image-name-seperator").value||"-";return t+n}function E(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(t){M.images.push({name:{original:e.name,setByUser:y(e.name)},type:e.type,size:e.size/1e6,uri:t.target.result})}}function x(e,t){var n=e[0];if(d("Reading: "+n.name),e=Array.prototype.slice.call(e,1),p(n.type)&&E(n),c(t),e.length||v(),e.length){var r=n.size/1e6*100+100;setTimeout(function(){z||x(e,t)},r)}}function L(e){var t=100/e.length;M.worker&&M.worker.postMessage({action:"remove"}),M.images.length&&(M.images.length=0),M.zip=null,n.isCanceled=z=!1,S.classList.remove("show"),m(),x(e,t)}function j(e){var t=e.target.files;e.preventDefault(),t.length&&L(t)}function I(e){return Q=0,q.classList.remove("over"),e.stopPropagation(),e.preventDefault(),a()?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void L(e.dataTransfer.files))}function b(e){e.stopPropagation(),e.preventDefault()}function k(e){e.preventDefault(),a()||(Q+=1,q.classList.add("over"))}function B(){a()||(Q-=1,Q||q.classList.remove("over"))}Object.defineProperty(n,"__esModule",{value:!0}),n.removeMasksAndLabel=n.setProgressLabel=n.updateProgress=n.resetProgress=n.resetDropbox=n.showMessage=n.downloadBtn=n.progressBar=n.processBtn=n.isCanceled=n.beforeWork=n.isWorking=n.setWorking=n.cancelBtn=n.isDone=void 0;var A=e("./process.js"),M=r(A),T=e("./tools.js"),C=r(T),P=e("./cropper.js"),D=r(P),q=document.getElementById("js-dropbox"),W=document.getElementById("js-progress"),O=document.getElementById("js-process"),S=document.getElementById("js-download"),_=document.getElementById("js-cancel"),z=!1,N=!1,F=0,Q=0;document.getElementById("js-image-select").addEventListener("change",j,!1),q.addEventListener("dragover",b,!1),q.addEventListener("dragenter",k,!1),q.addEventListener("dragleave",B,!1),q.addEventListener("drop",I,!1),q.addEventListener("click",function(e){a()&&e.preventDefault()}),n.isDone=h,n.cancelBtn=_,n.setWorking=i,n.isWorking=a,n.beforeWork=m,n.isCanceled=z,n.processBtn=O,n.progressBar=W,n.downloadBtn=S,n.showMessage=u,n.resetDropbox=f,n.resetProgress=l,n.updateProgress=c,n.setProgressLabel=d,n.removeMasksAndLabel=g},{"./cropper.js":2,"./process.js":5,"./tools.js":7}],4:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=[].concat(r(document.querySelectorAll(".preload")));e.forEach(function(e){e.classList.remove("preload")}),window.removeEventListener("load",i,!1)}e("./process.js"),e("./resizer-settings.js"),e("./tools.js"),e("./dropbox.js"),window.addEventListener("load",i,!1),window.addEventListener("drop",function(e){e.preventDefault()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1)},{"./dropbox.js":3,"./process.js":5,"./resizer-settings.js":6,"./tools.js":7}],5:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){x.showMessage(e),t.classList.add("show")}function a(){b||(n.worker=b=new Worker("js/workers/worker1.js"),b.onmessage=function(e){n.zip=k=e.data,x.setWorking(!1),x.removeMasksAndLabel(),i("Images are ready for downloading.",x.downloadBtn),b.postMessage({action:"remove"})},b.onerror=function(e){console.log(e)})}function o(e){try{saveAs(e,"images.zip")}catch(t){var n=document.createElement("script");n.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(e,"images.zip")}}}function s(e){return"width"===e?"height":"width"}function u(e,t,n){var r=s(e),i="same"===t[e]?t[r]:t[e],a=n[e];return i.includes("%")?a*(Number.parseInt(i,10)/100):"original"===i||i===e?Number.parseInt(a,10):i===r?Number.parseInt(n[r],10):Number.parseInt(i,10)}function d(e,t){var n=t.width/t.height,r=0,i=0;return e.width&&(r=u("width",e,t),e.height?"same"===e.width&&(i=r):i=r/n),!i&&e.height&&(i=u("height",e,t),e.width?r||"same"!==e.height||(r=i):r=i*n),{width:r,height:i}}function c(e,t,n){var r=n.width,i=n.height,a=document.createElement("canvas"),o=document.getElementById("js-image-quality").value/100;return a.width=r,a.height=i,a.getContext("2d").drawImage(e,0,0,r,i),a.toDataURL(t,o)}function l(){x.setProgressLabel("Generating Archive"),b.postMessage({action:"generate"})}function h(){setTimeout(function(){x.isCanceled||(x.progressBar.classList.remove("show"),x.cancelBtn.classList.remove("show"),x.resetProgress(),l())},1e3)}function g(e,t){return function n(r,i){var a=r.splice(0,1)[0];if(x.updateProgress(i),b.postMessage({action:"add",image:{name:t.name.setByUser,uri:c(e,t.type,a),type:t.type.slice(6)}}),x.isDone()&&h(),r.length){var o=t.size*a.width*a.height/2e3+100;setTimeout(function(){x.isCanceled||n(r,i)},o)}}}function m(e,t){var n=100/(e.length*t.length);return function r(){var i=new Image,a=e.splice(0,1)[0];if(i.onload=function(){if(!x.isCanceled){var e=g(i,a),r={width:i.width,height:i.height},o=t.map(function(e){return d(e,r)});x.setProgressLabel("Processing: "+a.name.original),e(o,n)}},i.src=a.uri,e.length){var o=400*a.size+100;setTimeout(function(){x.isCanceled||r()},o)}}}function f(e){return e.length?(e=e.filter(function(e){return j.verifyValues(e.width,e.height)}),e.length||i("No valid values",x.processBtn)):i("No dimensions specified",x.processBtn),e}function v(e){for(var t=[],n=0,r=e.length;r>n;n+=2){var i=e[n].value,a=e[n+1].value;(i||a)&&t.push({width:i,height:a})}return t}function p(){var e=v(j.dimensionInputContainer.children);if(e=f(e),!e.length)return void x.resetDropbox();var t=m(I,e);a(),x.beforeWork(),t(),j.saveToLocalStorage(e)}function w(){o(k)}function y(){x.isCanceled=!0,n.zip=k=null,I.length=0,x.resetDropbox(),x.showMessage("Work canceled")}Object.defineProperty(n,"__esModule",{value:!0}),n.getInputValues=n.generateZip=n.initWorker=n.processImages=n.worker=n.images=n.zip=void 0;var E=e("./dropbox.js"),x=r(E),L=e("./resizer-settings.js"),j=r(L),I=[],b=void 0,k=void 0;x.processBtn.addEventListener("click",p,!1),x.downloadBtn.addEventListener("click",w,!1),x.cancelBtn.addEventListener("click",y,!1),n.zip=k,n.images=I,n.worker=b,n.processImages=p,n.initWorker=a,n.generateZip=l,n.getInputValues=v},{"./dropbox.js":3,"./resizer-settings.js":6}],6:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t={dimensionInputValues:e,imageName:f.value||"",imageNameSeperator:v.value||"",imageQuality:p.value};localStorage.setItem("settings",JSON.stringify(t))}function a(e){return e.reduce(function(e,t){return e.push(t.width,t.height),e},[])}function o(e,t){var n=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/,r=n.test(e)&&!("same"===e&&(!t||"same"===t)),i=n.test(t)&&!("same"===t&&(!e||"same"===e));return r||i}function s(e,t){Array.prototype.forEach.call(e,function(e,n){e.value=t[n]})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function d(e){for(var t=document.createDocumentFragment(),n=0;e>n;n++)t.appendChild(u());return t}function c(e,t){var n=e.children.length;if(t>n){var r=t-n;e.appendChild(d(r))}}function l(e){(0,g.showMessage)("Image quality set to: "+e.target.value+"%")}function h(e){var t=[].concat(r(m.children)),n=t.indexOf(e.target),i=n%2===0&&!t[n+2],a=n%2!==0&&!t[n+1];(i||a)&&m.appendChild(d(2))}Object.defineProperty(n,"__esModule",{value:!0}),n.verifyValues=n.saveToLocalStorage=n.dimensionInputContainer=void 0;var g=e("./dropbox.js"),m=document.getElementById("js-dimension-inputs"),f=document.getElementById("js-image-name"),v=document.getElementById("js-image-name-seperator"),p=document.getElementById("js-image-quality");!function(){var e=localStorage.getItem("settings");if(e){e=JSON.parse(e);var t=a(e.dimensionInputValues);c(m,t.length),s(m.children,t),f.value=e.imageName,v.value=e.imageNameSeperator,p.value=e.imageQuality}}(),p.addEventListener("input",l,!1),m.addEventListener("focus",h,!0),n.dimensionInputContainer=m,n.saveToLocalStorage=i,n.verifyValues=o},{"./dropbox.js":3}],7:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){var n=document.getElementById("js-"+e+"-settings");t.classList.toggle("active"),n&&n.classList.toggle("active")}function a(){var e=[].concat(r(document.querySelectorAll(".tool-selection-btn")));e.forEach(function(e){if(e.classList.contains("active")){var t=e.getAttribute("data-tool");i(t,e)}})}function o(e){var t=e.target,r=t.getAttribute("data-tool");r&&r!==d&&(d=r,a(),i(r,t),(0,s.showMessage)(r+" enabled"),n.cropperEnabled=u="cropper"===r)}Object.defineProperty(n,"__esModule",{value:!0}),n.cropperEnabled=void 0;var s=e("./dropbox.js"),u=!1,d="resizer";document.getElementById("js-tools-btns").addEventListener("click",o,!1),n.cropperEnabled=u},{"./dropbox.js":3}]},{},[4]);