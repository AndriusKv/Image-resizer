!function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){j&&clearTimeout(j),j=setTimeout(function(){o()},e)}function o(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&r(2e3)}function s(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function i(e){m.value+=e}function a(){m.value=0}function u(){return 100===Math.round(m.value)}function l(){s(""),(0,g.toggleMasks)("remove")}function c(){(0,g.toggleMasks)("add"),n.isWorking=y=!0,(0,g.toggleElement)("add",m),(0,g.toggleElement)("remove",f),(0,g.toggleElement)("add",v)}function d(){n.isWorking=y=!1,(0,g.toggleElement)("remove",m),(0,g.toggleElement)("remove",v),a(),l()}Object.defineProperty(n,"__esModule",{value:!0}),n.removeMasksAndLabel=n.setProgressLabel=n.updateProgress=n.resetProgress=n.resetDropbox=n.showMessage=n.downloadBtn=n.progressBar=n.processBtn=n.isCanceled=n.beforeWork=n.isWorking=n.cancelBtn=n.isDone=void 0;var g=e("./main.js"),m=document.getElementById("js-progress"),f=document.getElementById("js-process"),p=document.getElementById("js-download"),v=document.getElementById("js-cancel"),h=!1,y=!1,j=void 0;n.isDone=u,n.cancelBtn=v,n.isWorking=y,n.beforeWork=c,n.isCanceled=h,n.processBtn=f,n.progressBar=m,n.downloadBtn=p,n.showMessage=o,n.resetDropbox=d,n.resetProgress=a,n.updateProgress=i,n.setProgressLabel=s,n.removeMasksAndLabel=l},{"./main.js":2}],2:[function(e,t,n){"use strict";function r(e,t,n){t.classList[e](n)}function o(e,t){r(e,t,"show")}function s(e){r(e,document.getElementById("js-dropbox-label"),"mask"),r(e,document.getElementById("js-selections-mask"),"mask")}Object.defineProperty(n,"__esModule",{value:!0}),n.toggleElement=n.changeClass=n.toggleMasks=void 0,e("./dropbox.js"),e("./selections.js"),e("./read.js"),e("./process.js"),n.toggleMasks=s,n.changeClass=r,n.toggleElement=o},{"./dropbox.js":1,"./process.js":3,"./read.js":4,"./selections.js":5}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){w.showMessage(e),(0,B.toggleElement)("add",t)}function s(){L||(n.worker=L=new Worker("js/workers/worker1.js"),L.onmessage=function(e){n.zip=C=e.data,w.isWorking=!1,w.removeMasksAndLabel(),o("Images are ready for downloading.",w.downloadBtn),L.postMessage({action:"remove"})},L.onerror=function(e){console.log(e)})}function i(e){try{saveAs(e,"images.zip")}catch(t){var n=document.createElement("script");n.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(e,"images.zip")}}}function a(e){return"width"===e?"height":"width"}function u(e,t,n){var r=a(e),o="same"===t[e]?t[r]:t[e],s=n[e];return o.includes("%")?s*(Number.parseInt(o,10)/100):"original"===o||o===e?Number.parseInt(s,10):o===r?Number.parseInt(n[r],10):Number.parseInt(o,10)}function l(e,t){var n=t.width/t.height,r=0,o=0;return e.width&&(r=u("width",e,t),e.height?"same"===e.width&&(o=r):o=r/n),!o&&e.height&&(o=u("height",e,t),e.width?r||"same"!==e.height||(r=o):r=o*n),{width:r,height:o}}function c(e,t,n){var r=n.width,o=n.height,s=document.createElement("canvas");return s.width=r,s.height=o,s.getContext("2d").drawImage(e,0,0,r,o),s.toDataURL(t)}function d(){w.setProgressLabel("Generating Archive"),L.postMessage({action:"generate"})}function g(){setTimeout(function(){w.isCanceled||((0,B.toggleElement)("remove",w.progressBar),(0,B.toggleElement)("remove",w.cancelBtn),w.resetProgress(),d())},1e3)}function m(e,t){return function n(r,o){var s=r.splice(0,1)[0];if(w.updateProgress(o),L.postMessage({action:"add",image:{name:t.name.setByUser,uri:c(e,t.type,s),type:t.type.slice(6)}}),w.isDone()&&g(),r.length){var i=t.size*s.width*s.height/2e3+100;setTimeout(function(){w.isCanceled||n(r,o)},i)}}}function f(e,t){var n=new Image,r=e.splice(0,1)[0];if(n.onload=function(){if(!w.isCanceled){var o=m(n,r),s={width:n.width,height:n.height},i=t.map(function(e){return l(e,s)}),a=100/((e.length+1)*i.length);w.setProgressLabel("Processing: "+r.name.original),o(i,a)}},n.src=r.uri,e.length){var o=400*r.size+100;setTimeout(function(){w.isCanceled||f(e,t)},o)}}function p(e){return e.length?(e=e.filter(function(e){return b.verifyValue(e.width,e.height)||b.verifyValue(e.height,e.width)}),e.length||o("No valid values",w.processBtn)):o("No dimensions specified",w.processBtn),e}function v(){for(var e=b.widthInputCointaner.children,t=b.heightInputContainer.children,n=[],r=0,o=e.length;o>r;r++){var s=e[r].value,i=t[r].value;(s||i)&&n.push({width:s,height:i})}return p(n)}function h(){var e=v();return e.length?(s(),w.beforeWork(),f(k,e),void b.saveToLocalStorage()):void w.resetDropbox()}function y(){i(C)}function j(){w.isCanceled=!0,n.zip=C=null,k.length=0,w.resetDropbox(),w.showMessage("Work canceled.")}Object.defineProperty(n,"__esModule",{value:!0}),n.processImages=n.worker=n.images=n.zip=void 0;var E=e("./dropbox.js"),w=r(E),I=e("./selections.js"),b=r(I),B=e("./main.js"),k=[],L=void 0,C=void 0;w.processBtn.addEventListener("click",h,!1),w.downloadBtn.addEventListener("click",y,!1),w.cancelBtn.addEventListener("click",j,!1),n.zip=C,n.images=k,n.worker=L,n.processImages=h},{"./dropbox.js":1,"./main.js":2,"./selections.js":5}],4:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(){setTimeout(function(){y.isCanceled||(E.images.length?(y.resetProgress(),E.processImages()):(y.resetDropbox(),y.showMessage("No images to process.")))},1200)}function s(e){return e.includes("image")}function i(e){return e.slice(0,e.lastIndexOf("."))}function a(e){var t=document.getElementById("js-image-name").value||i(e),n=document.getElementById("js-image-name-seperator").value||"-";return t+n}function u(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(t){E.images.push({name:{original:e.name,setByUser:a(e.name)},type:e.type,size:e.size/1e6,uri:t.target.result})}}function l(e,t){var n=e[0];if(y.setProgressLabel("Reading: "+n.name),e=Array.prototype.slice.call(e,1),s(n.type)&&u(n),y.updateProgress(t),e.length||o(),e.length){var r=n.size/1e6*100+100;setTimeout(function(){y.isCanceled||l(e,t)},r)}}function c(e){var t=100/e.length;E.worker&&E.worker.postMessage({action:"remove"}),E.zip=null,y.isCanceled=!1,(0,v.toggleElement)("remove",y.downloadBtn),y.beforeWork(),l(e,t)}function d(e){var t=e.target.files;e.preventDefault(),t.length&&c(t)}function g(e){return I=0,(0,v.changeClass)("add",e.target,"over"),e.stopPropagation(),e.preventDefault(),y.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void c(e.dataTransfer.files))}function m(e){e.stopPropagation(),e.preventDefault()}function f(e){e.preventDefault(),y.isWorking||(I+=1,(0,v.changeClass)("add",e.target,"over"))}function p(e){y.isWorking||(I-=1,I||(0,v.changeClass)("remove",e.target,"over"))}var v=e("./main.js"),h=e("./dropbox.js"),y=r(h),j=e("./process.js"),E=r(j),w=document.getElementById("js-dropbox"),I=0;document.getElementById("js-image-select").addEventListener("change",d,!1),w.addEventListener("dragover",m,!1),w.addEventListener("dragenter",f,!1),w.addEventListener("dragleave",p,!1),w.addEventListener("drop",g,!1),w.addEventListener("click",function(e){y.isWorking&&e.preventDefault()})},{"./dropbox.js":1,"./main.js":2,"./process.js":3}],5:[function(e,t,n){"use strict";function r(){var e={numberOfInputs:p.value,widthInputValues:i(m.children),heightInputValues:i(f.children),imageName:document.getElementById("js-image-name").value||"",imageNameSeperator:document.getElementById("js-image-name-seperator").value||""};localStorage.setItem("Selections",JSON.stringify(e))}function o(e,t){var n=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/;return n.test(e)&&!("same"===e&&(!t||"same"===t))}function s(e,t){Array.prototype.forEach.call(e,function(e,n){e.value=t[n]})}function i(e){return Array.prototype.map.call(e,function(e){return e.value})}function a(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function u(e){for(var t=document.createDocumentFragment(),n=0;e>n;n++)t.appendChild(a());return t}function l(e,t){var n=e.children.length;if(t>n){var r=t-n;e.appendChild(u(r))}else for(var o=n-t;o--;)n=e.children.length,e.removeChild(e.children[n-1])}function c(e){var t=Number.parseInt(e.target.value,10);l(m,t),l(f,t)}function d(e){var t=e.target;t.innerHTML="Settings"===t.innerHTML?"Selections":"Settings",(0,g.toggleElement)("toggle",document.getElementById("js-selections")),(0,g.toggleElement)("toggle",document.getElementById("js-settings"))}Object.defineProperty(n,"__esModule",{value:!0}),n.verifyValue=n.saveToLocalStorage=n.heightInputContainer=n.widthInputCointaner=void 0;var g=e("./main.js"),m=document.getElementById("js-width-input-container"),f=document.getElementById("js-height-input-container"),p=document.getElementById("js-select");!function(){var e=localStorage.getItem("Selections");e&&(e=JSON.parse(e),p.value=e.numberOfInputs,l(m,e.numberOfInputs),l(f,e.numberOfInputs),s(m.children,e.widthInputValues),s(f.children,e.heightInputValues),document.getElementById("js-image-name").value=e.imageName,document.getElementById("js-image-name-seperator").value=e.imageNameSeperator)}(),p.addEventListener("input",c,!1),document.getElementById("js-settings-toggle").addEventListener("click",d,!1),n.widthInputCointaner=m,n.heightInputContainer=f,n.saveToLocalStorage=r,n.verifyValue=o},{"./main.js":2}]},{},[2]);