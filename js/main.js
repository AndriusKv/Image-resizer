!function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var t=n[s][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){"use strict";function r(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function o(e){d.value+=e}function i(){d.value=0}function s(){return 100===Math.round(d.value)}function a(){r(""),(0,l.removeMasks)()}function c(){(0,l.addMasks)(),t.isWorking=h=!0,(0,l.showElement)(d),(0,l.hideElement)(m),(0,l.showElement)(f)}function u(){t.isWorking=h=!1,(0,l.hideElement)(d),(0,l.hideElement)(f),i(),a()}Object.defineProperty(t,"__esModule",{value:!0});var l=e("./main.js"),d=document.getElementById("js-progress"),m=document.getElementById("js-process"),g=document.getElementById("js-download"),f=document.getElementById("js-cancel"),p=!1,h=!1;t.isDone=s,t.cancelBtn=f,t.isWorking=h,t.beforeWork=c,t.isCanceled=p,t.processBtn=m,t.progressBar=d,t.downloadBtn=g,t.resetDropbox=u,t.resetProgress=i,t.updateProgress=o,t.setProgressLabel=r,t.removeMasksAndLabel=a},{"./main.js":2}],2:[function(e,n,t){"use strict";function r(e,n){var t=e.classList;t.contains(n)||t.add(n)}function o(e,n){var t=e.classList;t.contains(n)&&t.remove(n)}function i(e){r(e,"show")}function s(e){o(e,"show")}function a(){r(m,"mask"),r(g,"mask")}function c(){o(m,"mask"),o(g,"mask")}function u(e){d&&clearTimeout(d),d=setTimeout(function(){l("")},e)}function l(e){requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&u(2e3)}Object.defineProperty(t,"__esModule",{value:!0}),e("./dropbox.js"),e("./selections.js"),e("./read.js"),e("./process.js");var d,m=document.getElementById("js-dropbox-label"),g=document.getElementById("js-selections-mask");t.addMasks=a,t.removeMasks=c,t.addClass=r,t.removeClass=o,t.showElement=i,t.hideElement=s,t.showMessage=l},{"./dropbox.js":1,"./process.js":3,"./read.js":4,"./selections.js":5}],3:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e,n){(0,L.showMessage)(e),(0,L.showElement)(n)}function i(){w||(t.worker=w=new Worker("js/workers/worker1.js"),w.onmessage=function(e){t.zip=I=e.data,C.isWorking=!1,C.removeMasksAndLabel(),o("Images are ready for downloading.",C.downloadBtn),w.postMessage({action:"remove"})},w.onerror=function(e){console.log(e)})}function s(e){try{saveAs(e,"images.zip")}catch(n){var t=document.createElement("script");t.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(t),t.onload=function(){saveAs(e,"images.zip")}}}function a(e,n){return e*(Number.parseInt(n,10)/100)}function c(e,n){return e?e.includes("%")?a(n,e):Number.parseInt(e,10):void 0}function u(e){var n=e.width,t=e.height;return n&&!t?t=n:!n&&t&&(n=t),{width:n,height:t}}function l(e,n){var t=e.width,r=e.height;return t?r=t/n:r&&(t=r*n),{width:t,height:r}}function d(e,n,t){var r=t.width,o=t.height,i=document.createElement("canvas");return i.width=r,i.height=o,i.getContext("2d").drawImage(e,0,0,r,o),i.toDataURL(n)}function m(){C.setProgressLabel("Generating Archive"),w.postMessage({action:"generate"})}function g(){setTimeout(function(){C.isCanceled||((0,L.hideElement)(C.progressBar),(0,L.hideElement)(C.cancelBtn),C.resetProgress(),m())},1e3)}function f(e,n,t){return function r(o){var i=o.splice(0,1)[0];if(C.updateProgress(t),w.postMessage({action:"add",image:{name:n.name.setByUser,uri:d(e,n.type,i),type:n.type.slice(6)}}),C.isDone()&&g(),o.length){var s=n.size*i.width*i.height/2e3+100;setTimeout(function(){C.isCanceled||r(o)},s)}}}function p(e,n){var t=100/(e.length*n.length);return function r(o){var i=new Image,s=e.splice(0,1)[0];if(i.onload=function(){if(!C.isCanceled){var e=f(i,s,t),r=i.width/i.height,a=[];a=n.map(function(e){return{width:c(e.width,i.width),height:c(e.height,i.height)}}).map(function(e){return o(e,r)}),C.setProgressLabel("Processing: "+s.name.original),e(a)}},i.src=s.uri,e.length){var a=400*s.size+100;setTimeout(function(){C.isCanceled||r(o)},a)}}}function h(){var e=k.widthInputCointaner.children,n=k.heightInputContainer.children;if(!k.hasValue(e)&&!k.hasValue(n))return o("No dimensions specified.",C.processBtn),!1;var t=k.isValid(e),r=k.isValid(n);return t&&r?!0:(o("Only values in pixels or percents are allowed.",C.processBtn),!1)}function v(){for(var e=k.widthInputCointaner.children,n=k.heightInputContainer.children,t=[],r=0,o=e.length;o>r;r++){var i=e[r].value,s=n[r].value;(i||s)&&t.push({width:i,height:s})}return t}function y(){if(!h())return void C.resetDropbox();i(),C.beforeWork();var e=v(),n=p(x,e);n(k.checkbox.checked?l:u),k.saveToLocalStorage()}function j(){s(I)}function E(){C.isCanceled=!0,t.zip=I=null,x.length=0,C.resetDropbox(),(0,L.showMessage)("Work canceled.")}Object.defineProperty(t,"__esModule",{value:!0});var w,I,b=e("./selections.js"),k=r(b),B=e("./dropbox.js"),C=r(B),L=e("./main.js"),x=[];C.processBtn.addEventListener("click",y,!1),C.downloadBtn.addEventListener("click",j,!1),C.cancelBtn.addEventListener("click",E,!1),t.zip=I,t.images=x,t.worker=w,t.processImages=y},{"./dropbox.js":1,"./main.js":2,"./selections.js":5}],4:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(){setTimeout(function(){y.isCanceled||(E.images.length?(y.resetProgress(),E.processImages()):(y.resetDropbox(),(0,h.showMessage)("No images to process.")))},1200)}function i(e){return e.includes("image")}function s(e){return e.slice(0,e.lastIndexOf("."))}function a(e){var n=document.getElementById("js-image-name").value||s(e),t=document.getElementById("js-image-name-seperator").value||"-";return n+t}function c(e){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(n){E.images.push({name:{original:e.name,setByUser:a(e.name)},type:e.type,size:e.size/1e6,uri:n.target.result})}}function u(e,n){var t=e[0];if(y.setProgressLabel("Reading: "+t.name),e=Array.prototype.slice.call(e,1),i(t.type)&&c(t),y.updateProgress(n),e.length||o(),e.length){var r=t.size/1e6*100+100;setTimeout(function(){y.isCanceled||u(e,n)},r)}}function l(e){var n=100/e.length;E.worker&&E.worker.postMessage({action:"remove"}),E.zip=null,y.isCanceled=!1,(0,h.hideElement)(y.downloadBtn),y.beforeWork(),u(e,n)}function d(e){var n=e.target.files;e.preventDefault(),n.length&&l(n)}function m(e){return I=0,(0,h.removeClass)(e.target,"over"),e.stopPropagation(),e.preventDefault(),y.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void l(e.dataTransfer.files))}function g(e){e.stopPropagation(),e.preventDefault()}function f(e){e.preventDefault(),y.isWorking||(I+=1,(0,h.addClass)(e.target,"over"))}function p(e){y.isWorking||(I-=1,I||(0,h.removeClass)(e.target,"over"))}var h=e("./main.js"),v=e("./dropbox.js"),y=r(v),j=e("./process.js"),E=r(j),w=document.getElementById("js-dropbox"),I=0;document.getElementById("js-image-select").addEventListener("change",d,!1),w.addEventListener("dragover",g,!1),w.addEventListener("dragenter",f,!1),w.addEventListener("dragleave",p,!1),w.addEventListener("drop",m,!1),w.addEventListener("click",function(e){y.isWorking&&e.preventDefault()})},{"./dropbox.js":1,"./main.js":2,"./process.js":3}],5:[function(e,n,t){"use strict";function r(){var e={numberOfInputs:j.value,checked:y.checked,widthInputValues:c(h.children),heightInputValues:c(v.children),imageName:document.getElementById("js-image-name").value||"",imageNameSeperator:document.getElementById("js-image-name-seperator").value||""};localStorage.setItem("Selections",JSON.stringify(e))}function o(e){(0,p.addClass)(e,"invalid"),setTimeout(function(){(0,p.removeClass)(e,"invalid")},400)}function i(e){var n=/^\d+(px|%)?$/,t=!0;return Array.prototype.forEach.call(e,function(e){e.value&&!n.test(e.value)&&(o(e),t=!1)}),t}function s(e){return Array.prototype.some.call(e,function(e){return e.value})}function a(e,n){Array.prototype.forEach.call(e,function(e,t){e.value=n[t]})}function c(e){return Array.prototype.map.call(e,function(e){return e.value})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function l(e){for(var n=document.createDocumentFragment(),t=0;e>t;t++)n.appendChild(u());return n}function d(e,n){var t=e.children.length;if(n>t){var r=n-t;e.appendChild(l(r))}else for(var o=t-n;o--;)t=e.children.length,e.removeChild(e.children[t-1])}function m(e){var n=Number.parseInt(e.target.value,10);d(h,n),d(v,n)}function g(e){document.getElementById(e).classList.toggle("show")}function f(e){var n=e.target;n.innerHTML="Settings"===n.innerHTML?"Selections":"Settings",g("js-selections"),g("js-settings")}Object.defineProperty(t,"__esModule",{value:!0});var p=e("./main.js"),h=document.getElementById("js-width-input-container"),v=document.getElementById("js-height-input-container"),y=document.getElementById("js-checkbox"),j=document.getElementById("js-select");!function(){var e=localStorage.getItem("Selections");e&&(e=JSON.parse(e),y.checked=e.checked,j.value=e.numberOfInputs,d(h,e.numberOfInputs),d(v,e.numberOfInputs),a(h.children,e.widthInputValues),a(v.children,e.heightInputValues),document.getElementById("js-image-name").value=e.imageName,document.getElementById("js-image-name-seperator").value=e.imageNameSeperator)}(),j.addEventListener("input",m,!1),document.getElementById("js-settings-toggle").addEventListener("click",f,!1),t.widthInputCointaner=h,t.heightInputContainer=v,t.saveToLocalStorage=r,t.hasValue=s,t.isValid=i,t.checkbox=y},{"./main.js":2}]},{},[2]);