!function e(n,t,r){function o(i,a){if(!t[i]){if(!n[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[i]={exports:{}};n[i][0].call(l.exports,function(e){var t=n[i][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,n,t){"use strict";function r(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function o(e){d.value+=e}function s(){d.value=0}function i(){return 100===Math.round(d.value)}function a(){r(""),l.removeMasks()}function c(){l.addMasks(),t.isWorking=h=!0,l.showElement(d),l.hideElement(f),l.showElement(p)}function u(){t.isWorking=h=!1,l.hideElement(d),l.hideElement(p),s(),a()}Object.defineProperty(t,"__esModule",{value:!0});var l=e("./main.js"),d=document.getElementById("js-progress"),f=document.getElementById("js-process"),m=document.getElementById("js-download"),p=document.getElementById("js-cancel"),g=!1,h=!1;t.isDone=i,t.cancelBtn=p,t.isWorking=h,t.beforeWork=c,t.isCanceled=g,t.processBtn=f,t.progressBar=d,t.downloadBtn=m,t.resetDropbox=u,t.resetProgress=s,t.updateProgress=o,t.setProgressLabel=r,t.removeMasksAndLabel=a},{"./main.js":2}],2:[function(e,n,t){"use strict";function r(e,n){var t=e.classList;t.contains(n)||t.add(n)}function o(e,n){var t=e.classList;t.contains(n)&&t.remove(n)}function s(e){r(e,"show")}function i(e){o(e,"show")}function a(){r(f,"mask"),r(m,"mask")}function c(){o(f,"mask"),o(m,"mask")}function u(e){d&&clearTimeout(d),d=setTimeout(function(){l("")},e)}function l(e){requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&u(2e3)}Object.defineProperty(t,"__esModule",{value:!0}),e("./dropbox.js"),e("./selections.js"),e("./read.js"),e("./process.js");var d,f=document.getElementById("js-dropbox-label"),m=document.getElementById("js-selections-mask");t.addMasks=a,t.removeMasks=c,t.addClass=r,t.removeClass=o,t.showElement=s,t.hideElement=i,t.showMessage=l},{"./dropbox.js":1,"./process.js":3,"./read.js":4,"./selections.js":5}],3:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e,n){C.showMessage(e),C.showElement(n)}function s(){y||(t.worker=y=new Worker("js/workers/worker1.js"),y.onmessage=function(e){t.zip=w=e.data,I.isWorking=!1,I.removeMasksAndLabel(),o("Images are ready for downloading.",I.downloadBtn),y.postMessage({action:"remove"})},y.onerror=function(e){console.log(e)})}function i(e){try{saveAs(e,"images.zip")}catch(n){var t=document.createElement("script");t.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(t),t.onload=function(){i(e)}}}function a(e){var n=e.width,t=e.height;return n&&!t?t=n:!n&&t&&(n=t),{width:n,height:t}}function c(e,n){var t=e.width,r=e.height;return t?r=t/n:r&&(t=r*n),{width:t,height:r}}function u(e,n,t){var r=t.width,o=t.height,s=document.createElement("canvas");return s.width=r,s.height=o,s.getContext("2d").drawImage(e,0,0,r,o),s.toDataURL(n)}function l(){I.setProgressLabel("Generating Archive"),y.postMessage({action:"generate"})}function d(){setTimeout(function(){I.isCanceled||(C.hideElement(I.progressBar),C.hideElement(I.cancelBtn),I.resetProgress(),l())},1e3)}function f(e,n,t){return function r(o){var s=o.splice(0,1)[0];if(I.updateProgress(t),y.postMessage({action:"add",image:{name:n.name,uri:u(e,n.type,s),type:n.type.slice(6)}}),I.isDone()&&d(),o.length){var i=n.size*s.width*s.height/2e3+100;setTimeout(function(){I.isCanceled||r(o)},i)}}}function m(e,n){var t=100/(e.length*n.length);return function r(o){var s=new Image,i=e.splice(0,1)[0];if(s.onload=function(){var e=s.width/s.height,r=n.map(function(n){return o(n,e)}),a=f(s,i,t);I.isCanceled||(I.setProgressLabel("Processing: "+i.name),a(r))},s.src=i.uri,e.length){var a=400*i.size+100;setTimeout(function(){I.isCanceled||r(o)},a)}}}function p(){var e=b.widthInputCointaner.children,n=b.heightInputContainer.children;if(!b.hasValue(e)&&!b.hasValue(n))return o("No dimensions specified.",I.processBtn),!1;var t=b.isValid(e),r=b.isValid(n);return t&&r?!0:(o("Only numbers allowed.",I.processBtn),!1)}function g(){for(var e=b.widthInputCointaner.children,n=b.heightInputContainer.children,t=[],r=0,o=e.length;o>r;r++){var s=Number.parseInt(e[r].value,10),i=Number.parseInt(n[r].value,10);(s||i)&&t.push({width:s,height:i})}return t}function h(){if(!p())return void I.resetDropbox();s(),I.beforeWork();var e=g(),n=m(B,e);n(b.checkbox.checked?c:a),b.saveToLocalStorage()}function v(){i(w)}function j(){I.isCanceled=!0,t.zip=w=null,B.length=0,I.resetDropbox(),C.showMessage("Work canceled.")}Object.defineProperty(t,"__esModule",{value:!0});var y,w,E=e("./selections.js"),b=r(E),k=e("./dropbox.js"),I=r(k),C=e("./main.js"),B=[];I.processBtn.addEventListener("click",h,!1),I.downloadBtn.addEventListener("click",v,!1),I.cancelBtn.addEventListener("click",j,!1),t.zip=w,t.images=B,t.worker=y,t.processImages=h},{"./dropbox.js":1,"./main.js":2,"./selections.js":5}],4:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(){setTimeout(function(){h.isCanceled||(j.images.length?(h.resetProgress(),j.processImages()):(h.resetDropbox(),p.showMessage("No images to process.")))},1200)}function s(e){return e.includes("image")}function i(e){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(n){j.images.push({name:e.name,type:e.type,size:e.size/1e6,uri:n.target.result})}}function a(e,n){var t=e[0];if(h.setProgressLabel("Reading: "+t.name),e=Array.prototype.slice.call(e,1),s(t.type)&&i(t),h.updateProgress(n),e.length||o(),e.length){var r=t.size/1e6*100+100;setTimeout(function(){h.isCanceled||a(e,n)},r)}}function c(e){var n=100/e.length;j.worker&&j.worker.postMessage({action:"remove"}),j.zip=null,h.isCanceled=!1,p.hideElement(h.downloadBtn),h.beforeWork(),a(e,n)}function u(e){var n=e.target.files;e.preventDefault(),n.length&&c(n)}function l(e){return w=0,p.removeClass(e.target,"over"),e.stopPropagation(),e.preventDefault(),h.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void c(e.dataTransfer.files))}function d(e){e.stopPropagation(),e.preventDefault()}function f(e){e.preventDefault(),h.isWorking||(w+=1,p.addClass(e.target,"over"))}function m(e){h.isWorking||(w-=1,w||p.removeClass(e.target,"over"))}var p=e("./main.js"),g=e("./dropbox.js"),h=r(g),v=e("./process.js"),j=r(v),y=document.getElementById("js-dropbox"),w=0;document.getElementById("js-image-select").addEventListener("change",u,!1),y.addEventListener("dragover",d,!1),y.addEventListener("dragenter",f,!1),y.addEventListener("dragleave",m,!1),y.addEventListener("drop",l,!1),y.addEventListener("click",function(e){h.isWorking&&e.preventDefault()})},{"./dropbox.js":1,"./main.js":2,"./process.js":3}],5:[function(e,n,t){"use strict";function r(){var e={numberOfInputs:v.value,checked:h.checked,widthInputValues:c(p.children),heightInputValues:c(g.children)};localStorage.setItem("Selections",JSON.stringify(e))}function o(e){m.addClass(e,"invalid"),setTimeout(function(){m.removeClass(e,"invalid")},400)}function s(e){var n=!0;return Array.prototype.forEach.call(e,function(e){/\D/g.test(e.value)&&(o(e),n=!1)}),n}function i(e){return Array.prototype.some.call(e,function(e){return e.value})}function a(e,n){Array.prototype.forEach.call(e,function(e,t){e.value=n[t]})}function c(e){return Array.prototype.map.call(e,function(e){return e.value})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function l(e){for(var n=document.createDocumentFragment(),t=0;e>t;t++)n.appendChild(u());return n}function d(e,n){var t=e.children.length;if(n>t){var r=n-t;e.appendChild(l(r))}else for(var o=t-n;o--;)t=e.children.length,e.removeChild(e.children[t-1])}function f(e){var n=Number.parseInt(e.target.value,10);d(p,n),d(g,n)}Object.defineProperty(t,"__esModule",{value:!0});var m=e("./main.js"),p=document.getElementById("js-width-input-container"),g=document.getElementById("js-height-input-container"),h=document.getElementById("js-checkbox"),v=document.getElementById("js-select");!function(){var e=localStorage.getItem("Selections");e&&(e=JSON.parse(e),h.checked=e.checked,v.value=e.numberOfInputs,d(p,e.numberOfInputs),d(g,e.numberOfInputs),a(p.children,e.widthInputValues),a(g.children,e.heightInputValues))}(),v.addEventListener("input",f,!1),t.widthInputCointaner=p,t.heightInputContainer=g,t.saveToLocalStorage=r,t.hasValue=i,t.isValid=s,t.checkbox=h},{"./main.js":2}]},{},[2]);