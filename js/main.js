!function e(n,t,r){function o(s,a){if(!t[s]){if(!n[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){var t=n[s][1][e];return o(t?t:e)},l,l.exports,e,n,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,n,t){"use strict";function r(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function o(e){d.value+=e}function i(){d.value=0}function s(){return 100===Math.round(d.value)}function a(){r(""),(0,l.removeMasks)()}function c(){(0,l.addMasks)(),t.isWorking=g=!0,(0,l.showElement)(d),(0,l.hideElement)(f),(0,l.showElement)(m)}function u(){t.isWorking=g=!1,(0,l.hideElement)(d),(0,l.hideElement)(m),i(),a()}Object.defineProperty(t,"__esModule",{value:!0});var l=e("./main.js"),d=document.getElementById("js-progress"),f=document.getElementById("js-process"),p=document.getElementById("js-download"),m=document.getElementById("js-cancel"),h=!1,g=!1;t.isDone=s,t.cancelBtn=m,t.isWorking=g,t.beforeWork=c,t.isCanceled=h,t.processBtn=f,t.progressBar=d,t.downloadBtn=p,t.resetDropbox=u,t.resetProgress=i,t.updateProgress=o,t.setProgressLabel=r,t.removeMasksAndLabel=a},{"./main.js":2}],2:[function(e,n,t){"use strict";function r(e,n){var t=e.classList;t.contains(n)||t.add(n)}function o(e,n){var t=e.classList;t.contains(n)&&t.remove(n)}function i(e){r(e,"show")}function s(e){o(e,"show")}function a(){r(f,"mask"),r(p,"mask")}function c(){o(f,"mask"),o(p,"mask")}function u(e){d&&clearTimeout(d),d=setTimeout(function(){l("")},e)}function l(e){requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&u(2e3)}Object.defineProperty(t,"__esModule",{value:!0}),e("./dropbox.js"),e("./selections.js"),e("./read.js"),e("./process.js");var d,f=document.getElementById("js-dropbox-label"),p=document.getElementById("js-selections-mask");t.addMasks=a,t.removeMasks=c,t.addClass=r,t.removeClass=o,t.showElement=i,t.hideElement=s,t.showMessage=l},{"./dropbox.js":1,"./process.js":3,"./read.js":4,"./selections.js":5}],3:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(e,n){(0,L.showMessage)(e),(0,L.showElement)(n)}function i(){E||(t.worker=E=new Worker("js/workers/worker1.js"),E.onmessage=function(e){t.zip=b=e.data,B.isWorking=!1,B.removeMasksAndLabel(),o("Images are ready for downloading.",B.downloadBtn),E.postMessage({action:"remove"})},E.onerror=function(e){console.log(e)})}function s(e){try{saveAs(e,"images.zip")}catch(n){var t=document.createElement("script");t.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(t),t.onload=function(){s(e)}}}function a(e,n){return e*(Number.parseInt(n,10)/100)}function c(e,n){return e?e.includes("%")?a(n,e):Number.parseInt(e,10):void 0}function u(e){var n=e.width,t=e.height;return n&&!t?t=n:!n&&t&&(n=t),{width:n,height:t}}function l(e,n){var t=e.width,r=e.height;return t?r=t/n:r&&(t=r*n),{width:t,height:r}}function d(e,n,t){var r=t.width,o=t.height,i=document.createElement("canvas");return i.width=r,i.height=o,i.getContext("2d").drawImage(e,0,0,r,o),i.toDataURL(n)}function f(){B.setProgressLabel("Generating Archive"),E.postMessage({action:"generate"})}function p(){setTimeout(function(){B.isCanceled||((0,L.hideElement)(B.progressBar),(0,L.hideElement)(B.cancelBtn),B.resetProgress(),f())},1e3)}function m(e,n,t){return function r(o){var i=o.splice(0,1)[0];if(B.updateProgress(t),E.postMessage({action:"add",image:{name:n.name,uri:d(e,n.type,i),type:n.type.slice(6)}}),B.isDone()&&p(),o.length){var s=n.size*i.width*i.height/2e3+100;setTimeout(function(){B.isCanceled||r(o)},s)}}}function h(e,n){var t=100/(e.length*n.length);return function r(o){var i=new Image,s=e.splice(0,1)[0];if(i.onload=function(){if(!B.isCanceled){var e=m(i,s,t),r=i.width/i.height,a=[];a=n.map(function(e){return{width:c(e.width,i.width),height:c(e.height,i.height)}}).map(function(e){return o(e,r)}),console.log(a),B.setProgressLabel("Processing: "+s.name),e(a)}},i.src=s.uri,e.length){var a=400*s.size+100;setTimeout(function(){B.isCanceled||r(o)},a)}}}function g(){var e=I.widthInputCointaner.children,n=I.heightInputContainer.children;if(!I.hasValue(e)&&!I.hasValue(n))return o("No dimensions specified.",B.processBtn),!1;var t=I.isValid(e),r=I.isValid(n);return t&&r?!0:(o("Only values in pixels or percents are allowed.",B.processBtn),!1)}function v(){for(var e=I.widthInputCointaner.children,n=I.heightInputContainer.children,t=[],r=0,o=e.length;o>r;r++){var i=e[r].value,s=n[r].value;(i||s)&&t.push({width:i,height:s})}return t}function w(){if(!g())return void B.resetDropbox();i(),B.beforeWork();var e=v(),n=h(x,e);n(I.checkbox.checked?l:u),I.saveToLocalStorage()}function j(){s(b)}function y(){B.isCanceled=!0,t.zip=b=null,x.length=0,B.resetDropbox(),(0,L.showMessage)("Work canceled.")}Object.defineProperty(t,"__esModule",{value:!0});var E,b,k=e("./selections.js"),I=r(k),C=e("./dropbox.js"),B=r(C),L=e("./main.js"),x=[];B.processBtn.addEventListener("click",w,!1),B.downloadBtn.addEventListener("click",j,!1),B.cancelBtn.addEventListener("click",y,!1),t.zip=b,t.images=x,t.worker=E,t.processImages=w},{"./dropbox.js":1,"./main.js":2,"./selections.js":5}],4:[function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n["default"]=e,n}function o(){setTimeout(function(){g.isCanceled||(w.images.length?(g.resetProgress(),w.processImages()):(g.resetDropbox(),(0,m.showMessage)("No images to process.")))},1200)}function i(e){return e.includes("image")}function s(e){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(n){w.images.push({name:e.name,type:e.type,size:e.size/1e6,uri:n.target.result})}}function a(e,n){var t=e[0];if(g.setProgressLabel("Reading: "+t.name),e=Array.prototype.slice.call(e,1),i(t.type)&&s(t),g.updateProgress(n),e.length||o(),e.length){var r=t.size/1e6*100+100;setTimeout(function(){g.isCanceled||a(e,n)},r)}}function c(e){var n=100/e.length;w.worker&&w.worker.postMessage({action:"remove"}),w.zip=null,g.isCanceled=!1,(0,m.hideElement)(g.downloadBtn),g.beforeWork(),a(e,n)}function u(e){var n=e.target.files;e.preventDefault(),n.length&&c(n)}function l(e){return y=0,(0,m.removeClass)(e.target,"over"),e.stopPropagation(),e.preventDefault(),g.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void c(e.dataTransfer.files))}function d(e){e.stopPropagation(),e.preventDefault()}function f(e){e.preventDefault(),g.isWorking||(y+=1,(0,m.addClass)(e.target,"over"))}function p(e){g.isWorking||(y-=1,y||(0,m.removeClass)(e.target,"over"))}var m=e("./main.js"),h=e("./dropbox.js"),g=r(h),v=e("./process.js"),w=r(v),j=document.getElementById("js-dropbox"),y=0;document.getElementById("js-image-select").addEventListener("change",u,!1),j.addEventListener("dragover",d,!1),j.addEventListener("dragenter",f,!1),j.addEventListener("dragleave",p,!1),j.addEventListener("drop",l,!1),j.addEventListener("click",function(e){g.isWorking&&e.preventDefault()})},{"./dropbox.js":1,"./main.js":2,"./process.js":3}],5:[function(e,n,t){"use strict";function r(){var e={numberOfInputs:v.value,checked:g.checked,widthInputValues:c(m.children),heightInputValues:c(h.children)};localStorage.setItem("Selections",JSON.stringify(e))}function o(e){(0,p.addClass)(e,"invalid"),setTimeout(function(){(0,p.removeClass)(e,"invalid")},400)}function i(e){var n=/^\d+(px|%)?$/,t=!0;return Array.prototype.forEach.call(e,function(e){e.value&&!n.test(e.value)&&(o(e),t=!1)}),t}function s(e){return Array.prototype.some.call(e,function(e){return e.value})}function a(e,n){Array.prototype.forEach.call(e,function(e,t){e.value=n[t]})}function c(e){return Array.prototype.map.call(e,function(e){return e.value})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function l(e){for(var n=document.createDocumentFragment(),t=0;e>t;t++)n.appendChild(u());return n}function d(e,n){var t=e.children.length;if(n>t){var r=n-t;e.appendChild(l(r))}else for(var o=t-n;o--;)t=e.children.length,e.removeChild(e.children[t-1])}function f(e){var n=Number.parseInt(e.target.value,10);d(m,n),d(h,n)}Object.defineProperty(t,"__esModule",{value:!0});var p=e("./main.js"),m=document.getElementById("js-width-input-container"),h=document.getElementById("js-height-input-container"),g=document.getElementById("js-checkbox"),v=document.getElementById("js-select");!function(){var e=localStorage.getItem("Selections");e&&(e=JSON.parse(e),g.checked=e.checked,v.value=e.numberOfInputs,d(m,e.numberOfInputs),d(h,e.numberOfInputs),a(m.children,e.widthInputValues),a(h.children,e.heightInputValues))}(),v.addEventListener("input",f,!1),t.widthInputCointaner=m,t.heightInputContainer=h,t.saveToLocalStorage=r,t.hasValue=s,t.isValid=i,t.checkbox=g},{"./main.js":2}]},{},[2]);