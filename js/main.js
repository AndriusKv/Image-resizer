!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return a(n?n:e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){var n=te.getTransformedPoint(e.x,e.y),r=n.x,a=n.y,i=te.getTransformedPoint(e.x+e.width,e.y+e.height),o=i.x-r,s=i.y-a;ie.set({x:r,y:a,width:o,height:s},!0),t&&(r=0,a=0),U.updatePointDisplay(r,a),U.updateMeasurmentDisplay(o,s)}function i(e){var t=J.width,n=J.height;K.useImageWithQuality()?e=J.withQuality:e||(e=J.original),Z.drawImage(e,0,0,t,n)}function o(){var e=new Image,t=void 0;return e.addEventListener("load",function(){t=Z.createPattern(e,"repeat")}),e.src="images/pattern.png",function(){Z.fillStyle=t,Z.save(),Z.setTransform(1,0,0,1,0,0),Z.fillRect(0,0,$.width,$.height),s(),Z.restore()}}function s(){Z.fillStyle="rgba(0, 0, 0, .4)",Z.fillRect(0,0,$.width,$.height)}function u(e){Z.strokeRect(e.x+.5,e.y+.5,e.width,e.height)}function c(e){var t=e.width,n=e.height,r=t&&n,a=e.x,i=e.y,o=void 0;r&&(o=Z.getImageData(a,i,t,n),0>t&&(a+=t),0>n&&(i+=n)),(r||ie.getHasArea())&&s(),o&&Z.putImageData(o,a,i),u(e)}function d(e,t){var n=e.width>0?e.width:-e.width,r=e.height>0?e.height:-e.height;Z.save(),Z.translate(e.x+.5+e.width/2,e.y+.5+e.height/2),Z.rotate(t),Z.strokeRect(-e.width/2,-e.height/2,e.width,e.height),Z.beginPath(),Z.rect(-n/2,-r/2,n,r),Z.restore(),Z.rect($.width,0,-$.width,$.height),Z.fillStyle="rgba(0, 0, 0, .4)",Z.fill()}function l(){var e=K.useImageWithQuality()?J.withQuality:J.original,t=U.angle.get(),n=ie.get();ne(),i(e),Z.save(),Z.lineWidth=1,Z.strokeStyle="#006494",Z.setTransform(1,0,0,1,0,0),t?d(n,t):c(n),Z.restore(),U.preview.draw(e)}function g(e,t,n,r){var a=e.width,i=e.height;return a>t&&(a=t,i=a/r),i>n&&(i=n,a=i*r),{width:a,height:i}}function f(e){var t=J.original;t.addEventListener("load",function(){var e=t.width,r=t.height,a=e/r,i=window.innerWidth-212,o=window.innerHeight-40,s=g(t,i,o,a),u=s.width,c=s.height,d=(i-u)/2,l=(o-c)/2,f=te.setDefaultTranslation(d,l);$.width=i,$.height=o,J.width=u,J.height=c,ne(),te.resetTransform(),te.translateDefault(),ie.setDefaultPos(f.x,f.y),Z.drawImage(t,0,0,u,c),n.changeCanvasQuality=Y=F(),re.set("width",e/u),re.set("height",r/c),$.classList.add("show")}),t.src=e}function h(e){var t=$.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function v(e,t,n){var r=e.x,a=e.y,i=r+e.width,o=a+e.height,s=t>=r&&i>=t||r>=t&&t>=i,u=n>=a&&o>=n||a>=n&&n>=o;return s&&u}function p(e){var t=h(e),n=t.x,r=t.y,i=ae.get(),o=ie.get(),s="";if(-1!==i.indexOf("n")?(ie.setProp("height",o.y-r+o.height),ie.setProp("y",r),s="n"):-1!==i.indexOf("s")&&(ie.setProp("height",r-o.y),s="s"),-1!==i.indexOf("w")?(ie.setProp("width",o.x-n+o.width),ie.setProp("x",n),s+="e"):-1!==i.indexOf("e")&&(ie.setProp("width",n-o.x),s+="w"),s.length>1){var u=ae.reverse(i,s,o);$.style.cursor=u+"-resize"}requestAnimationFrame(l),a(o)}function m(e,t){var n=ie.get(),r=e-n.x,a=t-n.y;return function(e){if(e.ctrlKey){var t=h(e),n=t.x,i=t.y,o=ie.setProp("x",n-r),s=ie.setProp("y",i-a);requestAnimationFrame(l);var u=te.getTransformedPoint(o,s);U.updatePointDisplay(u.x,u.y)}}}function w(e){if(1===e.which){var t=h(e),n=t.x,r=t.y,a=ie.get(),i=a.width&&a.height,o=U.angle.get(),s=ae.set(n,r,a);if($.removeEventListener("mousemove",L,!1),window.removeEventListener("keydown",x,!1),e.shiftKey)X=te.getTransformedPoint(n,r),Q.cropping.toggleEventListeners("add",T,O);else if(e.ctrlKey&&i){var u=o?E:v;if(u(a,n,r))return ee=m(n,r),void Q.cropping.toggleEventListeners("add",ee,k);Q.cropping.toggleEventListeners("add",D,M)}else s&&i&&!o?Q.cropping.toggleEventListeners("add",p,B):(_(),U.angle.reset(),ie.setProp("x",n),ie.setProp("y",r),U.updatePointDisplay(n,r),Q.cropping.toggleEventListeners("add",y,C));requestAnimationFrame(l)}}function y(e){var t=h(e),n=t.x,r=t.y,i=ie.get();ie.setProp("width",n-i.x),ie.setProp("height",r-i.y),ie.setHasArea(!0),requestAnimationFrame(l),a(i)}function I(){$.style.cursor="default",window.removeEventListener("keyup",I,!1)}function x(e){var t=U.angle.get(),n=t?E:v,r=ie,a=G.x,i=G.y;e.ctrlKey&&n(r,a,i)&&($.style.cursor="move"),window.addEventListener("keyup",I,!1)}function j(e,t){var n=ie.get(),r=n.width&&n.height;if(Q.cropping.toggleEventListeners("remove",e,t),r)$.addEventListener("mousemove",L,!1),window.addEventListener("keydown",x,!1);else{var a=te.getTransform(),o=ie.reset();U.updateDataDisplay(o),ie.setProp("x",a.e),ie.setProp("y",a.f),ne(),i(),$.style.cursor="default"}ie.setHasArea(r),U.toggleButtons(!r)}function b(e,t){var n=ie.get(),r=ae.getOpposite(e,t,n);$.style.cursor=r?r+"-resize":"default"}function E(e,t,n){var r=U.angle.get(),a=t-(e.x+e.width/2),i=n-(e.y+e.height/2),o=a*Math.cos(-r)-i*Math.sin(-r),s=a*Math.sin(-r)+i*Math.cos(-r),u={x:-e.width/2,y:-e.height/2,width:e.width,height:e.height};return v(u,o,s)}function L(e){var t=h(e),n=t.x,r=t.y,a=ie.get(),i=U.angle.get();if(G.x=n,G.y=r,e.ctrlKey){var o=i?E:v;return o(a,n,r)?void($.style.cursor="move"):void($.style.cursor="default")}i||b(n,r)}function A(e){var t=h(e),n=t.x,r=t.y,a=ie.get(),i=a.x+a.width/2,o=a.y+a.height/2;return Math.atan2(o-r,i-n)}function P(e){var t=Math.round(180*e/Math.PI);return 0>t&&(t+=360),t}function D(e){var t=A(e),n=P(t);U.cropDataInputs.setValue("angle",n),0===n||360===n?U.angle.reset():U.angle.set(t),requestAnimationFrame(l)}function T(e){if(X){var t=h(e),n=t.x,r=t.y,a=te.getTransformedPoint(n,r),i=ie.get();if(te.translate(a.x-X.x,a.y-X.y),requestAnimationFrame(l),i.width&&i.height){var o=te.getTransformedPoint(i.x,i.y);U.updatePointDisplay(o.x,o.y)}}}function B(){j(p,B)}function k(){j(ee,k)}function C(){j(y,C)}function M(){j(D,M)}function O(){X=null,j(T,O)}function S(e){f(e.uri),n.canvasTransform=te=N(Z),$.addEventListener("mousedown",w,!1)}function _(e){var t=ie.reset();U.cropDataInputs.setValue("angle",0),U.preview.clean(),a(t,e)}function q(){U.cropDataInputs.setValue("scale",100),K.reset(),_(!0),Q.updateRemainingImageIndicator("remove"),Q.cropping.hide(),$.removeEventListener("mousedown",w,!1)}function F(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=J.original,r=!1;return e.width=n.width,e.height=n.height,t.drawImage(n,0,0,e.width,e.height),J.withQuality.addEventListener("load",function(){requestAnimationFrame(function(){l(),r=!1})}),function(t){r||(r=!0,J.withQuality.src=e.toDataURL("image/jpeg",t))}}function N(e){function t(){return l}function n(t){l.a=1,l.d=1,l=l.scale(t,t),e.setTransform(l.a,0,0,l.a,l.e,l.f)}function r(t,n){l=l.translate(t,n),e.translate(t,n)}function a(){r(d.x,d.y)}function i(e,t){var n=c.createSVGPoint();return n.x=e,n.y=t,n.matrixTransform(l.inverse())}function o(){l.a=1,l.b=0,l.c=0,l.d=1,l.e=0,l.f=0,e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0)}function s(e,t){return d.x=e,d.y=t,d}function u(){return d}var c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d={},l=c.createSVGMatrix();return{setDefaultTranslation:s,getTranslated:u,getTransform:t,scale:n,translate:r,translateDefault:a,getTransformedPoint:i,resetTransform:o}}function z(e,t,n){var r=ie.get();if(te.translate(e,t),te.scale(n/100),te.translate(-e,-t),r.width&&r.height)a(r);else{var i=te.getTransform();ie.setProp("x",i.e),ie.setProp("y",i.f)}}function V(e){var t=h(e),n=t.x,r=t.y,a=te.getTransformedPoint(n,r),i=U.cropDataInputs.getValue("scale");e.deltaY>0?i*=.8:i/=.8,z(a.x,a.y,i),requestAnimationFrame(l),U.cropDataInputs.setValue("scale",Math.round(i))}Object.defineProperty(n,"__esModule",{value:!0}),n.changeCanvasQuality=n.resetCropper=n.resetData=n.addBackground=n.drawImage=n.drawCanvas=n.selectedArea=n.getImageSize=n.canvasTransform=n.drawInitialImage=n.canvasImage=n.scaleImage=n.canvas=n.ratio=n.init=void 0;var R=e("./cropper.js"),Q=r(R),W=e("./cropper.sidebar.js"),U=r(W),H=e("./cropper.quality.js"),K=r(H),$=document.getElementById("js-canvas"),Z=$.getContext("2d"),G={},J={original:new Image,withQuality:new Image},Y=null,X=null,ee=void 0,te=void 0,ne=o(),re=function(){function e(e){return"x"===e?e="width":"y"===e&&(e="height"),n[e]}function t(e,t){n[e]=t}var n={};return{get:e,set:t}}(),ae=function(){function e(){return i}function t(e,t,n){return t?e+="w":n&&(e+="e"),e}function n(e,t,n){var r=n.x,a=n.y,i=r+n.width,o=a+n.height;if(i>r){if(a>o)return t}else if(o>a)return t;return e}function r(e,t,r){var i=a(e,t,r);switch(i){case"nw":return n(i,"ne",r);case"ne":return n(i,"nw",r);case"sw":return n(i,"se",r);case"se":return n(i,"sw",r);default:return i}}function a(e,n,r){var a=4,o=r.x,s=r.y,u=o+r.width,c=s+r.height,d=e>=o-a&&u+a>=e||o+a>=e&&e>=u-a,l=n>=s-a&&c+a>=n||s+a>=n&&n>=c-a;if(i="",d&&l){var g=n>=s-a&&s+a>=n,f=e>=u-a&&u+a>=e,h=n>=c-a&&c+a>=n,v=e>=o-a&&o+a>=e;g?i=t("n",v,f):h?i=t("s",v,f):f?i="e":v&&(i="w")}return i}var i="";return{get:e,getOpposite:r,set:a,reverse:n}}(),ie=function(){function e(e){return e?l:d}function t(){var e=re.get("width"),t=re.get("height");return{x:d.x*e,y:d.y*t,width:d.width*e,height:d.height*t}}function n(e){return d[e]}function r(e,t){return t?(Object.assign(l,e),l):(Object.assign(d,e),d)}function a(e,t,n){return n?l[e]=t:d[e]=t,t}function i(e,t){a("x",e),a("y",t)}function o(){return d.x=0,d.y=0,d.width=0,d.height=0,Object.assign(l,d),d}function s(e,t){var n=re.get(e),r=te.getTransform(),a=r.a,i=0;if(l[e]=t/n*a||0,"x"===e){var o=r.e;i=o,d.width<0&&(d.width=-d.width)}else if("y"===e){var s=r.f;i=s,d.height<0&&(d.height=-d.height)}else"width"===e?d[e]<0&&(d.x=d.x+d[e]):"height"===e&&d[e]<0&&(d.y=d.y+d[e]);d[e]=i+l[e]}function u(e){return g=e}function c(){return g}var d={x:0,y:0,width:0,height:0},l={},g=void 0;return{get:e,getScaled:t,set:r,getProp:n,setProp:a,setDefaultPos:i,reset:o,update:s,setHasArea:u,getHasArea:c}}();$.addEventListener("wheel",V,!1),n.init=S,n.ratio=re,n.canvas=$,n.scaleImage=z,n.canvasImage=J,n.drawInitialImage=f,n.canvasTransform=te,n.getImageSize=g,n.selectedArea=ie,n.drawCanvas=l,n.drawImage=i,n.addBackground=ne,n.resetData=_,n.resetCropper=q,n.changeCanvasQuality=Y},{"./cropper.js":2,"./cropper.quality.js":3,"./cropper.sidebar.js":4}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){var t=document.getElementById("js-crop-remaining"),n=c.images.getCount(),r=n-1,a="";a="remove"===e?"":1===r?r+" image remaining":r+" images remaining",t.textContent=a}function i(e){document.getElementById("js-crop-image-name").textContent=e}function o(){var e=c.images,t=e.getCount(),n=e.getFirst();c.worker.init(),i(n.name.original),l.init(n),f.toggleButtons(!0),f.toggleSkipButton(t),v.show(),t>1&&a()}function s(){return p.getState()?(p.setState(!1),void p.hide()):(l.resetCropper(),void c.worker.post({action:"generate"}))}Object.defineProperty(n,"__esModule",{value:!0}),n.updateRemainingImageIndicator=n.displayImageName=n.cropping=n.preview=n.init=void 0;var u=e("./dropbox.js"),c=r(u),d=e("./cropper.canvas.js"),l=r(d),g=e("./cropper.sidebar.js"),f=r(g),h=document.getElementById("js-crop-close"),v=function(){function e(){r.classList.add("show")}function t(){r.classList.remove("show")}function n(e,t,n){r[e+"EventListener"]("mousemove",t,!1),r[e+"EventListener"]("mouseup",n,!1)}var r=document.getElementById("js-crop");return{show:e,hide:t,toggleEventListeners:n}}(),p=function(){function e(e){a.appendChild(e),a.classList.add("show")}function t(){a.classList.remove("show"),setTimeout(function(){a.removeChild(a.children[0])},600)}function n(){return i}function r(e){i=e}var a=document.getElementById("js-crop-preview"),i=!1;return{show:e,hide:t,getState:n,setState:r}}();h.addEventListener("click",s,!1),n.init=o,n.preview=p,n.cropping=v,n.displayImageName=i,n.updateRemainingImageIndicator=a},{"./cropper.canvas.js":1,"./cropper.sidebar.js":4,"./dropbox.js":6}],3:[function(e,t,n){"use strict";function r(e){document.getElementById("js-quality-value").textContent=e}function a(e){g=e!==l,f=e,r(e)}function i(){g=!1,d.value=.92,r(l)}function o(){return g?f:l}function s(){return g}function u(e){var t=Number.parseFloat(e.target.value);a(t),(0,c.changeCanvasQuality)(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.get=n.reset=n.useImageWithQuality=void 0;var c=e("./cropper.canvas.js"),d=document.getElementById("js-crop-quality"),l=.92,g=!1,f=l;d.addEventListener("input",u,!1),n.useImageWithQuality=s,n.reset=i,n.get=o},{"./cropper.canvas.js":1}],4:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){var n=new Image;n.addEventListener("load",function(){var r=C.selectedArea.getScaled(),a=c(n,r);return D.worker.post({action:"add",image:{name:e.name.setByUser,type:e.type.slice(6),uri:a.toDataURL(e.type,O.get())}}),D.images.getCount()?void t():(C.resetCropper(),void D.generateZip())}),n.src=e.uri}function i(e,t){e.disabled=t}function o(e){var t=document.getElementById("js-crop-ok"),n=document.getElementById("js-crop-preview-btn");i(t,e),i(n,e)}function s(e){var t=document.getElementById("js-crop-skip"),n=e>1;i(t,!n)}function u(e,t,n,r){var a=C.canvasTransform.getTransform(),i=a.e*C.ratio.get("width"),o=a.f*C.ratio.get("height"),s=a.a;if(n.save(),r){var u=t.x+t.width/2,c=t.y+t.height/2;n.translate(u,c),n.rotate(-r),n.translate(-u,-c)}return n.translate(i,o),n.scale(s,s),n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x,t.y,t.width,t.height)}function c(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),a=C.canvasTransform.getTranslated(),i=a.x*C.ratio.get("width"),o=a.y*C.ratio.get("height");n.width=e.width+2*i,n.height=e.height+2*o;var s=u(e,t,r,q.get());return n.width=s.width,n.height=s.height,r.putImageData(s,0,0),n}function d(e,t){return e?t>0?e:t+e:0}function l(e,t){var n=C.selectedArea.get(!0);n.width&&n.height&&(e=d(e,n.width),t=d(t,n.height)),_.setValue("x",Math.round(e*C.ratio.get("width"))),_.setValue("y",Math.round(t*C.ratio.get("height")))}function g(e,t){e=Math.round(e*C.ratio.get("width")),t=Math.round(t*C.ratio.get("height")),_.setValue("width",0>e?-e:e),_.setValue("height",0>t?-t:t)}function f(e){l(e.x,e.y),g(e.width,e.height)}function h(){O.reset(),_.setValue("scale",100),C.selectedArea.setHasArea(!1),C.resetData(!0)}function v(){var e=C.canvasTransform.getTranslated();q.reset(),h(),C.canvasTransform.resetTransform(),C.canvasTransform.translateDefault(),C.selectedArea.setDefaultPos(e.x,e.y),C.addBackground(),C.drawImage(),o(!0)}function p(e,t){var n=e.selectionStart,r=e.selectionEnd,a=e.value;return a=n===r?a.slice(0,n)+t+a.slice(n,a.length):a.slice(0,n)+t+a.slice(r,a.length),Number.parseInt(a,10)}function m(e){return e>180&&(e-=360),e*Math.PI/180}function w(e,t){if("scale"===e)return C.scaleImage(C.canvas.width/2,C.canvas.height/2,t),void requestAnimationFrame(C.drawCanvas);if("angle"===e){var n=m(t);q.set(n)}else C.selectedArea.update(e,t);var r=C.selectedArea.get(),a=r.width&&r.height;a&&requestAnimationFrame(C.drawCanvas),o(!a)}function y(e){if(e.key)return e.key;var t=e.keyCode||e.which;return t?8===t||13===t?t:String.fromCharCode(t):void 0}function I(e){var t=e.target,n=y(e),r=t.getAttribute("data-input"),a="Backspace"===n||8===n,i="Enter"===n||13===n;if(r&&/\d|-/.test(n)){var o="-"===n||45===n;if(o&&"x"!==r&&"y"!==r)return void e.preventDefault();var s=p(t,n);w(r,s)}else a||i||e.preventDefault()}function x(e){var t=y(e),n="Backspace"===t||8===t,r="Enter"===t||13===t;if(n||r){var a=e.target,i=a.getAttribute("data-input");w(i,a.value)}}function j(e){var t=D.images.getCount();C.canvas.classList.remove("show"),s(t),o(!0),t&&(B.updateRemainingImageIndicator(),B.displayImageName(e.name.original),setTimeout(function(){C.drawInitialImage(e.uri)},200))}function b(){var e=D.images,t=e.remove(0);a(t,h),j(e.getFirst())}function E(){var e=C.selectedArea.getScaled(),t=c(C.canvasImage.original,e),n=new Image;B.preview.setState(!0),n.classList.add("crop-preview-image"),n.addEventListener("load",function(){var e=t.width,r=t.height,a=window.innerWidth-8,i=window.innerHeight-40,o=e/r;e>a&&(e=a,r=Math.floor(e/o)),r>i&&(r=i,e=Math.floor(r*o)),n.style.width=e+"px",n.style.height=r+"px",B.preview.show(n)}),n.src=t.toDataURL("image/jpeg",O.get())}function L(){var e=D.images;h(),e.remove(0),j(e.getFirst())}function A(e){var t=e.target.getAttribute("data-btn");switch(t){case"crop":b();break;case"preview":E();break;case"skip":L()}}Object.defineProperty(n,"__esModule",{value:!0}),n.cropDataInputs=n.updateDataDisplay=n.updateMeasurmentDisplay=n.updatePointDisplay=n.toggleSkipButton=n.toggleButtons=n.preview=n.angle=void 0;var P=e("./dropbox.js"),D=r(P),T=e("./cropper.js"),B=r(T),k=e("./cropper.canvas.js"),C=r(k),M=e("./cropper.quality.js"),O=r(M),S=document.getElementById("js-crop-data"),_=function(){function e(e){return document.getElementById("js-crop-"+e).value}function t(e,t){document.getElementById("js-crop-"+e).value=t}return{getValue:e,setValue:t}}(),q=function(){function e(e){r=e}function t(){return r}function n(){r=0}var r=0;return{set:e,get:t,reset:n}}(),F=function(){function e(){r.clearRect(0,0,a,i)}function t(t){var n=C.selectedArea.getScaled();if(!o){if(!n.width||!n.height)return void e();o=!0,requestAnimationFrame(function(){var s=c(t,n),u=s.width/s.height,d=C.getImageSize(s,a,i,u),l=d.width,g=d.height;e(),r.drawImage(s,(a-l)/2,(i-g)/2,l,g),o=!1})}}var n=document.getElementById("js-sidebar-preview"),r=n.getContext("2d"),a=192,i=150,o=!1;return n.width=a,n.height=i,{clean:e,draw:t}}();document.getElementById("js-crop-reset").addEventListener("click",v,!1),S.addEventListener("keypress",I,!1),S.addEventListener("keyup",x,!1),document.getElementById("js-crop-data-btns").addEventListener("click",A,!1),n.angle=q,n.preview=F,n.toggleButtons=o,n.toggleSkipButton=s,n.updatePointDisplay=l,n.updateMeasurmentDisplay=g,n.updateDataDisplay=f,n.cropDataInputs=_},{"./cropper.canvas.js":1,"./cropper.js":2,"./cropper.quality.js":3,"./dropbox.js":6}],5:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){e.stopPropagation(),e.preventDefault()}function i(e){e.preventDefault(),1!==d.state.get()&&(g+=1,l.classList.add("over"))}function o(){1!==d.state.get()&&(g-=1,g||l.classList.remove("over"))}function s(e){return g=0,l.classList.remove("over"),e.stopPropagation(),e.preventDefault(),1===d.state.get()?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void d.onFiles(e.dataTransfer.files))}function u(e){1===d.state.get()&&e.preventDefault()}var c=e("./dropbox.js"),d=r(c),l=document.getElementById("js-dropbox"),g=0;l.addEventListener("dragover",a,!1),l.addEventListener("dragenter",i,!1),l.addEventListener("dragleave",o,!1),l.addEventListener("drop",s,!1),l.addEventListener("click",u,!1)},{"./dropbox.js":6}],6:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){try{saveAs(e,"images.zip")}catch(t){var n=document.createElement("script");n.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(e,"images.zip")}}}function o(e){document.getElementById("js-dropbox-label").classList[e]("mask"),document.getElementById("js-mask").classList[e]("show")}function s(){B.setLabel(""),o("remove")}function u(){o("add"),P.set(1),B.show(),C.hide("process"),C.show("cancel")}function c(){var e=arguments.length<=0||void 0===arguments[0]?-1:arguments[0];P.set(e),C.hide("cancel"),B.reset(),s()}function d(){return 0!==P.get()?D.getCount()?void("cropper"===E.getCurrentTool()?(c(),A.init()):(B.reset(),j.processImages())):(c(),void k.show("No images to process")):void 0}function l(e){return e.includes("image")}function g(e){return e.slice(0,e.lastIndexOf("."))}function f(e){var t=document.getElementById("js-image-name").value||g(e),n=document.getElementById("js-image-name-seperator").value||"-";return t+n}function h(){B.setLabel("Generating archive"),T.post({action:"generate"})}function v(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(t){D.add({name:{original:e.name,setByUser:f(e.name)},type:e.type,size:e.size/1e6,uri:t.target.result})}}function p(e,t){var n=e.splice(0,1)[0];if(B.setLabel("Reading: "+n.name),l(n.type)&&v(n),B.update(t),!e.length)return void setTimeout(d,1200);var r=n.size/1e6*100+120;setTimeout(function(){0!==P.get()&&p(e,t)},r)}function m(){D.reset(),c(0),k.show("Work canceled")}function w(e){var t=100/e.length;T.isInited()&&T.post({action:"remove"}),D.getCount()&&D.reset(),P.set(-1),C.hide("download"),u(),p([].concat(a(e)),t)}function y(e){var t=e.target.getAttribute("data-btn");"process"===t?j.processImages():"download"===t?T.post({action:"download"}):"cancel"===t&&m()}function I(e){var t=e.target.files;e.preventDefault(),t.length&&w(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.removeMasksAndLabel=n.resetDropbox=n.generateZip=n.beforeWork=n.onFiles=n.button=n.message=n.progress=n.worker=n.images=n.state=void 0;var x=e("./resizer.js"),j=r(x),b=e("./tools.js"),E=r(b),L=e("./cropper.js"),A=r(L),P=function(){function e(){return n}function t(e){n=e}var n=-1;return{get:e,set:t}}(),D=function(){function e(){return o}function t(){return o[0]}function n(){return o.length}function r(e){return o.splice(e,1)[0]}function a(e){o.push(e)}function i(){o.length=0}var o=[];return{add:a,remove:r,getCount:n,reset:i,getAll:e,getFirst:t}}(),T=function(){function e(){r||(r=new Worker("js/workers/worker1.js"),r.onmessage=function(e){var t=e.data;"download"===t.action?i(t.content):"notify"===t.action&&(P.set(-1),s(),k.show("Images are ready for downloading"),C.show("download"))},r.onerror=function(e){console.log(e)})}function t(e){r.postMessage(e)}function n(){return!!r}var r=void 0;return{init:e,post:t,isInited:n}}(),B=function(){function e(){i.classList.add("show")}function t(){i.classList.remove("show")}function n(e){o.textContent=e}function r(e){i.value+=e}function a(){i.classList.remove("show"),i.value=0}var i=document.getElementById("js-progress"),o=document.getElementById("js-progress-label");return{show:e,hide:t,setLabel:n,update:r,reset:a}}(),k=function(){function e(e){r&&clearTimeout(r),r=setTimeout(t,e)}function t(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];n.textContent=t,t&&e(2e3)}var n=document.getElementById("js-msg"),r=0;return{show:t}}(),C=function(){function e(e,t){document.getElementById("js-"+t).classList[e]("show")}function t(t){e("add",t)}function n(t){e("remove",t)}return{show:t,hide:n}}();document.getElementById("js-dropbox-btns").addEventListener("click",y,!1),document.getElementById("js-image-select").addEventListener("change",I,!1),n.state=P,n.images=D,n.worker=T,n.progress=B,n.message=k,n.button=C,n.onFiles=w,n.beforeWork=u,n.generateZip=h,n.resetDropbox=c,n.removeMasksAndLabel=s},{"./cropper.js":2,"./resizer.js":9,"./tools.js":10}],7:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=[].concat(r(document.querySelectorAll(".preload")));e.forEach(function(e){e.classList.remove("preload")}),window.removeEventListener("load",a,!1)}e("./dropbox.js"),e("./dropbox.drag.js"),e("./resizer.js"),e("./resizer.dashboard.js"),e("./tools.js"),window.addEventListener("load",a,!1),window.addEventListener("drop",function(e){e.preventDefault()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1)},{"./dropbox.drag.js":5,"./dropbox.js":6,"./resizer.dashboard.js":8,"./resizer.js":9,"./tools.js":10}],8:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t={dimensionInputValues:e,imageName:y.value||"",imageNameSeperator:I.value||"",imageQuality:x.value};localStorage.setItem("selections",JSON.stringify(t))}function o(e){return e.reduce(function(e,t){return e.push(t.width,t.height),e},[])}function s(){for(var e=w.children,t=[],n=0,r=e.length;r>n;n+=2){var a=e[n].value,i=e[n+1].value;(a||i)&&t.push({width:a,height:i})}return u(t)}function u(e){return e.length?(e=e.filter(function(e){return c(e.width,e.height)}),e.length||(m.message.show("No valid values"),m.button.show("process"))):(m.message.show("No dimensions specified"),m.button.show("process")),e}function c(e,t){var n=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/,r=n.test(e)&&!("same"===e&&(!t||"same"===t)),a=n.test(t)&&!("same"===t&&(!e||"same"===e));return r||a}function d(e,t){Array.prototype.forEach.call(e,function(e,n){e.value=t[n]})}function l(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function g(e){for(var t=document.createDocumentFragment(),n=0;e>n;n++)t.appendChild(l());return t}function f(e,t){var n=e.children.length;if(t>n){var r=t-n;e.appendChild(g(r))}}function h(e){m.message.show("Image quality set to: "+e.target.value+"%")}function v(e){var t=[].concat(a(w.children)),n=t.indexOf(e.target),r=n%2===0&&!t[n+2],i=n%2!==0&&!t[n+1];(r||i)&&w.appendChild(g(2))}Object.defineProperty(n,"__esModule",{value:!0}),n.getInputValues=n.saveToLocalStorage=void 0;var p=e("./dropbox.js"),m=r(p),w=document.getElementById("js-dimension-inputs"),y=document.getElementById("js-image-name"),I=document.getElementById("js-image-name-seperator"),x=document.getElementById("js-image-quality");!function(){var e=localStorage.getItem("selections");if(e){e=JSON.parse(e);var t=o(e.dimensionInputValues);f(w,t.length),d(w.children,t),y.value=e.imageName,I.value=e.imageNameSeperator,x.value=e.imageQuality}}(),x.addEventListener("input",h,!1),w.addEventListener("focus",v,!0),n.saveToLocalStorage=i,n.getInputValues=s},{"./dropbox.js":6}],9:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return"width"===e?"height":"width"}function i(e,t,n){var r=a(e),i="same"===t[e]?t[r]:t[e],o=n[e];return i.includes("%")?o*(Number.parseInt(i,10)/100):"original"===i||i===e?Number.parseInt(o,10):i===r?Number.parseInt(n[r],10):Number.parseInt(i,10)}function o(e,t){var n=t.width/t.height,r=0,a=0;return e.width&&(r=i("width",e,t),e.height?"same"===e.width&&(a=r):a=r/n),!a&&e.height&&(a=i("height",e,t),e.width?r||"same"!==e.height||(r=a):r=a*n),{width:r,height:a}}function s(e,t,n){var r=n.width,a=n.height,i=document.createElement("canvas"),o=document.getElementById("js-image-quality").value/100;return i.width=r,i.height=a,i.getContext("2d").drawImage(e,0,0,r,a),i.toDataURL(t,o)}function u(){0!==f.state.get()&&(f.button.hide("cancel"),f.progress.reset(),f.generateZip())}function c(e,t,n){var r={width:e.width,height:e.height},a=n.map(function(e){return o(e,r)});return f.progress.setLabel("Processing: "+t.name.original),function i(n){var r=a.splice(0,1)[0];if(f.progress.update(n),f.worker.post({action:"add",image:{name:t.name.setByUser,uri:s(e,t.type,r),type:t.type.slice(6)}}),p.decrement(),!p.get())return void setTimeout(u,1600);if(a.length){var o=t.size*r.width*r.height/2e3+120;setTimeout(function(){0!==f.state.get()&&i(n)},o)}}}function d(e,t){var n=e.length*t.length,r=100/n;return p.set(n),function a(){var n=new Image,i=e.splice(0,1)[0];if(n.onload=function(){if(0!==f.state.get()){var e=c(n,i,t);e(r)}},n.src=i.uri,e.length){var o=400*i.size+100;setTimeout(function(){0!==f.state.get()&&a()},o)}}}function l(){var e=v.getInputValues();if(e.length){var t=f.images.getAll(),n=d(t,e);f.worker.init(),f.beforeWork(),n(),v.saveToLocalStorage(e)}else f.resetDropbox()}Object.defineProperty(n,"__esModule",{value:!0}),n.processImages=void 0;var g=e("./dropbox.js"),f=r(g),h=e("./resizer.dashboard.js"),v=r(h),p=function(){function e(e){r=e}function t(){return r}function n(){r-=1}var r=0;return{set:e,get:t,decrement:n}}();n.processImages=l},{"./dropbox.js":6,"./resizer.dashboard.js":8}],10:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){return c}function i(e,t){var n=document.getElementById("js-"+e+"-settings");t.classList.toggle("active"),n&&n.classList.toggle("active")}function o(){var e=[].concat(r(document.querySelectorAll(".tool-selection-btn")));e.forEach(function(e){if(e.classList.contains("active")){var t=e.getAttribute("data-tool");i(t,e)}})}function s(e){var t=e.target,n=t.getAttribute("data-tool");n&&n!==c&&(c=n,o(),i(n,t),u.message.show(n+" enabled"))}Object.defineProperty(n,"__esModule",{value:!0}),n.getCurrentTool=void 0;var u=e("./dropbox.js"),c="resizer";document.getElementById("js-tools-btns").addEventListener("click",s,!1),n.getCurrentTool=a},{"./dropbox.js":6}]},{},[7]);