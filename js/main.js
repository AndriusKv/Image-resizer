!function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){document.getElementById("js-quality-value").textContent=e}function i(e){g=e!==l,h=e,r(e)}function a(){g=!1,c.value=.92,r(l)}function o(){return g?h:l}function s(){return g}function u(e){var t=Number.parseFloat(e.target.value);i(t),(0,d.changeCanvasQuality)(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.get=n.reset=n.useImageWithQuality=void 0;var d=e("./cropper.js"),c=document.getElementById("js-crop-quality"),l=.92,g=!1,h=l;c.addEventListener("input",u,!1),n.useImageWithQuality=s,n.reset=a,n.get=o},{"./cropper.js":2}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){e.disabled=t}function a(e){var t=document.getElementById("js-crop-ok"),n=document.getElementById("js-crop-preview-btn");i(t,e),i(n,e)}function o(e){var t=document.getElementById("js-crop-skip"),n=e>1;i(t,!n)}function s(e){var t=document.getElementById("js-crop-remaining"),n=pe.images.length-1;return"remove"===e?void(t.textContent=""):1===n?void(t.textContent=n+" image remaining"):void(t.textContent=n+" images remaining")}function u(e){document.getElementById("js-crop-image-name").textContent=e}function d(e,t,n){return e?We[n]>0?We[t]:We[t]+We[n]:0}function c(e,t){var n=Ue.getRatio("width"),r=Ue.getRatio("height");e=d(e,"x","width"),t=d(t,"y","height"),Le.value=Math.round(e*n),Be.value=Math.round(t*r)}function l(e,t){e=Math.round(e*Ue.getRatio("width")),t=Math.round(t*Ue.getRatio("height")),Me.value=0>e?-e:e,Ce.value=0>t?-t:t}function g(e){return e?void Ie.drawImage(e,0,0,je.width,je.height):ye.useImageWithQuality()?void Ie.drawImage(Re.withQuality,0,0,je.width,je.height):void Ie.drawImage(Re.original,0,0,je.width,je.height)}function h(){var e=new Image,t=void 0;return e.addEventListener("load",function(){t=Ie.createPattern(e,"repeat")}),e.src="images/pattern.png",function(){Ie.fillStyle=t,Ie.save(),Ie.setTransform(1,0,0,1,0,0),Ie.fillRect(0,0,je.width,je.height),m(),Ie.restore()}}function m(){Ie.fillStyle="rgba(0, 0, 0, .4)",Ie.fillRect(0,0,je.width,je.height)}function v(e){Ie.strokeStyle="#006494",Ie.strokeRect(e.x,e.y,e.width,e.height)}function f(e){var t=e.width&&e.height;if(t){var n=e.x,r=e.y,i=Ie.getImageData(n,r,e.width,e.height);e.width<0&&(n+=e.width),e.height<0&&(r+=e.height),(n||r)&&m(),Ie.putImageData(i,n,r),v(e)}}function p(){var e=ye.useImageWithQuality()?Re.withQuality:Re.original;Qe(),g(e),Ie.save(),Ie.setTransform(1,0,0,1,0,0),_e?z(We,_e):f(We),Ie.restore(),Ve.draw(e)}function w(e){Re.original.addEventListener("load",function(){var e=Re.original.width,t=Re.original.height,r=e/t,i=window.innerWidth-212,a=window.innerHeight-40,o=e,s=t;(0,ve.toggleElement)("add",Ee),o>i&&(o=i,s=o/r),s>a&&(s=a,o=s*r),je.width=o,je.height=s,Ie.drawImage(Re.original,0,0,je.width,je.height),n.changeCanvasQuality=qe=re(),Ue.setRatio("width",e/je.width),Ue.setRatio("height",t/je.height),je.classList.add("show")}),Re.original.src=e}function y(){return{x:Number.parseInt(Le.value,10),y:Number.parseInt(Be.value,10),width:Number.parseInt(Me.value,10),height:Number.parseInt(Ce.value,10)}}function E(e,t,n){var r=Fe.getTransform(),i=r.e*Ue.getRatio("width"),a=r.f*Ue.getRatio("height");return n.save(),n.translate(i,a),n.scale(r.a,r.a),n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x,t.y,t.width,t.height)}function j(e,t,n){var r=Fe.getTransform(),i=r.e*Ue.getRatio("width"),a=r.f*Ue.getRatio("height"),o=t.x+t.width/2,s=t.y+t.height/2;return n.save(),n.translate(o,s),n.rotate(-_e),n.translate(-o,-s),n.translate(i,a),n.scale(r.a,r.a),n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x,t.y,t.width,t.height)}function I(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=e.width,n.height=e.height;var i=_e?j(e,t,r):E(e,t,r);return n.width=i.width,n.height=i.height,r.putImageData(i,0,0),n}function b(e){var t=new Image;t.addEventListener("load",function(){var n=y(),r=I(t,n);pe.worker.postMessage({action:"add",image:{name:e.name.setByUser,type:e.type.slice(6),uri:r.toDataURL(e.type,ye.get())}}),pe.images.length?(ye.reset(),J()):(Y(),pe.generateZip(),je.removeEventListener("mousedown",C,!1))}),t.src=e.uri}function x(e){var t=je.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function k(e,t){var n=4,r=We.x,i=We.y,a=r+We.width,o=i+We.height,s=e>=r-n&&a+n>=e||r+n>=e&&e>=a-n,u=t>=i-n&&o+n>=t||i+n>=t&&t>=o-n,d=t>=i-n&&i+n>=t,c=e>=a-n&&a+n>=e,l=t>=o-n&&o+n>=t,g=e>=r-n&&r+n>=e;if(d){if(g)return"nw";if(c)return"ne";if(s)return"n"}if(l){if(c)return"se";if(g)return"sw";if(s)return"s"}if(u){if(c)return"e";if(g)return"w"}return""}function L(e,t,n){var r=e.x,i=e.y,a=r+e.width,o=i+e.height,s=t>=r&&a>=t||r>=t&&t>=a,u=n>=i&&o>=n||i>=n&&n>=o;return s&&u}function B(e){var t=x(e),n=t.x,r=t.y,i=We,a={},o="";switch(Ne){case"nw":a.x=n,a.y=r,a.width=i.x-n+i.width,a.height=i.y-r+i.height,o=q("nw","ne");break;case"ne":a.y=r,a.height=i.y-r+i.height,a.width=n-i.x,o=q("ne","nw");break;case"se":a.width=n-i.x,a.height=r-i.y,o=q("se","sw");break;case"sw":a.x=n,a.width=i.x-n+i.width,a.height=r-i.y,o=q("sw","se");break;case"n":a.y=r,a.height=i.y-r+i.height;break;case"e":a.width=n-i.x;break;case"s":a.height=r-i.y;break;case"w":a.x=n,a.width=i.x-n+i.width}o&&(je.style.cursor=o+"-resize"),Object.assign(We,a),requestAnimationFrame(p),c(We.x,We.y),l(We.width,We.height)}function M(e,t){var n=e-We.x,r=t-We.y;return function(e){if(e.ctrlKey){var t=x(e),i=t.x,a=t.y;We.x=i-n,We.y=a-r,c(We.x,We.y),requestAnimationFrame(p)}}}function C(e){if(1===e.which){var t=x(e),n=t.x,r=t.y,i=We,a=i.width&&i.height;if(Ne=k(n,r),requestAnimationFrame(p),je.removeEventListener("mousemove",S,!1),document.removeEventListener("keydown",T,!1),e.shiftKey)Oe=Fe.getTransformedPoint(n,r),Ee.addEventListener("mousemove",Q,!1),Ee.addEventListener("mouseup",G,!1);else if(e.ctrlKey&&a){var o=_e?N:L;if(o(i,n,r))return ze=M(n,r),Ee.addEventListener("mousemove",ze,!1),void Ee.addEventListener("mouseup",V,!1);Ee.addEventListener("mousemove",F,!1),Ee.addEventListener("mouseup",$,!1)}else Ne&&a&&!_e?(Ee.addEventListener("mousemove",B,!1),Ee.addEventListener("mouseup",U,!1)):(J(),_e=0,We.x=n,We.y=r,We.width=0,We.height=0,Ee.addEventListener("mousemove",A,!1),Ee.addEventListener("mouseup",K,!1))}}function A(e){var t=x(e),n=t.x,r=t.y;We.width=n-We.x,We.height=r-We.y,requestAnimationFrame(p),c(n,r),l(We.width,We.height)}function P(){je.style.cursor="default",document.removeEventListener("keyup",P,!1)}function T(e){var t=_e?N:L,n=We,r=De.x,i=De.y;e.ctrlKey&&t(n,r,i)&&(je.style.cursor="move"),document.addEventListener("keyup",P,!1)}function D(){var e=Ue.getRatio("width"),t=Ue.getRatio("height");We.x=Le.value/e,We.y=Be.value/t,We.width=Me.value/e,We.height=Ce.value/t}function R(e,t){var n=We.width&&We.height;Ee.removeEventListener("mousemove",e,!1),Ee.removeEventListener("mouseup",t,!1),n?(je.addEventListener("mousemove",S,!1),document.addEventListener("keydown",T,!1)):(Qe(),g(),je.style.cursor="default"),a(!n)}function q(e,t){var n=We.x,r=We.y,i=n+We.width,a=r+We.height;if(i>n){if(r>a)return t}else if(a>r)return t;return e}function W(e,t){var n=k(e,t);switch(n){case"nw":n=q("nw","ne");break;case"ne":n=q("ne","nw");break;case"sw":n=q("sw","se");break;case"se":n=q("se","sw")}je.style.cursor=n?n+"-resize":"default"}function N(e,t,n){var r=t-(e.x+e.width/2),i=n-(e.y+e.height/2),a=r*Math.cos(-_e)-i*Math.sin(-_e),o=r*Math.sin(-_e)+i*Math.cos(-_e),s={x:-e.width/2,y:-e.height/2,width:e.width,height:e.height};return L(s,a,o)}function S(e){var t=x(e),n=t.x,r=t.y,i=We;if(De.x=n,De.y=r,e.ctrlKey){var a=_e?N:L;return a(i,n,r)?void(je.style.cursor="move"):void(je.style.cursor="default")}_e||W(n,r)}function _(e){var t=x(e),n=t.x,r=t.y,i=We,a=i.x+i.width/2,o=i.y+i.height/2;return Math.atan2(o-r,a-n)}function O(e){var t=Math.round(180*e/Math.PI);return 0>t&&(t+=360),t}function z(e,t){var n=e.width>0?e.width:-e.width,r=e.height>0?e.height:-e.height;Ie.save(),Ie.translate(e.x+e.width/2,e.y+e.height/2),Ie.rotate(t),Ie.strokeStyle="#006494",Ie.strokeRect(-e.width/2,-e.height/2,e.width,e.height),Ie.beginPath(),Ie.rect(-n/2,-r/2,n,r),Ie.restore(),Ie.rect(je.width,0,-je.width,je.height),Ie.fillStyle="rgba(0, 0, 0, .4)",Ie.fill()}function F(e){var t=0;_e=_(e),t=O(_e),Ae.value=t,(0===t||360===t)&&(_e=0),requestAnimationFrame(p)}function Q(e){if(Oe){var t=x(e),n=t.x,r=t.y,i=Fe.getTransformedPoint(n,r);Fe.translate(i.x-Oe.x,i.y-Oe.y),requestAnimationFrame(p)}}function U(){R(B,U)}function V(){R(ze,V)}function K(){R(A,K)}function $(){R(F,$)}function G(){Oe=null,R(Q,G)}function H(){var e=pe.images[0];pe.initWorker(),Fe=le(Ie),Qe=h(),u(e.name.original),w(e.uri),a(!0),o(pe.images.length),je.addEventListener("mousedown",C,!1),pe.images.length>1&&s()}function Z(e){je.classList.remove("show"),o(pe.images.length),a(!0),pe.images.length&&(s(),u(e.name.original),setTimeout(function(){w(e.uri)},200))}function J(){We={},Ae.value=0,Ve.clean(),c(0,0),l(0,0)}function Y(){Pe.value=100,ye.reset(),J(),s("remove"),(0,ve.toggleElement)("remove",Ee)}function X(){var e=pe.images.splice(0,1)[0];b(e),Z(pe.images[0])}function ee(){pe.images.splice(0,1),ye.reset(),J(),Z(pe.images[0])}function te(){return Se?(Se=!1,(0,ve.toggleElement)("remove",xe),void setTimeout(function(){xe.removeChild(xe.children[0])},600)):(Y(),void pe.worker.postMessage({action:"generate"}))}function ne(){var e=y(),t=I(Re.original,e),n=new Image;Se=!0,n.classList.add("crop-preview-image"),n.addEventListener("load",function(){var e=t.width,r=t.height,i=window.innerWidth-8,a=window.innerHeight-40,o=e/r;e>i&&(e=i,r=Math.floor(e/o)),r>a&&(r=a,e=Math.floor(r*o)),n.style.width=e+"px",n.style.height=r+"px",xe.appendChild(n),(0,ve.toggleElement)("add",xe)}),n.src=t.toDataURL("image/jpeg",ye.get())}function re(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=Re.original,r=!1;return e.width=n.width,e.height=n.height,t.drawImage(n,0,0,e.width,e.height),Re.withQuality.addEventListener("load",function(){requestAnimationFrame(function(){p(),r=!1})}),function(t){r||(r=!0,Re.withQuality.src=e.toDataURL("image/jpeg",t))}}function ie(e,t){var n=e.selectionStart,r=e.selectionEnd,i=e.value;return i=n===r?i.slice(0,n)+t+i.slice(n,i.length):i.slice(0,n)+t+i.slice(r,i.length),Number.parseInt(i,10)}function ae(){var e=We.width&&We.height;e&&requestAnimationFrame(p),a(!e)}function oe(e){if(e.key)return e.key;var t=e.keyCode||e.which;return t?8===t||13===t?t:String.fromCharCode(t):void 0}function se(e){return e>180&&(e-=360),e*Math.PI/180}function ue(e){var t=e.target,n=oe(e),r=t.getAttribute("data-input"),i="Backspace"===n||8===n,a="Enter"===n||13===n;if(r&&/\d|-/.test(n)){var o="-"===n||45===n;if(o&&"x"!==r&&"y"!==r)return void e.preventDefault();var s=ie(t,n);if("scale"===r)return ge(je.width/2,je.height/2,s),void requestAnimationFrame(p);if("angle"===r)_e=se(s);else{var u=Ue.getRatio(r);We[r]=s/u||0}return void ae()}i||a||e.preventDefault()}function de(e){var t=oe(e),n="Backspace"===t||8===t,r="Enter"===t||13===t;if(n||r){var i=e.target,a=i.getAttribute("data-input");if("scale"===a)return ge(je.width/2,je.height/2,i.value),void requestAnimationFrame(p);"angle"===a?_e=se(i.value):D(),ae()}}function ce(e){var t=e.target.getAttribute("data-btn");switch(t){case"crop":X();break;case"preview":ne();break;case"skip":ee()}}function le(e){function t(){return s}function n(t){s.a=1,s.d=1,s=s.scale(t,t),e.setTransform(s.a,0,0,s.a,s.e,s.f)}function r(t,n){s=s.translate(t,n),e.translate(t,n)}function i(e,t){var n=o.createSVGPoint();return n.x=e,n.y=t,n.matrixTransform(s.inverse())}function a(){s.a=1,s.b=0,s.c=0,s.d=1,s.e=0,s.f=0,e.resetTransform()}var o=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=o.createSVGMatrix();return{getTransform:t,scale:n,translate:r,getTransformedPoint:i,resetTransform:a}}function ge(e,t,n){Fe.translate(e,t),Fe.scale(n/100),Fe.translate(-e,-t)}function he(e){var t=x(e),n=t.x,r=t.y,i=Fe.getTransformedPoint(n,r),a=Pe.value;e.deltaY>0?a*=.8:a/=.8,ge(i.x,i.y,a),requestAnimationFrame(p),Pe.value=Math.round(a)}function me(){_e=0,Pe.value=100,Fe.resetTransform(),ye.reset(),J(),g()}Object.defineProperty(n,"__esModule",{value:!0}),n.changeCanvasQuality=n.init=void 0;var ve=e("./main.js"),fe=e("./process.js"),pe=r(fe),we=e("./cropper-quality.js"),ye=r(we),Ee=document.getElementById("js-crop"),je=document.getElementById("js-canvas"),Ie=je.getContext("2d"),be=document.getElementById("js-crop-close"),xe=document.getElementById("js-crop-preview"),ke=document.getElementById("js-crop-reset"),Le=document.getElementById("js-crop-x"),Be=document.getElementById("js-crop-y"),Me=document.getElementById("js-crop-width"),Ce=document.getElementById("js-crop-height"),Ae=document.getElementById("js-crop-angle"),Pe=document.getElementById("js-crop-scale"),Te=document.getElementById("js-crop-data"),De={},Re={original:new Image,withQuality:new Image},qe=null,We={},Ne="",Se=!1,_e=0,Oe=null,ze=void 0,Fe=void 0,Qe=void 0,Ue=function(){function e(e){return"x"===e?e="width":"y"===e&&(e="height"),n[e]}function t(e,t){n[e]=t}var n={};return{getRatio:e,setRatio:t}}(),Ve=function(){function e(){r.clearRect(0,0,i,a)}function t(t){var n=y();!o&&n.width&&n.height&&(o=!0,requestAnimationFrame(function(){var s=I(t,n),u=s.width,d=s.height,c=u/d;u>i&&(u=i,d=u/c),d>a&&(d=a,u=d*c),e(),r.drawImage(s,(i-u)/2,(a-d)/2,u,d),o=!1}))}var n=document.getElementById("js-sidebar-preview"),r=n.getContext("2d"),i=192,a=150,o=!1;return n.width=i,n.height=a,{clean:e,draw:t}}();be.addEventListener("click",te,!1),Te.addEventListener("keypress",ue,!1),Te.addEventListener("keyup",de,!1),document.getElementById("js-crop-data-btns").addEventListener("click",ce,!1),je.addEventListener("wheel",he,!1),ke.addEventListener("click",me,!1),n.init=H,n.changeCanvasQuality=qe},{"./cropper-quality.js":1,"./main.js":4,"./process.js":5}],3:[function(e,t,n){"use strict";function r(e){y&&clearTimeout(y),y=setTimeout(function(){i()},e)}function i(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];requestAnimationFrame(function(){document.getElementById("js-msg").innerHTML=e}),e&&r(2e3)}function a(e){requestAnimationFrame(function(){document.getElementById("js-progress-label").textContent=e})}function o(e){h.value+=e}function s(){h.value=0}function u(){return 100===Math.round(h.value)}function d(){a(""),(0,g.toggleMasks)("remove")}function c(){(0,g.toggleMasks)("add"),n.isWorking=w=!0,(0,g.toggleElement)("add",h),(0,g.toggleElement)("remove",m),(0,g.toggleElement)("add",f)}function l(){n.isWorking=w=!1,(0,g.toggleElement)("remove",h),(0,g.toggleElement)("remove",f),s(),d()}Object.defineProperty(n,"__esModule",{value:!0}),n.removeMasksAndLabel=n.setProgressLabel=n.updateProgress=n.resetProgress=n.resetDropbox=n.showMessage=n.downloadBtn=n.progressBar=n.processBtn=n.isCanceled=n.beforeWork=n.isWorking=n.cancelBtn=n.isDone=void 0;var g=e("./main.js"),h=document.getElementById("js-progress"),m=document.getElementById("js-process"),v=document.getElementById("js-download"),f=document.getElementById("js-cancel"),p=!1,w=!1,y=0;n.isDone=u,n.cancelBtn=f,n.isWorking=w,n.beforeWork=c,n.isCanceled=p,n.processBtn=m,n.progressBar=h,n.downloadBtn=v,n.showMessage=i,n.resetDropbox=l,n.resetProgress=s,n.updateProgress=o,n.setProgressLabel=a,n.removeMasksAndLabel=d},{"./main.js":4}],4:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){t.classList[e](n)}function a(e,t){i(e,t,"show")}function o(e){i(e,document.getElementById("js-dropbox-label"),"mask"),i(e,document.getElementById("js-mask"),"show")}function s(){var e=[].concat(r(document.querySelectorAll(".preload")));e.forEach(function(e){e.classList.remove("preload")}),window.removeEventListener("load",s,!1)}Object.defineProperty(n,"__esModule",{value:!0}),n.toggleElement=n.changeClass=n.toggleMasks=void 0,e("./dropbox.js"),e("./tools.js"),e("./resizer-settings.js"),e("./read.js"),e("./process.js"),window.addEventListener("load",s,!1),window.addEventListener("drop",function(e){e.preventDefault()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1),n.toggleMasks=o,n.changeClass=i,n.toggleElement=a},{"./dropbox.js":3,"./process.js":5,"./read.js":6,"./resizer-settings.js":7,"./tools.js":8}],5:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){j.showMessage(e),(0,x.toggleElement)("add",t)}function a(){L||(n.worker=L=new Worker("js/workers/worker1.js"),L.onmessage=function(e){n.zip=B=e.data,j.isWorking=!1,j.removeMasksAndLabel(),i("Images are ready for downloading.",j.downloadBtn),L.postMessage({action:"remove"})},L.onerror=function(e){console.log(e)})}function o(e){try{saveAs(e,"images.zip")}catch(t){var n=document.createElement("script");n.setAttribute("src","js/libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(e,"images.zip")}}}function s(e){return"width"===e?"height":"width"}function u(e,t,n){var r=s(e),i="same"===t[e]?t[r]:t[e],a=n[e];return i.includes("%")?a*(Number.parseInt(i,10)/100):"original"===i||i===e?Number.parseInt(a,10):i===r?Number.parseInt(n[r],10):Number.parseInt(i,10)}function d(e,t){var n=t.width/t.height,r=0,i=0;return e.width&&(r=u("width",e,t),e.height?"same"===e.width&&(i=r):i=r/n),!i&&e.height&&(i=u("height",e,t),e.width?r||"same"!==e.height||(r=i):r=i*n),{width:r,height:i}}function c(e,t,n){var r=n.width,i=n.height,a=document.createElement("canvas"),o=document.getElementById("js-image-quality").value/100;return a.width=r,a.height=i,a.getContext("2d").drawImage(e,0,0,r,i),a.toDataURL(t,o)}function l(){j.setProgressLabel("Generating Archive"),L.postMessage({action:"generate"})}function g(){setTimeout(function(){j.isCanceled||((0,x.toggleElement)("remove",j.progressBar),(0,x.toggleElement)("remove",j.cancelBtn),j.resetProgress(),l())},1e3)}function h(e,t){return function n(r,i){var a=r.splice(0,1)[0];if(j.updateProgress(i),L.postMessage({action:"add",image:{name:t.name.setByUser,uri:c(e,t.type,a),type:t.type.slice(6)}}),j.isDone()&&g(),r.length){var o=t.size*a.width*a.height/2e3+100;setTimeout(function(){j.isCanceled||n(r,i)},o)}}}function m(e,t){var n=100/(e.length*t.length);return function r(){var i=new Image,a=e.splice(0,1)[0];if(i.onload=function(){if(!j.isCanceled){var e=h(i,a),r={width:i.width,height:i.height},o=t.map(function(e){return d(e,r)});j.setProgressLabel("Processing: "+a.name.original),e(o,n)}},i.src=a.uri,e.length){var o=400*a.size+100;setTimeout(function(){j.isCanceled||r()},o)}}}function v(e){return e.length?(e=e.filter(function(e){return b.verifyValues(e.width,e.height)}),e.length||i("No valid values",j.processBtn)):i("No dimensions specified",j.processBtn),e}function f(e){for(var t=[],n=0,r=e.length;r>n;n+=2){var i=e[n].value,a=e[n+1].value;(i||a)&&t.push({width:i,height:a})}return t}function p(){var e=f(b.dimensionInputContainer.children);if(e=v(e),!e.length)return void j.resetDropbox();var t=m(k,e);a(),j.beforeWork(),t(),b.saveToLocalStorage(e)}function w(){o(B)}function y(){j.isCanceled=!0,n.zip=B=null,k.length=0,j.resetDropbox(),j.showMessage("Work canceled")}Object.defineProperty(n,"__esModule",{value:!0}),n.getInputValues=n.generateZip=n.initWorker=n.processImages=n.worker=n.images=n.zip=void 0;var E=e("./dropbox.js"),j=r(E),I=e("./resizer-settings.js"),b=r(I),x=e("./main.js"),k=[],L=void 0,B=void 0;j.processBtn.addEventListener("click",p,!1),j.downloadBtn.addEventListener("click",w,!1),j.cancelBtn.addEventListener("click",y,!1),n.zip=B,n.images=k,n.worker=L,n.processImages=p,n.initWorker=a,n.generateZip=l,n.getInputValues=f},{"./dropbox.js":3,"./main.js":4,"./resizer-settings.js":7}],6:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(){setTimeout(function(){return w.isCanceled?void 0:E.images.length?void(I.cropperEnabled?(w.resetDropbox(),x.init()):(w.resetProgress(),E.processImages())):(w.resetDropbox(),void w.showMessage("No images to process."))},1200)}function a(e){return e.includes("image")}function o(e){return e.slice(0,e.lastIndexOf("."))}function s(e){var t=document.getElementById("js-image-name").value||o(e),n=document.getElementById("js-image-name-seperator").value||"-";return t+n}function u(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(t){E.images.push({name:{original:e.name,setByUser:s(e.name)},type:e.type,size:e.size/1e6,uri:t.target.result})}}function d(e,t){var n=e[0];if(w.setProgressLabel("Reading: "+n.name),e=Array.prototype.slice.call(e,1),a(n.type)&&u(n),w.updateProgress(t),e.length||i(),e.length){var r=n.size/1e6*100+100;setTimeout(function(){w.isCanceled||d(e,t)},r)}}function c(e){var t=100/e.length;E.worker&&E.worker.postMessage({action:"remove"}),E.images.length&&(E.images.length=0),E.zip=null,w.isCanceled=!1,(0,f.toggleElement)("remove",w.downloadBtn),w.beforeWork(),d(e,t)}function l(e){var t=e.target.files;e.preventDefault(),t.length&&c(t)}function g(e){return L=0,(0,f.changeClass)("remove",k,"over"),e.stopPropagation(),e.preventDefault(),w.isWorking?void(e.dataTransfer.dropEffect="none"):(e.dataTransfer.dropEffect="copy",void c(e.dataTransfer.files))}function h(e){e.stopPropagation(),e.preventDefault()}function m(e){e.preventDefault(),w.isWorking||(L+=1,(0,f.changeClass)("add",k,"over"))}function v(){w.isWorking||(L-=1,L||(0,f.changeClass)("remove",k,"over"))}var f=e("./main.js"),p=e("./dropbox.js"),w=r(p),y=e("./process.js"),E=r(y),j=e("./tools.js"),I=r(j),b=e("./cropper.js"),x=r(b),k=document.getElementById("js-dropbox"),L=0;document.getElementById("js-image-select").addEventListener("change",l,!1),k.addEventListener("dragover",h,!1),k.addEventListener("dragenter",m,!1),k.addEventListener("dragleave",v,!1),k.addEventListener("drop",g,!1),k.addEventListener("click",function(e){w.isWorking&&e.preventDefault()})},{"./cropper.js":2,"./dropbox.js":3,"./main.js":4,"./process.js":5,"./tools.js":8}],7:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){var t={dimensionInputValues:e,imageName:v.value||"",imageNameSeperator:f.value||"",imageQuality:p.value};localStorage.setItem("settings",JSON.stringify(t))}function a(e){return e.reduce(function(e,t){return e.push(t.width,t.height),e},[])}function o(e,t){var n=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/,r=n.test(e)&&!("same"===e&&(!t||"same"===t)),i=n.test(t)&&!("same"===t&&(!e||"same"===e));return r||i}function s(e,t){Array.prototype.forEach.call(e,function(e,n){e.value=t[n]})}function u(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("image-input"),e}function d(e){for(var t=document.createDocumentFragment(),n=0;e>n;n++)t.appendChild(u());return t}function c(e,t){var n=e.children.length;if(t>n){var r=t-n;e.appendChild(d(r))}}function l(e){(0,h.showMessage)("Image quality set to: "+e.target.value+"%")}function g(e){var t=[].concat(r(m.children)),n=t.indexOf(e.target),i=n%2===0&&!t[n+2],a=n%2!==0&&!t[n+1];(i||a)&&m.appendChild(d(2))}Object.defineProperty(n,"__esModule",{value:!0}),n.verifyValues=n.saveToLocalStorage=n.dimensionInputContainer=void 0;var h=e("./dropbox.js"),m=document.getElementById("js-dimension-inputs"),v=document.getElementById("js-image-name"),f=document.getElementById("js-image-name-seperator"),p=document.getElementById("js-image-quality");!function(){var e=localStorage.getItem("settings");if(e){e=JSON.parse(e);var t=a(e.dimensionInputValues);c(m,t.length),s(m.children,t),v.value=e.imageName,f.value=e.imageNameSeperator,p.value=e.imageQuality}}(),p.addEventListener("input",l,!1),m.addEventListener("focus",g,!0),n.dimensionInputContainer=m,n.saveToLocalStorage=i,n.verifyValues=o},{"./dropbox.js":3}],8:[function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=[].concat(r(document.querySelectorAll(".tool-selection-btn")));e.forEach(function(e){if(e.classList.contains("active")){var t=document.getElementById("js-"+e.getAttribute("data-tool")+"-settings");(0,s.changeClass)("remove",e,"active"),t&&(0,s.changeClass)("remove",t,"active")}})}function a(e,t){var n=document.getElementById("js-"+t+"-settings");(0,s.changeClass)("add",e,"active"),n&&(0,s.changeClass)("add",n,"active")}function o(e){var t=e.target,r=t.getAttribute("data-tool");r&&r!==c&&(c=r,i(),a(t,r),(0,u.showMessage)(r+" enabled"),n.cropperEnabled=d="cropper"===r)}Object.defineProperty(n,"__esModule",{value:!0}),n.cropperEnabled=void 0;var s=e("./main.js"),u=e("./dropbox.js"),d=!1,c="resizer";document.getElementById("js-tools-btns").addEventListener("click",o,!1),n.cropperEnabled=d},{"./dropbox.js":3,"./main.js":4}]},{},[4]);