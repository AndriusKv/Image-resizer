!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=30)}([function(t,n,e){"use strict";function i(t,n,e,i,r){if(e.save(),i){var o=n.x+n.width/2,u=n.y+n.height/2;e.translate(o,u),e.rotate(-i),e.translate(-o,-u)}return e.drawImage(t,0,0,t.width,t.height),e.restore(),e.getImageData(n.x+r.x,n.y+r.y,n.width,n.height)}function r(t,n){var e=document.createElement("canvas"),r=e.getContext("2d"),o=m.a();e.width=t.width+2*o.x,e.height=t.height+2*o.y,r.translate(o.x,o.y);var u=i(t,n,r,k.a(),o);return e.width=u.width,e.height=u.height,r.putImageData(u,0,0),e}function o(t,n){var e=m.b(t.x,t.y),i=e.x,r=e.y,o=m.b(t.x+t.width,t.y+t.height),u=o.x-i,a=o.y-r,c=B.c({x:i,y:r,width:u,height:a});n&&(c.x=0,c.y=0),I.a(c)}function u(t){y[t+"EventListener"]("wheel",h,{passive:!0}),y[t+"EventListener"]("mousedown",s),y[t+"EventListener"]("mousemove",g),y[t+"EventListener"]("mouseleave",x.b)}function a(t){L.c(t),y.resetDimensions(),b.b(t),E.b(),u("add"),D.show()}function c(){var t=p.a.get(A.a()),n=k.a(),e=B.d(),i=B.e();p.b(t,e,n,i)}function d(t){w.a(t.name.original),x.a("crop"),p.c(t.uri,M.a).then(function(){var t=m.a();B.a(t.x,t.y)})}function s(t){if(1===t.which){var n=y.getMousePosition(t),e=n.x,i=n.y,r=B.d(),o=r.width&&r.height,u=k.a(),a=C.a(e,i,r),d="select";if(t.shiftKey)P.set(m.b(e,i)),d="drag";else if(t.ctrlKey&&o)B.f(r,e,i,u)?(P.set({x:e-r.x,y:i-r.y}),d="move"):d="rotate";else if(a&&o&&!u)d="resize";else{f(),B.g("x",e),B.g("y",i);var s=m.b(e,i);I.a({x:s.x,y:s.y,width:0,height:0})}j.b(d),requestAnimationFrame(c)}}function f(){B.h(),k.b(),I.b("angle",0)}function l(){A.b(),I.b("scale",100),I.b("quality",.92),I.b("quality-display",.92),f(),o(B.d(),!0)}function h(t){var n=y.getMousePosition(t),e=n.x,i=n.y,r=m.b(e,i),o=parseInt(I.c("scale"),10)||100,u=t.deltaY>0?.8:1.25,a=M.b(Math.floor(o*u));M.c(r.x,r.y,a)}function g(t){var n=y.getMousePosition(t),e=n.x,i=n.y,r=m.b(e,i),o=Math.floor(r.x),u=Math.floor(r.y);x.c(o+", "+u)}function v(t){l(),B.b(!1),y.hide(),setTimeout(function(){d(t)},240)}e.d(n,"i",function(){return a}),e.d(n,"f",function(){return c}),e.d(n,"b",function(){return D}),e.d(n,"h",function(){return P}),e.d(n,"g",function(){return o}),e.d(n,"e",function(){return r}),e.d(n,"a",function(){return l}),e.d(n,"d",function(){return v}),e.d(n,"c",function(){return u});var m=e(2),y=e(1),p=e(5),w=e(25),b=e(15),x=e(4),E=e(22),L=e(14),I=e(6),j=e(20),B=e(3),C=e(21),k=e(12),A=e(7),M=e(17),D=function(){function t(){e.classList.add("visible")}function n(){e.classList.remove("visible")}var e=document.getElementById("js-crop");return{show:t,hide:n}}(),P=function(){function t(t){e=t}function n(){return e}var e=null;return{set:t,get:n}}()},function(t,n,e){"use strict";function i(){return l.getContext("2d")}function r(){return{width:l.width,height:l.height}}function o(){l.width=window.innerWidth,l.height=window.innerHeight-58}function u(t,n){l.addEventListener(t,n)}function a(t,n){l.removeEventListener(t,n)}function c(){l.classList.add("visible")}function d(){l.classList.remove("visible")}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l.style.cursor=t}function f(t){var n=t.clientX,e=t.clientY,i=l.getBoundingClientRect();return{x:n-i.left,y:e-i.top}}Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"getDimensions",function(){return r}),e.d(n,"resetDimensions",function(){return o}),e.d(n,"show",function(){return c}),e.d(n,"hide",function(){return d}),e.d(n,"getContext",function(){return i}),e.d(n,"addEventListener",function(){return u}),e.d(n,"removeEventListener",function(){return a}),e.d(n,"setCursor",function(){return s}),e.d(n,"getMousePosition",function(){return f});var l=document.getElementById("js-canvas")},function(t,n,e){"use strict";function i(){return g}function r(t,n){g.a=1,g.d=1,g=g.scale(n,n),t.setTransform(g.a,0,0,g.a,g.e,g.f)}function o(t,n,e){g=g.translate(n,e),t.translate(n,e)}function u(t){o(t,h.x,h.y)}function a(t,n){var e=l.createSVGPoint();return e.x=t,e.y=n,e.matrixTransform(g.inverse())}function c(t,n,e,i,r,o,u){g.a=n,g.b=e,g.c=i,g.d=r,g.e=o,g.f=u,t.setTransform(n,e,i,r,o,u)}function d(t){c(t,1,0,0,1,0,0),u(t)}function s(t,n){return h.x=t,h.y=n,h}function f(){return h}e.d(n,"c",function(){return i}),e.d(n,"h",function(){return c}),e.d(n,"g",function(){return d}),e.d(n,"f",function(){return s}),e.d(n,"a",function(){return f}),e.d(n,"e",function(){return r}),e.d(n,"d",function(){return o}),e.d(n,"b",function(){return a});var l=document.createElementNS("http://www.w3.org/2000/svg","svg"),h={},g=l.createSVGMatrix()},function(t,n,e){"use strict";function i(){return v}function r(){return m}function o(t){return Object.assign(m,t),m}function u(t,n){return v[t]=n,n}function a(t,n){u("x",t),u("y",n)}function c(){return v.x=0,v.y=0,v.width=0,v.height=0,Object.assign(m,v),v}function d(t,n,e){var i=t.x,r=t.y,o=i+t.width,u=r+t.height,a=n>=i&&n<=o||n<=i&&n>=o,c=e>=r&&e<=u||e<=r&&e>=u;return a&&c}function s(t,n,e,i){var r=n-(t.x+t.width/2),o=e-(t.y+t.height/2),u=Math.sin(-i),a=Math.cos(-i),c=r*a-o*u,s=r*u+o*a;return d({x:-t.width/2,y:-t.height/2,width:t.width,height:t.height},c,s)}function f(t,n,e,i){return i?s(t,n,e,i):d(t,n,e)}function l(t,n,e){var i=e.a,r=0;m[t]=n||0,"x"===t?(r=e.e,v.width<0&&(v.width=-v.width)):"y"===t?(r=e.f,v.height<0&&(v.height=-v.height)):"width"===t?v[t]<0&&(v.x=v.x+v[t]):"height"===t&&v[t]<0&&(v.y=v.y+v[t]),v[t]=r+m[t]*i}function h(t){return y=t,t}function g(){return y}e.d(n,"d",function(){return i}),e.d(n,"i",function(){return r}),e.d(n,"c",function(){return o}),e.d(n,"g",function(){return u}),e.d(n,"h",function(){return c}),e.d(n,"f",function(){return f}),e.d(n,"j",function(){return l}),e.d(n,"a",function(){return a}),e.d(n,"b",function(){return h}),e.d(n,"e",function(){return g});var v={x:0,y:0,width:0,height:0},m=Object.assign({},v),y=!1},function(t,n,e){"use strict";function i(t){document.getElementById("js-crop-mouse-pos").textContent=t}function r(){i("")}function o(t){for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];e.forEach(function(n){document.getElementById("js-cropper-"+n).disabled=t})}function u(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];o.apply(void 0,[!0].concat(n))}function a(t){return new Promise(function(n){var e=new Image;e.onload=function(){var i=f.i(),r=d.e(e,i);n({name:t.name.setByUser,type:t.type.slice(6),uri:r.toDataURL(t.type,l.c())})},e.src=t.uri})}function c(){a(s.d()).then(g.c).then(h.a)}e.d(n,"c",function(){return i}),e.d(n,"b",function(){return r}),e.d(n,"d",function(){return o}),e.d(n,"a",function(){return u});var d=e(0),s=e(14),f=e(3),l=e(7),h=e(16),g=e(13);document.getElementById("js-crop-bottom-btns").addEventListener("click",function(t){var n=t.target;switch(n.getAttribute("data-btn")){case"crop":c();break;case"toggle":e.i(h.b)(n)}})},function(t,n,e){"use strict";function i(t,n,e){t.fillStyle="rgba(0, 0, 0, .4)",t.fillRect(0,0,n,e)}function r(t,n){h(t),t.drawImage(n,0,0,n.width,n.height)}function o(t,n){t.strokeRect(n.x+.5,n.y+.5,n.width,n.height)}function u(t,n,e,r){var u=e.width,a=e.height,c=n.width,d=n.height,s=c&&d,f=n.x,l=n.y,h=void 0;s&&(h=t.getImageData(f,l,c,d),c<0&&(f+=c),d<0&&(l+=d)),(s||r)&&i(t,u,a),h&&t.putImageData(h,f,l),o(t,n)}function a(t,n,e,i){var r=e.width,o=e.height,u=n.width>0?n.width:-n.width,a=n.height>0?n.height:-n.height;t.save(),t.translate(n.x+.5+n.width/2,n.y+.5+n.height/2),t.rotate(i),t.strokeRect(-n.width/2,-n.height/2,n.width,n.height),t.beginPath(),t.rect(-u/2,-a/2,u,a),t.restore(),t.rect(r,0,-r,o),t.fillStyle="rgba(0, 0, 0, .4)",t.fill()}function c(t,n,e,i){var o=s.getContext(),c=s.getDimensions();r(o,t),o.save(),o.lineWidth=1,o.strokeStyle="#006494",o.setTransform(1,0,0,1,0,0),e?a(o,n,c,e):u(o,n,c,i),o.restore()}function d(t,n){var e=f.get();return l.draw(t),new Promise(function(i){e.onload=function(){n(e),s.show(),i()},e.src=t})}e.d(n,"a",function(){return f}),e.d(n,"c",function(){return d}),e.d(n,"e",function(){return r}),e.d(n,"b",function(){return c}),e.d(n,"d",function(){return l});var s=e(1),f=function(){function t(t){return t?e:n}var n=new Image,e=new Image;return{get:t}}(),l=function(t){function n(t){var n=new Image;n.onload=function(){i.width=n.width,i.height=n.height,r.drawImage(n,0,0,n.width,n.height)},n.src=t}function e(n,e){if(!o){var r=t.get(!0);o=!0,r.onload=function(){requestAnimationFrame(function(){e(),o=!1})},r.src=i.toDataURL("image/jpeg",n)}}var i=document.createElement("canvas"),r=i.getContext("2d"),o=!1;return{draw:n,adjustQuality:e}}(f),h=function(t){var n=new Image,e=void 0;return n.onload=function(){e=t.createPattern(n,"repeat")},n.src="assets/images/pattern.png",function(t){var n=s.getDimensions(),i=n.width,r=n.height;t.fillStyle=e,t.save(),t.setTransform(1,0,0,1,0,0),t.fillRect(0,0,i,r),t.restore()}}(s.getContext())},function(t,n,e){"use strict";function i(t){return document.getElementById("js-crop-"+t)}function r(t){return i(t).value}function o(t,n){var e=i(t);"string"==typeof e.value?e.value=n:e.textContent=n}function u(t,n){return t?n>0?t:n+t:0}function a(t){var n=u(t.x,t.width),e=u(t.y,t.height);o("x",Math.floor(n)),o("y",Math.floor(e))}function c(t,n){t=Math.floor(t),n=Math.floor(n),o("width",t<0?-t:t),o("height",n<0?-n:n)}function d(t){a(t),c(t.width,t.height)}e.d(n,"c",function(){return r}),e.d(n,"b",function(){return o}),e.d(n,"a",function(){return d})},function(t,n,e){"use strict";function i(t){c=t<a,d=t}function r(){c=!1}function o(){return c?d:a}function u(){return c}e.d(n,"c",function(){return o}),e.d(n,"d",function(){return i}),e.d(n,"b",function(){return r}),e.d(n,"a",function(){return u});var a=.92,c=!1,d=a},function(t,n,e){"use strict";function i(t,n){document.getElementById("js-"+n).classList[t]("visible")}function r(t){i("add",t)}function o(t){i("remove",t)}e.d(n,"b",function(){return r}),e.d(n,"a",function(){return o})},function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function r(t){document.getElementById("js-dropbox-label").classList[t]("mask"),document.getElementById("js-mask").classList[t]("visible")}function o(){E.a(""),r("remove")}function u(){r("add"),b.a(1),E.b(),I.a("process"),I.b("cancel")}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;b.a(t),I.a("cancel"),E.c(),o()}function c(){"cropper"===e.i(C.a)()?(a(),B.i(x.a())):(E.c(),j.a())}function d(t){return t.slice(0,t.lastIndexOf("."))}function s(t){return(document.getElementById("js-image-name").value||d(t))+(document.getElementById("js-image-name-seperator").value||"-")}function f(){e.i(k.a)({action:"generate"})}function l(t){return new Promise(function(n){var e=new FileReader;e.readAsDataURL(t),e.onloadend=function(e){x.b({name:{original:t.name,setByUser:s(t.name)},type:t.type,size:t.size/1e6,uri:e.target.result}),n()}})}function h(t,n){var e=t.splice(0,1)[0];E.a("Reading: "+e.name),E.d(n),l(e).then(function(){if(0!==b.b()){if(!t.length)return void setTimeout(c,1e3);h(t,n)}})}function g(){x.c(),a(0),L.a("Work canceled")}function v(t){return t.filter(function(t){return t.type.includes("image")})}function m(t){var n=v(t);if(n.length){return void h(n,100/n.length)}L.a("No images to process"),a()}function y(t){e.i(k.a)({action:"remove"}),x.c(),b.a(-1),I.a("download"),u(),m([].concat(i(t)))}function p(t){var n=t.target.getAttribute("data-btn");"process"===n?j.a():"download"===n?e.i(k.a)({action:"download"}):"cancel"===n&&g()}function w(t){var n=t.target.files;t.preventDefault(),n.length&&(y(n),t.target.value="")}e.d(n,"e",function(){return y}),e.d(n,"c",function(){return u}),e.d(n,"a",function(){return f}),e.d(n,"b",function(){return a}),e.d(n,"d",function(){return o});var b=e(11),x=e(23),E=e(18),L=e(10),I=e(8),j=e(27),B=e(0),C=e(28),k=e(19);document.getElementById("js-dropbox-btns").addEventListener("click",p,!1),document.getElementById("js-image-select").addEventListener("change",w,!1)},function(t,n,e){"use strict";function i(t){u&&clearTimeout(u),u=setTimeout(r,t)}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o.textContent=t,t&&i(2e3)}e.d(n,"a",function(){return r});var o=document.getElementById("js-msg"),u=0},function(t,n,e){"use strict";function i(){return o}function r(t){o=t}e.d(n,"b",function(){return i}),e.d(n,"a",function(){return r});var o=-1},function(t,n,e){"use strict";function i(t){return t>180&&(t-=360),t*Math.PI/180}function r(t){var n=Math.round(180*t/Math.PI);return n<0&&(n+=360),n}function o(t){return d=i(t)}function u(t){var n=r(t);return d=0===n||360===n?0:t,n}function a(){return d}function c(){d=0}e.d(n,"c",function(){return o}),e.d(n,"d",function(){return u}),e.d(n,"a",function(){return a}),e.d(n,"b",function(){return c});var d=0},function(t,n,e){"use strict";function i(){return c}function r(t){return c[t]}function o(t){c.unshift(t)}function u(t){c.splice(t,1)}function a(){c.length=0}e.d(n,"a",function(){return i}),e.d(n,"d",function(){return r}),e.d(n,"c",function(){return o}),e.d(n,"e",function(){return u}),e.d(n,"b",function(){return a});var c=[]},function(t,n,e){"use strict";function i(t){a=t.map(function(t,n){return t.index=n,t})}function r(t){c=t}function o(){return c}function u(t){return a[t]}e.d(n,"c",function(){return i}),e.d(n,"b",function(){return r}),e.d(n,"d",function(){return o}),e.d(n,"a",function(){return u});var a=[],c=null},function(t,n,e){"use strict";function i(t){f.innerHTML=t.map(function(t){return'<li class="left-bar-thumbnail" data-index="'+t.index+'">\n            <img src="'+t.uri+'" class="left-bar-thumbnail-image">\n        </li>'}).join("\n"),a(0,f.children)}function r(){var t=document.getElementById("js-crop-left-bar");t.classList.toggle("hidden"),l=!t.classList.contains("hidden")}function o(){return l}function u(t){Array.from(t).forEach(function(t){t.classList.remove("active")})}function a(t,n){var e=d.a(t);s.d(e),d.b(e),n[t].classList.add("active")}function c(t,n,e){for(;t!==e;){var i=t.getAttribute(n);if(i)return{element:t,attrValue:i};t=t.parentElement}}e.d(n,"b",function(){return i}),e.d(n,"a",function(){return r}),e.d(n,"c",function(){return o});var d=e(14),s=e(0),f=document.getElementById("js-left-bar-thumbnails"),l=!0;f.addEventListener("click",function(t){var n=t.target,e=c(n,"data-index",f);e&&!e.element.classList.contains("active")&&(u(f.children),a(e.attrValue,f.children))})},function(t,n,e){"use strict";function i(){return L}function r(t,n){if("scale"===t){var e=g.getDimensions(),i=e.width,r=e.height;return n=n?b.b(n):100,void b.c(i/2,r/2,n)}"angle"===t?p.c(n):y.j(t,n,h.c());var o=y.d(),u=o.width&&o.height;l.d(!u,"crop"),u&&requestAnimationFrame(f.f)}function o(t){if(t.key)return t.key;var n=t.keyCode||t.which;return n?8===n||13===n?n:String.fromCharCode(n):void 0}function u(t){var n=t.target,e=o(t),i=n.getAttribute("data-input"),u="Backspace"===e||8===e,a="Enter"===e||13===e;if(i&&/\d|-/.test(e)){if(("-"===e||45===e)&&"x"!==i&&"y"!==i)return void t.preventDefault()}else if(a)r(i,parseInt(n.value,10));else if(!u)return void t.preventDefault()}function a(t){var n=parseFloat(t.target.value);v.d.adjustQuality(n,f.f),m.b("quality-display",n),w.d(n)}function c(t){var n=document.getElementById("js-crop-right-bar"),e=n.classList;L=!L,t.classList.toggle("icon-angle-double-left"),t.classList.toggle("icon-angle-double-right"),e.toggle("hidden")}function d(t){var n=t.target;if(n.getAttribute("data-section-btn")){var e=n.parentElement,i=e.children[1];i.children.length&&i.classList.toggle("hidden")}}function s(){var t=document.getElementById("js-cropped-image-items"),n=e.i(x.a)();t.innerHTML=n.map(function(t,n){return'\n            <li class="cropped-image-item">\n                <div class="cropped-image-item-btns">\n                    <button class="icon-search btn-transparent" data-preview="'+n+'"></button>\n                    <button class="icon-cancel btn-transparent" data-remove="'+n+'"></button>\n                </div>\n                <image src='+t.uri+' class="cropped-image">\n            </li>\n        '}).join(""),I&&(t.classList.remove("hidden"),I=!1),n.length||(I=!0,document.getElementById("js-cropped-image-items").classList.add("hidden"))}e.d(n,"c",function(){return i}),e.d(n,"b",function(){return c}),e.d(n,"a",function(){return s});var f=e(0),l=e(4),h=e(2),g=e(1),v=e(5),m=e(6),y=e(3),p=e(12),w=e(7),b=e(17),x=e(13),E=e(24),L=!0,I=!0;document.getElementById("js-crop-right-bar").addEventListener("click",d),document.getElementById("js-crop-data").addEventListener("keypress",u),document.getElementById("js-crop-quality").addEventListener("input",a),document.getElementById("js-cropped-image-items").addEventListener("click",function(t){var n=t.target,i=n.getAttribute("data-preview"),r=n.getAttribute("data-remove");if(i){var o=e.i(x.d)(i),u=o.uri;e.i(E.a)(u)}else r&&(e.i(x.e)(r),s())})},function(t,n,e){"use strict";function i(t,n,e){var i=v.getContext();g.d(i,t,n),g.e(i,e/100),g.d(i,-t,-n)}function r(t,n,e){var r=y.d();if(i(t,n,e),r.width&&r.height)f.g(r);else{var o=g.c(),u=o.e,a=o.f;y.g("x",u),y.g("y",a)}m.b("scale",e),requestAnimationFrame(f.f)}function o(t){return t<10?t=10:t>4e3&&(t=4e3),t}function u(t,n,e){return t-100/(n/(n-e))}function a(t,n,e,i){var r=100;return t>e&&(r=u(r,t,e),n*r/100>i&&(r=u(100,n,i))),Math.floor(r)}function c(t,n){h.c()&&(t-=200),l.c()&&(t+=100),g.f(t/2,n/2)}function d(t){return h.c()&&(t-=200),l.c()&&(t-=100),t}function s(t){var n=v.getDimensions(),e=n.width,i=n.height,o=t.width,u=t.height,s=d(e),f=100;f=o>u?a(o,u,s,i):a(u,o,i,s);var l=e-o*f/100,h=i-u*f/100,m=v.getContext();c(l,h),g.g(m),r(0,0,f)}e.d(n,"c",function(){return r}),e.d(n,"b",function(){return o}),e.d(n,"a",function(){return s});var f=e(0),l=e(15),h=e(16),g=e(2),v=e(1),m=e(6),y=e(3)},function(t,n,e){"use strict";function i(){a.classList.add("visible")}function r(t){c.textContent=t}function o(t){a.value+=t}function u(){a.classList.remove("visible"),a.value=0}e.d(n,"b",function(){return i}),e.d(n,"a",function(){return r}),e.d(n,"d",function(){return o}),e.d(n,"c",function(){return u});var a=document.getElementById("js-progress"),c=document.getElementById("js-progress-label")},function(t,n,e){"use strict";function i(t){s.postMessage(t)}function r(t){try{saveAs(t,"images.zip")}catch(e){var n=document.createElement("script");n.setAttribute("src","./libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){saveAs(t,"images.zip")}}}e.d(n,"a",function(){return i});var o=e(11),u=e(9),a=e(18),c=e(10),d=e(8),s=new Worker("./ww.js");s.onmessage=function(t){var n=t.data;"download"===n.action?r(n.content):"generating"===n.action?a.a("Generating archive"):"done"===n.action&&(o.a(-1),e.i(u.d)(),c.a("Images are ready for downloading"),d.b("download"))},s.onerror=function(t){}},function(t,n,e){"use strict";function i(t){t?(w.addEventListener("mousemove",m),window.addEventListener("keydown",g)):(w.removeEventListener("mousemove",m),window.removeEventListener("keydown",g))}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=document.getElementById("js-crop"),e=t===C;e?(C="",n.removeEventListener("mousemove",o),n.removeEventListener("mouseup",u)):(C=t,n.addEventListener("mousemove",o),n.addEventListener("mouseup",u)),i(e)}function o(t){t.target!==document.getElementById("js-canvas")&&t.preventDefault();var n=w.getMousePosition(t),e=n.x,i=n.y,r=L.d();switch(C){case"select":a(r,e,i);break;case"resize":c(r,e,i);break;case"rotate":s(r,e,i);break;case"move":if(!t.ctrlKey)return;f(e,i);break;case"drag":if(!t.shiftKey)return;l(e,i)}r.width&&r.height&&"rotate"!==C&&y.g(r),requestAnimationFrame(y.f)}function u(){var t=L.d(),n=t.width&&t.height;if(r(),!n){var e=L.h(),i=b.a.get(B.a()),o=w.getContext();b.e(o,i),w.setCursor(),E.a(e)}L.b(n),x.d(!n,"crop")}function a(t,n,e){L.g("width",n-t.x),L.g("height",e-t.y),L.b(!0)}function c(t,n,e){var i=I.b();if(-1!==i.indexOf("n")?(L.g("height",t.y-e+t.height),L.g("y",e)):-1!==i.indexOf("s")&&L.g("height",e-t.y),-1!==i.indexOf("w")?(L.g("width",t.x-n+t.width),L.g("x",n)):-1!==i.indexOf("e")&&L.g("width",n-t.x),i.length>1){var r=I.c(i,t);w.setCursor(r+"-resize")}}function d(t,n,e){var i=t.x+t.width/2,r=t.y+t.height/2;return Math.atan2(r-e,i-n)}function s(t,n,e){var i=d(t,n,e),r=j.d(i);E.b("angle",r)}function f(t,n){var e=y.h.get();L.g("x",t-e.x),L.g("y",n-e.y)}function l(t,n){var e=y.h.get();if(e){var i=w.getContext(),r=p.b(t,n);p.d(i,r.x-e.x,r.y-e.y)}}function h(){w.setCursor(),window.removeEventListener("keyup",h)}function g(t){var n=j.a(),e=L.d(),i=y.h.get(),r=i.x,o=i.y;t.ctrlKey&&L.f(e,r,o,n)&&w.setCursor("move"),window.addEventListener("keyup",h)}function v(t,n,e){var i=I.d(n,e,t),r=i?i+"-resize":"default";w.setCursor(r)}function m(t){var n=w.getMousePosition(t),e=n.x,i=n.y,r=L.d();if(y.h.set({x:e,y:i}),r.width&&r.height){var o=j.a();if(t.ctrlKey){var u="default";return L.f(r,e,i,o)&&(u="move"),void w.setCursor(u)}o||v(r,e,i)}}e.d(n,"b",function(){return r}),e.d(n,"a",function(){return i});var y=e(0),p=e(2),w=e(1),b=e(5),x=e(4),E=e(6),L=e(3),I=e(21),j=e(12),B=e(7),C=""},function(t,n,e){"use strict";function i(){return c}function r(t,n,e){return n?t+="w":e&&(t+="e"),t}function o(t,n){var e=n.x,i=n.y,r=e+n.width,o=i+n.height;return r>e&&o<i||r<e&&o>i?"w"===t[1]?t[0]+"e":t[0]+"w":t}function u(t,n,e){var i=a(t,n,e);return i.length<2?i:o(i,e)}function a(t,n,e){var i=e.x,o=e.y,u=i+e.width,a=o+e.height,d=t>=i-4&&t<=u+4||t<=i+4&&t>=u-4,s=n>=o-4&&n<=a+4||n<=o+4&&n>=a-4;if(c="",d&&s){var f=n>=o-4&&n<=o+4,l=t>=u-4&&t<=u+4,h=n>=a-4&&n<=a+4,g=t>=i-4&&t<=i+4;f?c=r("n",g,l):h?c=r("s",g,l):l?c="e":g&&(c="w")}return c}e.d(n,"b",function(){return i}),e.d(n,"d",function(){return u}),e.d(n,"a",function(){return a}),e.d(n,"c",function(){return o});var c=""},function(t,n,e){"use strict";function i(){var t=c.getContext(),n=d.c();c.resetDimensions(),d.h(t,n.a,n.b,n.c,n.d,n.e,n.f)}function r(){s||(s=!0,requestAnimationFrame(function(){i(),a.f(),s=!1}))}function o(){window.addEventListener("resize",r)}function u(){window.removeEventListener("resize",r)}e.d(n,"b",function(){return o}),e.d(n,"a",function(){return u});var a=e(0),c=e(1),d=e(2),s=!1},function(t,n,e){"use strict";function i(){return u}function r(t){u.push(t)}function o(){u.length=0}e.d(n,"b",function(){return r}),e.d(n,"c",function(){return o}),e.d(n,"a",function(){return i});var u=[]},function(t,n,e){"use strict";function i(t){var n=new Image;n.onload=function(){var t=n.width,e=n.height,i=window.innerWidth-8,r=window.innerHeight-8,o=t/e;t>i&&(t=i,e=Math.floor(t/o)),e>r&&(e=r,t=Math.floor(e*o)),n.style.width=t+"px",n.style.height=e+"px"},n.src=t,u.appendChild(n),o.classList.add("visible")}function r(){o.classList.remove("visible"),setTimeout(function(){u.removeChild(u.lastElementChild)},600)}e.d(n,"a",function(){return i});var o=document.getElementById("js-crop-preview"),u=o.firstElementChild;document.getElementById("js-crop-preview-close").addEventListener("click",r)},function(t,n,e){"use strict";function i(t){document.getElementById("js-crop-image-name").textContent=t}function r(){var t=f.a();c.a(),h.a(t.x,t.y),h.b(!1),m.a(l.a.get()),s.a("crop")}function o(){var t=e.i(p.a)();e.i(y.a)({action:"add-bulk",images:t}),e.i(p.b)(),e.i(w.a)()}function u(){c.b.hide(),c.a(),h.b(!1),g.a(),c.c("remove"),v.a(),o(),a.a()}e.d(n,"a",function(){return i});var a=e(9),c=e(0),d=e(15),s=e(4),f=e(2),l=e(5),h=e(3),g=e(20),v=e(22),m=e(17),y=e(19),p=e(13),w=e(16);document.getElementById("js-crop-top-bar").addEventListener("click",function(t){switch(t.target.getAttribute("data-btn")){case"images":d.a();break;case"reset":r();break;case"close":u()}})},function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function r(t){var n={dimensionInputValues:t,imageName:p.value||"",imageNameSeperator:w.value||"",imageQuality:b.value};localStorage.setItem("selections",JSON.stringify(n))}function o(t){return t.reduce(function(t,n){return t.push(n.width,n.height),t},[])}function u(){for(var t=y.children,n=[],e=0,i=t.length;e<i;e+=2){var r=t[e].value,o=t[e+1].value;(r||o)&&n.push({width:r,height:o})}return a(n)}function a(t){return t.length?(t=t.filter(function(t){return c(t.width,t.height)}),t.length||(v.a("No valid values"),m.b("process"))):(v.a("No dimensions specified"),m.b("process")),t}function c(t,n){var e=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/,i=e.test(t)&&!("same"===t&&(!n||"same"===n)),r=e.test(n)&&!("same"===n&&(!t||"same"===t));return i||r}function d(t,n){Array.from(t).forEach(function(t,e){t.value=n[e]})}function s(){var t=document.createElement("input");return t.setAttribute("type","text"),t.classList.add("input","image-input"),t}function f(t){for(var n=document.createDocumentFragment(),e=0;e<t;e++)n.appendChild(s());return n}function l(t,n){var e=t.children.length;if(e<n){var i=n-e;t.appendChild(f(i))}}function h(t){v.a("Image quality set to: "+t.target.value+"%")}function g(t){var n=[].concat(i(y.children)),e=n.indexOf(t.target),r=e%2==0&&!n[e+2],o=e%2!=0&&!n[e+1];(r||o)&&y.appendChild(f(2))}e.d(n,"b",function(){return r}),e.d(n,"a",function(){return u});var v=e(10),m=e(8),y=document.getElementById("js-dimension-inputs"),p=document.getElementById("js-image-name"),w=document.getElementById("js-image-name-seperator"),b=document.getElementById("js-image-quality");!function(){var t=localStorage.getItem("selections");if(t){t=JSON.parse(t);var n=o(t.dimensionInputValues);l(y,n.length),d(y.children,n),p.value=t.imageName,w.value=t.imageNameSeperator,b.value=t.imageQuality}}(),b.addEventListener("input",h,!1),y.addEventListener("focus",g,!0)},function(t,n,e){"use strict";function i(t){return"width"===t?"height":"width"}function r(t,n,e){var r=i(t),o="same"===n[t]?n[r]:n[t],u=e[t];return o.includes("%")?u*(parseInt(o,10)/100):"original"===o||o===t?parseInt(u,10):o===r?parseInt(e[r],10):parseInt(o,10)}function o(t,n){var e=n.width/n.height,i=0,o=0;return t.width&&(i=r("width",t,n),t.height?"same"===t.width&&(o=i):o=i/e),!o&&t.height&&(o=r("height",t,n),t.width?i||"same"!==t.height||(i=o):i=o*e),{width:i,height:o}}function u(t,n){return t.map(function(t){return o(t,n)})}function a(t,n,e){var i=e.width,r=e.height,o=document.createElement("canvas"),u=document.getElementById("js-image-quality").value/100;return o.width=i,o.height=r,o.getContext("2d").drawImage(t,0,0,i,r),o.toDataURL(n,u)}function c(){y.a("cancel"),m.c(),m.a(""),g.a()}function d(t,n,i){return new Promise(function(r){e.i(w.a)({action:"add",image:{name:n.name.setByUser,uri:a(t,n.type,i),type:n.type.slice(6)}}),r()})}function s(t,n,e,i){var r=e.splice(0,1)[0];return d(t,n,r).then(function(){m.d(i),0!==h.b()&&e.length&&s(t,n,e,i)})}function f(t,n,e){var i=new Image,r=t.splice(0,1)[0];i.onload=function(){if(0!==h.b()){var o={width:i.width,height:i.height},a=u(n,o);m.a("Processing: "+r.name.original),s(i,r,a,e).then(function(){if(0!==h.b()){if(!t.length)return void setTimeout(c,1e3);f(t,n,e)}})}},i.src=r.uri}function l(){var t=p.a();if(!t.length)return void g.b();var n=v.a(),e=n.length*t.length,i=100/e;g.c(),f(n,t,i),p.b(t)}e.d(n,"a",function(){return l});var h=e(11),g=e(9),v=e(23),m=e(18),y=e(8),p=e(26),w=e(19)},function(t,n,e){"use strict";function i(){return a}function r(t){var n=document.getElementById("js-"+t+"-settings");n&&n.classList.toggle("active")}function o(t){var n=t.target,e=n.getAttribute("data-tool");e&&e!==a&&(document.querySelector("[data-tool="+a+"]").classList.remove("active"),n.classList.add("active"),r(a),r(e),u.a(e+" enabled"),a=e)}e.d(n,"a",function(){return i});var u=e(10),a="resizer";document.getElementById("js-tool-selection").addEventListener("click",o)},function(t,n,e){"use strict";function i(t){t.stopPropagation(),t.preventDefault()}function r(t){t.preventDefault(),1!==c.b()&&(f+=1,s.classList.add("over"))}function o(){1!==c.b()&&((f-=1)||s.classList.remove("over"))}function u(t){if(f=0,s.classList.remove("over"),t.stopPropagation(),t.preventDefault(),1===c.b())return void(t.dataTransfer.dropEffect="none");t.dataTransfer.dropEffect="copy",d.e(t.dataTransfer.files)}function a(t){1===c.b()&&t.preventDefault()}var c=e(11),d=e(9),s=document.getElementById("js-dropbox"),f=0;s.addEventListener("dragover",i,!1),s.addEventListener("dragenter",r,!1),s.addEventListener("dragleave",o,!1),s.addEventListener("drop",u,!1),s.addEventListener("click",a,!1),window.addEventListener("drop",function(t){t.preventDefault()},!1),window.addEventListener("dragover",function(t){t.preventDefault()},!1)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e(9),e(8),e(29),e(23),e(10),e(18),e(28),e(11),e(19),e(27),e(26),e(12),e(4),e(5),e(1),e(20),e(2),e(13),e(6),e(21),e(14),e(0),e(15),e(24),e(7),e(22),e(16),e(17),e(3),e(25)}]);