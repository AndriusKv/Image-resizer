!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=30)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n,r,i){if(n.save(),r){var o=t.x+t.width/2,a=t.y+t.height/2;n.translate(o,a),n.rotate(-r),n.translate(-o,-a)}return n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x+i.x,t.y+i.y,t.width,t.height)}function o(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),o=y.getTranslated();n.width=e.width+2*o.x,n.height=e.height+2*o.y,r.translate(o.x,o.y);var a=i(e,t,r,q.get(),o);return n.width=a.width,n.height=a.height,r.putImageData(a,0,0),n}function a(e,t){var n=y.getTransformedPoint(e.x,e.y),r=n.x,i=n.y,o=y.getTransformedPoint(e.x+e.width,e.y+e.height),a=o.x-r,s=o.y-i,u=R.setTransformed({x:r,y:i,width:a,height:s});t&&(u.x=0,u.y=0),k.update(u)}function s(e){b[e+"EventListener"]("wheel",v,{passive:!0}),b[e+"EventListener"]("mousedown",l),b[e+"EventListener"]("mousemove",h),b[e+"EventListener"]("mouseleave",M.hideMousePosition)}function u(e){A.set(e),b.resetDimensions(),L.init(e),O.enable(),s("add"),$.show()}function c(){var e=E.image.get(Q.useImageWithQuality()),t=q.get(),n=R.get(),r=R.isDrawn();E.drawCanvas(e,n,t,r)}function d(e){P.displayImageName(e.name.original),M.disableButton("crop"),E.drawInitialImage(e.uri,K.scaleImageToFitCanvas).then(function(){var e=y.getTranslated();R.setDefaultPos(e.x,e.y)})}function l(e){if(1===e.which){var t=b.getMousePosition(e),n=t.x,r=t.y,i=R.get(),o=i.width&&i.height,a=q.get(),s=F.set(n,r,i),u="select";if(e.shiftKey)H.set(y.getTransformedPoint(n,r)),u="drag";else if(e.ctrlKey&&o)R.isInside(i,n,r,a)?(H.set({x:n-i.x,y:r-i.y}),u="move"):u="rotate";else if(s&&o&&!a)u="resize";else{f(),R.setProp("x",n),R.setProp("y",r);var d=y.getTransformedPoint(n,r);k.update({x:d.x,y:d.y,width:0,height:0})}V.toggleEvent(u),requestAnimationFrame(c)}}function f(){R.reset(),q.reset(),k.setValue("angle",0)}function g(){Q.reset(),k.setValue("scale",100),k.setValue("quality",.92),k.setValue("quality-display",.92),f(),a(R.get(),!0)}function v(e){var t=b.getMousePosition(e),n=t.x,r=t.y,i=y.getTransformedPoint(n,r),o=parseInt(k.getValue("scale"),10)||100,a=e.deltaY>0?.8:1.25,s=K.adjustScale(Math.floor(o*a));K.scaleImage(i.x,i.y,s)}function h(e){var t=b.getMousePosition(e),n=t.x,r=t.y,i=y.getTransformedPoint(n,r),o=Math.floor(i.x),a=Math.floor(i.y);M.setMousePosition(o+", "+a)}function m(e){g(),R.containsArea(!1),b.hide(),setTimeout(function(){d(e)},240)}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCanvasElementEventListeners=t.loadNextImage=t.resetData=t.getCroppedCanvas=t.updateTransformedArea=t.mousePosition=t.cropperElement=t.draw=t.init=void 0;var p=n(2),y=r(p),w=n(1),b=r(w),I=n(5),E=r(I),x=n(25),P=r(x),j=n(15),L=r(j),_=n(4),M=r(_),C=n(22),O=r(C),B=n(14),A=r(B),T=n(6),k=r(T),D=n(20),V=r(D),S=n(3),R=r(S),W=n(21),F=r(W),N=n(12),q=r(N),z=n(7),Q=r(z),U=n(17),K=r(U),$=function(){function e(){n.classList.add("visible")}function t(){n.classList.remove("visible")}var n=document.getElementById("js-crop");return{show:e,hide:t}}(),H=function(){function e(e){n=e}function t(){return n}var n=null;return{set:e,get:t}}();t.init=u,t.draw=c,t.cropperElement=$,t.mousePosition=H,t.updateTransformedArea=a,t.getCroppedCanvas=o,t.resetData=g,t.loadNextImage=m,t.toggleCanvasElementEventListeners=s},function(e,t,n){"use strict";function r(){return f.getContext("2d")}function i(){return{width:f.width,height:f.height}}function o(){f.width=window.innerWidth,f.height=window.innerHeight-58}function a(e,t){f.addEventListener(e,t)}function s(e,t){f.removeEventListener(e,t)}function u(){f.classList.add("visible")}function c(){f.classList.remove("visible")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";f.style.cursor=e}function l(e){var t=e.clientX,n=e.clientY,r=f.getBoundingClientRect();return{x:t-r.left,y:n-r.top}}Object.defineProperty(t,"__esModule",{value:!0});var f=document.getElementById("js-canvas");t.getDimensions=i,t.resetDimensions=o,t.show=u,t.hide=c,t.getContext=r,t.addEventListener=a,t.removeEventListener=s,t.setCursor=d,t.getMousePosition=l},function(e,t,n){"use strict";function r(){return v}function i(e,t){v.a=1,v.d=1,v=v.scale(t,t),e.setTransform(v.a,0,0,v.a,v.e,v.f)}function o(e,t,n){v=v.translate(t,n),e.translate(t,n)}function a(e){o(e,g.x,g.y)}function s(e,t){var n=f.createSVGPoint();return n.x=e,n.y=t,n.matrixTransform(v.inverse())}function u(e,t,n,r,i,o,a){v.a=t,v.b=n,v.c=r,v.d=i,v.e=o,v.f=a,e.setTransform(t,n,r,i,o,a)}function c(e){u(e,1,0,0,1,0,0),a(e)}function d(e,t){return g.x=e,g.y=t,g}function l(){return g}Object.defineProperty(t,"__esModule",{value:!0});var f=document.createElementNS("http://www.w3.org/2000/svg","svg"),g={},v=f.createSVGMatrix();t.get=r,t.set=u,t.reset=c,t.setDefaultTranslation=d,t.getTranslated=l,t.scale=i,t.translate=o,t.getTransformedPoint=s},function(e,t,n){"use strict";function r(){return m}function i(){return p}function o(e){return m[e]}function a(e){return Object.assign(p,e),p}function s(e,t){return m[e]=t,t}function u(e,t){s("x",e),s("y",t)}function c(){return m.x=0,m.y=0,m.width=0,m.height=0,Object.assign(p,m),m}function d(e,t,n){var r=e.x,i=e.y,o=r+e.width,a=i+e.height,s=t>=r&&t<=o||t<=r&&t>=o,u=n>=i&&n<=a||n<=i&&n>=a;return s&&u}function l(e,t,n,r){var i=t-(e.x+e.width/2),o=n-(e.y+e.height/2),a=Math.sin(-r),s=Math.cos(-r),u=i*s-o*a,c=i*a+o*s;return d({x:-e.width/2,y:-e.height/2,width:e.width,height:e.height},u,c)}function f(e,t,n,r){return r?l(e,t,n,r):d(e,t,n)}function g(e,t,n){var r=n.a,i=0;p[e]=t||0,"x"===e?(i=n.e,m.width<0&&(m.width=-m.width)):"y"===e?(i=n.f,m.height<0&&(m.height=-m.height)):"width"===e?m[e]<0&&(m.x=m.x+m[e]):"height"===e&&m[e]<0&&(m.y=m.y+m[e]),m[e]=i+p[e]*r}function v(e){return y=e,e}function h(){return y}Object.defineProperty(t,"__esModule",{value:!0});var m={x:0,y:0,width:0,height:0},p=Object.assign({},m),y=!1;t.get=r,t.getTransformed=i,t.setTransformed=a,t.getProp=o,t.setProp=s,t.reset=c,t.isInside=f,t.update=g,t.setDefaultPos=u,t.containsArea=v,t.isDrawn=h},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){document.getElementById("js-crop-mouse-pos").textContent=e}function o(){i("")}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){document.getElementById("js-cropper-"+t).disabled=e})}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(void 0,[!0].concat(t))}function u(e){return new Promise(function(t){var n=new Image;n.onload=function(){var r=h.getTransformed(),i=l.getCroppedCanvas(n,r);t({name:e.name.setByUser,type:e.type.slice(6),uri:i.toDataURL(e.type,p.get())})},n.src=e.uri})}function c(){u(g.getActive()).then(w.addCroppedImage).then(y.displayCroppedImages)}Object.defineProperty(t,"__esModule",{value:!0}),t.disableButton=t.toggleButton=t.hideMousePosition=t.setMousePosition=void 0;var d=n(0),l=r(d),f=n(14),g=r(f),v=n(3),h=r(v),m=n(7),p=r(m),y=n(16),w=n(13);document.getElementById("js-crop-bottom-btns").addEventListener("click",function(e){var t=e.target;switch(t.getAttribute("data-btn")){case"crop":c();break;case"toggle":(0,y.toggleRightBar)(t)}}),t.setMousePosition=i,t.hideMousePosition=o,t.toggleButton=a,t.disableButton=s},function(e,t,n){"use strict";function r(e,t,n){e.fillStyle="rgba(0, 0, 0, .4)",e.fillRect(0,0,t,n)}function i(e,t){v(e),e.drawImage(t,0,0,t.width,t.height)}function o(e,t){e.strokeRect(t.x+.5,t.y+.5,t.width,t.height)}function a(e,t,n,i){var a=n.width,s=n.height,u=t.width,c=t.height,d=u&&c,l=t.x,f=t.y,g=void 0;d&&(g=e.getImageData(l,f,u,c),u<0&&(l+=u),c<0&&(f+=c)),(d||i)&&r(e,a,s),g&&e.putImageData(g,l,f),o(e,t)}function s(e,t,n,r){var i=n.width,o=n.height,a=t.width>0?t.width:-t.width,s=t.height>0?t.height:-t.height;e.save(),e.translate(t.x+.5+t.width/2,t.y+.5+t.height/2),e.rotate(r),e.strokeRect(-t.width/2,-t.height/2,t.width,t.height),e.beginPath(),e.rect(-a/2,-s/2,a,s),e.restore(),e.rect(i,0,-i,o),e.fillStyle="rgba(0, 0, 0, .4)",e.fill()}function u(e,t,n,r){var o=l.getContext(),u=l.getDimensions();i(o,e),o.save(),o.lineWidth=1,o.strokeStyle="#006494",o.setTransform(1,0,0,1,0,0),n?s(o,t,u,n):a(o,t,u,r),o.restore()}function c(e,t){var n=f.get();return g.draw(e),new Promise(function(r){n.onload=function(){t(n),l.show(),r()},n.src=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.spareCanvas=t.removeEventListener=t.addEventListener=t.drawCanvas=t.drawImage=t.drawInitialImage=t.image=void 0;var d=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=function(){function e(e){return e?n:t}var t=new Image,n=new Image;return{get:e}}(),g=function(e){function t(e){var t=new Image;t.onload=function(){r.width=t.width,r.height=t.height,i.drawImage(t,0,0,t.width,t.height)},t.src=e}function n(t,n){if(!o){var i=e.get(!0);o=!0,i.onload=function(){requestAnimationFrame(function(){n(),o=!1})},i.src=r.toDataURL("image/jpeg",t)}}var r=document.createElement("canvas"),i=r.getContext("2d"),o=!1;return{draw:t,adjustQuality:n}}(f),v=function(e){var t=new Image,n=void 0;return t.onload=function(){n=e.createPattern(t,"repeat")},t.src="assets/images/pattern.png",function(e){var t=l.getDimensions(),r=t.width,i=t.height;e.fillStyle=n,e.save(),e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,r,i),e.restore()}}(l.getContext());t.image=f,t.drawInitialImage=c,t.drawImage=i,t.drawCanvas=u,t.addEventListener=addEventListener,t.removeEventListener=removeEventListener,t.spareCanvas=g},function(e,t,n){"use strict";function r(e){return document.getElementById("js-crop-"+e)}function i(e){return r(e).value}function o(e,t){var n=r(e);"string"==typeof n.value?n.value=t:n.textContent=t}function a(e,t){return e?t>0?e:t+e:0}function s(e){var t=a(e.x,e.width),n=a(e.y,e.height);o("x",Math.floor(t)),o("y",Math.floor(n))}function u(e,t){e=Math.floor(e),t=Math.floor(t),o("width",e<0?-e:e),o("height",t<0?-t:t)}function c(e){s(e),u(e.width,e.height)}Object.defineProperty(t,"__esModule",{value:!0}),t.getValue=i,t.setValue=o,t.update=c},function(e,t,n){"use strict";function r(e){u=e<s,c=e}function i(){u=!1}function o(){return u?c:s}function a(){return u}Object.defineProperty(t,"__esModule",{value:!0});var s=.92,u=!1,c=s;t.get=o,t.set=r,t.reset=i,t.useImageWithQuality=a},function(e,t,n){"use strict";function r(e,t){document.getElementById("js-"+t).classList[e]("visible")}function i(e){r("add",e)}function o(e){r("remove",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.show=i,t.hide=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){document.getElementById("js-dropbox-label").classList[e]("mask"),document.getElementById("js-mask").classList[e]("visible")}function a(){L.setLabel(""),o("remove")}function s(){o("add"),E.set(1),L.show(),O.hide("process"),O.show("cancel")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;E.set(e),O.hide("cancel"),L.reset(),a()}function c(){"cropper"===(0,D.getCurrentTool)()?(u(),k.init(P.getAll())):(L.reset(),A.processImages())}function d(e){return e.slice(0,e.lastIndexOf("."))}function l(e){return(document.getElementById("js-image-name").value||d(e))+(document.getElementById("js-image-name-seperator").value||"-")}function f(){(0,V.postMessageToWorker)({action:"generate"})}function g(e){return new Promise(function(t){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(n){P.add({name:{original:e.name,setByUser:l(e.name)},type:e.type,size:e.size/1e6,uri:n.target.result}),t()}})}function v(e,t){var n=e.splice(0,1)[0];L.setLabel("Reading: "+n.name),L.update(t),g(n).then(function(){if(0!==E.get()){if(!e.length)return void setTimeout(c,1e3);v(e,t)}})}function h(){P.reset(),u(0),M.show("Work canceled")}function m(e){return e.filter(function(e){return e.type.includes("image")})}function p(e){var t=m(e);if(t.length){return void v(t,100/t.length)}M.show("No images to process"),u()}function y(e){(0,V.postMessageToWorker)({action:"remove"}),P.reset(),E.set(-1),O.hide("download"),s(),p([].concat(i(e)))}function w(e){var t=e.target.getAttribute("data-btn");"process"===t?A.processImages():"download"===t?(0,V.postMessageToWorker)({action:"download"}):"cancel"===t&&h()}function b(e){var t=e.target.files;e.preventDefault(),t.length&&(y(t),e.target.value="")}Object.defineProperty(t,"__esModule",{value:!0}),t.removeMasksAndLabel=t.resetDropbox=t.generateZip=t.beforeWork=t.onFiles=void 0;var I=n(11),E=r(I),x=n(23),P=r(x),j=n(18),L=r(j),_=n(10),M=r(_),C=n(8),O=r(C),B=n(27),A=r(B),T=n(0),k=r(T),D=n(28),V=n(19);document.getElementById("js-dropbox-btns").addEventListener("click",w,!1),document.getElementById("js-image-select").addEventListener("change",b,!1),t.onFiles=y,t.beforeWork=s,t.generateZip=f,t.resetDropbox=u,t.removeMasksAndLabel=a},function(e,t,n){"use strict";function r(e){a&&clearTimeout(a),a=setTimeout(i,e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o.textContent=e,e&&r(2e3)}Object.defineProperty(t,"__esModule",{value:!0});var o=document.getElementById("js-msg"),a=0;t.show=i},function(e,t,n){"use strict";function r(){return o}function i(e){o=e}Object.defineProperty(t,"__esModule",{value:!0});var o=-1;t.get=r,t.set=i},function(e,t,n){"use strict";function r(e){return e>180&&(e-=360),e*Math.PI/180}function i(e){var t=2*Math.PI,n=-t;return e>t?e-=t:e<n&&(e-=n),e}function o(e){var t=Math.round(180*i(e)/Math.PI);return t<0&&(t+=360),t}function a(e){return d=r(e)}function s(e){var t=o(e);return d=0===t||360===t?0:e,t}function u(){return d}function c(){d=0}Object.defineProperty(t,"__esModule",{value:!0});var d=0;t.setInDegrees=a,t.setInRadians=s,t.get=u,t.reset=c},function(e,t,n){"use strict";function r(){return u}function i(e){return u[e]}function o(e){u.unshift(e)}function a(e){u.splice(e,1)}function s(){u.length=0}Object.defineProperty(t,"__esModule",{value:!0});var u=[];t.getAllCroppedImages=r,t.getCroppedImage=i,t.addCroppedImage=o,t.removeCroppedImage=a,t.removeCroppedImages=s},function(e,t,n){"use strict";function r(){return u}function i(e){u=e.map(function(e,t){return e.index=t,e})}function o(e){c=e}function a(){return c}function s(e){return u[e]}Object.defineProperty(t,"__esModule",{value:!0});var u=[],c=null;t.getAll=r,t.set=i,t.setActive=o,t.getActive=a,t.getByIndex=s},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){v.innerHTML=e.map(function(e){return'<li class="left-bar-thumbnail" data-index="'+e.index+'">\n            <img src="'+e.uri+'" class="left-bar-thumbnail-image">\n        </li>'}).join("\n"),u(0,v.children)}function o(){var e=document.getElementById("js-crop-left-bar");e.classList.toggle("hidden"),h=!e.classList.contains("hidden")}function a(){return h}function s(e){Array.from(e).forEach(function(e){e.classList.remove("active")})}function u(e,t){var n=l.getByIndex(e);g.loadNextImage(n),l.setActive(n),t[e].classList.add("active")}function c(e,t,n){for(;e!==n;){var r=e.getAttribute(t);if(r)return{element:e,attrValue:r};e=e.parentElement}}Object.defineProperty(t,"__esModule",{value:!0}),t.isVisible=t.toggle=t.init=void 0;var d=n(14),l=r(d),f=n(0),g=r(f),v=document.getElementById("js-left-bar-thumbnails"),h=!0;v.addEventListener("click",function(e){var t=e.target,n=c(t,"data-index",v);n&&!n.element.classList.contains("active")&&(s(v.children),u(n.attrValue,v.children))}),t.init=i,t.toggle=o,t.isVisible=a},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){return k}function o(e,t){if("scale"===e){var n=w.getDimensions(),r=n.width,i=n.height;return t=t?B.adjustScale(t):100,void B.scaleImage(r/2,i/2,t)}"angle"===e?_.setInDegrees(t):j.update(e,t,p.get());var o=j.get(),a=o.width&&o.height;h.toggleButton(!a,"crop"),a&&requestAnimationFrame(g.draw)}function a(e){if(e.key)return e.key;var t=e.keyCode||e.which;return t?8===t||13===t?t:String.fromCharCode(t):void 0}function s(e){var t=e.target,n=a(e),r=t.getAttribute("data-input"),i="Backspace"===n||8===n,s="Enter"===n||13===n;if(r&&/\d|-/.test(n)){if(("-"===n||45===n)&&"x"!==r&&"y"!==r)return void e.preventDefault()}else if(s)o(r,parseInt(t.value,10));else if(!i)return void e.preventDefault()}function u(e){var t=parseFloat(e.target.value);I.spareCanvas.adjustQuality(t,g.draw),x.setValue("quality-display",t),C.set(t)}function c(e){var t=document.getElementById("js-crop-right-bar"),n=t.classList;k=!k,e.classList.toggle("icon-angle-double-left"),e.classList.toggle("icon-angle-double-right"),n.toggle("hidden")}function d(e){var t=e.target;if(t.getAttribute("data-section-btn")){var n=t.parentElement,r=n.children[1];r.children.length&&r.classList.toggle("hidden")}}function l(){var e=document.getElementById("js-cropped-image-items"),t=(0,A.getAllCroppedImages)();e.innerHTML=t.map(function(e,t){return'\n            <li class="cropped-image-item">\n                <div class="cropped-image-item-btns">\n                    <button class="icon-search btn-transparent" data-preview="'+t+'"></button>\n                    <button class="icon-cancel btn-transparent" data-remove="'+t+'"></button>\n                </div>\n                <image src='+e.uri+' class="cropped-image">\n            </li>\n        '}).join(""),D&&(e.classList.remove("hidden"),D=!1),t.length||(D=!0,document.getElementById("js-cropped-image-items").classList.add("hidden"))}Object.defineProperty(t,"__esModule",{value:!0}),t.displayCroppedImages=t.toggleRightBar=t.isVisible=void 0;var f=n(0),g=r(f),v=n(4),h=r(v),m=n(2),p=r(m),y=n(1),w=r(y),b=n(5),I=r(b),E=n(6),x=r(E),P=n(3),j=r(P),L=n(12),_=r(L),M=n(7),C=r(M),O=n(17),B=r(O),A=n(13),T=n(24),k=!0,D=!0;document.getElementById("js-crop-right-bar").addEventListener("click",d),document.getElementById("js-crop-data").addEventListener("keypress",s),document.getElementById("js-crop-quality").addEventListener("input",u),document.getElementById("js-cropped-image-items").addEventListener("click",function(e){var t=e.target,n=t.getAttribute("data-preview"),r=t.getAttribute("data-remove");if(n){var i=(0,A.getCroppedImage)(n),o=i.uri;(0,T.showPreview)(o)}else r&&((0,A.removeCroppedImage)(r),l())}),t.isVisible=i,t.toggleRightBar=c,t.displayCroppedImages=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t,n){var r=I.getContext();w.translate(r,e,t),w.scale(r,n/100),w.translate(r,-e,-t)}function o(e,t,n){var r=j.get();if(i(e,t,n),r.width&&r.height)g.updateTransformedArea(r);else{var o=w.get(),a=o.e,s=o.f;j.setProp("x",a),j.setProp("y",s)}x.setValue("scale",n),requestAnimationFrame(g.draw)}function a(e){return e<10?e=10:e>4e3&&(e=4e3),e}function s(e,t,n){return e-100/(t/(t-n))}function u(e,t,n,r){var i=100;return e>n&&(i=s(i,e,n),t*i/100>r&&(i=s(100,t,r))),Math.floor(i)}function c(e,t){p.isVisible()&&(e-=200),h.isVisible()&&(e+=100),w.setDefaultTranslation(e/2,t/2)}function d(e){return p.isVisible()&&(e-=200),h.isVisible()&&(e-=100),e}function l(e){var t=I.getDimensions(),n=t.width,r=t.height,i=e.width,a=e.height,s=d(n),l=100;l=i>a?u(i,a,s,r):u(a,i,r,s);var f=n-i*l/100,g=r-a*l/100,v=I.getContext();c(f,g),w.reset(v),o(0,0,l)}Object.defineProperty(t,"__esModule",{value:!0}),t.scaleImageToFitCanvas=t.adjustScale=t.scaleImage=void 0;var f=n(0),g=r(f),v=n(15),h=r(v),m=n(16),p=r(m),y=n(2),w=r(y),b=n(1),I=r(b),E=n(6),x=r(E),P=n(3),j=r(P);t.scaleImage=o,t.adjustScale=a,t.scaleImageToFitCanvas=l},function(e,t,n){"use strict";function r(){u.classList.add("visible")}function i(){u.classList.remove("visible")}function o(e){c.textContent=e}function a(e){u.value+=e}function s(){u.classList.remove("visible"),u.value=0}Object.defineProperty(t,"__esModule",{value:!0});var u=document.getElementById("js-progress"),c=document.getElementById("js-progress-label");t.show=r,t.hide=i,t.setLabel=o,t.update=a,t.reset=s},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){h.postMessage(e)}function o(e){try{saveAs(e,"images.zip")}catch(n){var t=document.createElement("script");t.setAttribute("src","./libs/FileSaver.min.js"),document.getElementsByTagName("body")[0].appendChild(t),t.onload=function(){saveAs(e,"images.zip")}}}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessageToWorker=void 0;var a=n(11),s=r(a),u=n(9),c=n(18),d=r(c),l=n(10),f=r(l),g=n(8),v=r(g),h=new Worker("./ww.js");h.onmessage=function(e){var t=e.data;"download"===t.action?o(t.content):"generating"===t.action?d.setLabel("Generating archive"):"done"===t.action&&(s.set(-1),(0,u.removeMasksAndLabel)(),f.show("Images are ready for downloading"),v.show("download"))},h.onerror=function(e){},t.postMessageToWorker=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){e?(x.addEventListener("mousemove",p),window.addEventListener("keydown",h)):(x.removeEventListener("mousemove",p),window.removeEventListener("keydown",h))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=document.getElementById("js-crop"),n=e===R;n?(R="",t.removeEventListener("mousemove",a),t.removeEventListener("mouseup",s)):(R=e,t.addEventListener("mousemove",a),t.addEventListener("mouseup",s),"rotate"===e&&(W=D.get())),i(n)}function a(e){e.target!==document.getElementById("js-canvas")&&e.preventDefault();var t=x.getMousePosition(e),n=t.x,r=t.y,i=B.get();switch(R){case"select":u(i,n,r);break;case"resize":c(i,n,r);break;case"rotate":l(i,n,r);break;case"move":if(!e.ctrlKey)return;f(n,r);break;case"drag":if(!e.shiftKey)return;g(n,r)}i.width&&i.height&&"rotate"!==R&&w.updateTransformedArea(i),requestAnimationFrame(w.draw)}function s(){var e=B.get(),t=e.width&&e.height;if(o(),!t){var n=B.reset(),r=j.image.get(S.useImageWithQuality()),i=x.getContext();j.drawImage(i,r),x.setCursor(),C.update(n)}B.containsArea(t),_.toggleButton(!t,"crop")}function u(e,t,n){B.setProp("width",t-e.x),B.setProp("height",n-e.y),B.containsArea(!0)}function c(e,t,n){var r=T.get();if(-1!==r.indexOf("n")?(B.setProp("height",e.y-n+e.height),B.setProp("y",n)):-1!==r.indexOf("s")&&B.setProp("height",n-e.y),-1!==r.indexOf("w")?(B.setProp("width",e.x-t+e.width),B.setProp("x",t)):-1!==r.indexOf("e")&&B.setProp("width",t-e.x),r.length>1){var i=T.reverse(r,e);x.setCursor(i+"-resize")}}function d(e,t,n){var r=e.x+e.width/2,i=e.y+e.height/2,o=w.mousePosition.get(),a=o.x,s=o.y,u=Math.atan2(i-s,r-a);return Math.atan2(i-n,r-t)-u}function l(e,t,n){var r=d(e,t,n),i=D.setInRadians(W+r);C.setValue("angle",i)}function f(e,t){var n=w.mousePosition.get();B.setProp("x",e-n.x),B.setProp("y",t-n.y)}function g(e,t){var n=w.mousePosition.get();if(n){var r=x.getContext(),i=I.getTransformedPoint(e,t);I.translate(r,i.x-n.x,i.y-n.y)}}function v(){x.setCursor(),window.removeEventListener("keyup",v)}function h(e){var t=D.get(),n=B.get(),r=w.mousePosition.get(),i=r.x,o=r.y;e.ctrlKey&&B.isInside(n,i,o,t)&&x.setCursor("move"),window.addEventListener("keyup",v)}function m(e,t,n){var r=T.getReal(t,n,e),i=r?r+"-resize":"default";x.setCursor(i)}function p(e){var t=x.getMousePosition(e),n=t.x,r=t.y,i=B.get();if(w.mousePosition.set({x:n,y:r}),i.width&&i.height){var o=D.get();if(e.ctrlKey){var a="default";return B.isInside(i,n,r,o)&&(a="move"),void x.setCursor(a)}o||m(i,n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCursorEvents=t.toggleEvent=void 0;var y=n(0),w=r(y),b=n(2),I=r(b),E=n(1),x=r(E),P=n(5),j=r(P),L=n(4),_=r(L),M=n(6),C=r(M),O=n(3),B=r(O),A=n(21),T=r(A),k=n(12),D=r(k),V=n(7),S=r(V),R="",W=0;t.toggleEvent=o,t.toggleCursorEvents=i},function(e,t,n){"use strict";function r(){return u}function i(e,t,n){return t?e+="w":n&&(e+="e"),e}function o(e,t){var n=t.x,r=t.y,i=n+t.width,o=r+t.height;return i>n&&o<r||i<n&&o>r?e[0]+("w"===e[1]?"e":"w"):e}function a(e,t,n){var r=s(e,t,n);return r.length<2?r:o(r,n)}function s(e,t,n){var r=n.x,o=n.y,a=r+n.width,s=o+n.height,c=e>=r-4&&e<=a+4||e<=r+4&&e>=a-4,d=t>=o-4&&t<=s+4||t<=o+4&&t>=s-4;if(u="",c&&d){var l=t>=o-4&&t<=o+4,f=e>=a-4&&e<=a+4,g=t>=s-4&&t<=s+4,v=e>=r-4&&e<=r+4;l?u=i("n",v,f):g?u=i("s",v,f):f?u="e":v&&(u="w")}return u}Object.defineProperty(t,"__esModule",{value:!0});var u="";t.get=r,t.getReal=a,t.set=s,t.reverse=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){var e=l.getContext(),t=g.get();l.resetDimensions(),g.set(e,t.a,t.b,t.c,t.d,t.e,t.f)}function o(){v||(v=!0,requestAnimationFrame(function(){i(),c.draw(),v=!1}))}function a(){window.addEventListener("resize",o)}function s(){window.removeEventListener("resize",o)}Object.defineProperty(t,"__esModule",{value:!0}),t.disable=t.enable=void 0;var u=n(0),c=r(u),d=n(1),l=r(d),f=n(2),g=r(f),v=!1;t.enable=a,t.disable=s},function(e,t,n){"use strict";function r(){return a}function i(e){a.push(e)}function o(){a.length=0}Object.defineProperty(t,"__esModule",{value:!0});var a=[];t.add=i,t.reset=o,t.getAll=r},function(e,t,n){"use strict";function r(e){var t=new Image;t.onload=function(){var e=t.width,n=t.height,r=window.innerWidth-8,i=window.innerHeight-8,o=e/n;e>r&&(e=r,n=Math.floor(e/o)),n>i&&(n=i,e=Math.floor(n*o)),t.style.width=e+"px",t.style.height=n+"px"},t.src=e,a.appendChild(t),o.classList.add("visible")}function i(){o.classList.remove("visible"),setTimeout(function(){a.removeChild(a.lastElementChild)},600)}Object.defineProperty(t,"__esModule",{value:!0});var o=document.getElementById("js-crop-preview"),a=o.firstElementChild;document.getElementById("js-crop-preview-close").addEventListener("click",i),t.showPreview=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){document.getElementById("js-crop-image-name").textContent=e}function o(){var e=p.getTranslated();l.resetData(),I.setDefaultPos(e.x,e.y),I.containsArea(!1),_.scaleImageToFitCanvas(w.image.get()),h.disableButton("crop")}function a(){var e=(0,C.getAllCroppedImages)();(0,M.postMessageToWorker)({action:"add-bulk",images:e}),(0,C.removeCroppedImages)(),(0,O.displayCroppedImages)()}function s(){l.cropperElement.hide(),l.resetData(),I.containsArea(!1),x.toggleCursorEvents(),l.toggleCanvasElementEventListeners("remove"),j.disable(),a(),c.generateZip()}Object.defineProperty(t,"__esModule",{value:!0}),t.displayImageName=void 0;var u=n(9),c=r(u),d=n(0),l=r(d),f=n(15),g=r(f),v=n(4),h=r(v),m=n(2),p=r(m),y=n(5),w=r(y),b=n(3),I=r(b),E=n(20),x=r(E),P=n(22),j=r(P),L=n(17),_=r(L),M=n(19),C=n(13),O=n(16);document.getElementById("js-crop-top-bar").addEventListener("click",function(e){switch(e.target.getAttribute("data-btn")){case"images":g.toggle();break;case"reset":o();break;case"close":s()}}),t.displayImageName=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t={dimensionInputValues:e,imageName:I.value||"",imageNameSeperator:E.value||"",imageQuality:x.value};localStorage.setItem("selections",JSON.stringify(t))}function a(e){return e.reduce(function(e,t){return e.push(t.width,t.height),e},[])}function s(){for(var e=b.children,t=[],n=0,r=e.length;n<r;n+=2){var i=e[n].value,o=e[n+1].value;(i||o)&&t.push({width:i,height:o})}return u(t)}function u(e){return e.length?(e=e.filter(function(e){return c(e.width,e.height)}),e.length||(p.show("No valid values"),w.show("process"))):(p.show("No dimensions specified"),w.show("process")),e}function c(e,t){var n=/^\d+(px|%)?$|^same$|^original$|^width$|^height$/,r=n.test(e)&&!("same"===e&&(!t||"same"===t)),i=n.test(t)&&!("same"===t&&(!e||"same"===e));return r||i}function d(e,t){Array.from(e).forEach(function(e,n){e.value=t[n]})}function l(){var e=document.createElement("input");return e.setAttribute("type","text"),e.classList.add("input","image-input"),e}function f(e){for(var t=document.createDocumentFragment(),n=0;n<e;n++)t.appendChild(l());return t}function g(e,t){var n=e.children.length;if(n<t){var r=t-n;e.appendChild(f(r))}}function v(e){p.show("Image quality set to: "+e.target.value+"%")}function h(e){var t=[].concat(i(b.children)),n=t.indexOf(e.target),r=n%2==0&&!t[n+2],o=n%2!=0&&!t[n+1];(r||o)&&b.appendChild(f(2))}Object.defineProperty(t,"__esModule",{value:!0}),t.getInputValues=t.saveToLocalStorage=void 0;var m=n(10),p=r(m),y=n(8),w=r(y),b=document.getElementById("js-dimension-inputs"),I=document.getElementById("js-image-name"),E=document.getElementById("js-image-name-seperator"),x=document.getElementById("js-image-quality");!function(){var e=localStorage.getItem("selections");if(e){e=JSON.parse(e);var t=a(e.dimensionInputValues);g(b,t.length),d(b.children,t),I.value=e.imageName,E.value=e.imageNameSeperator,x.value=e.imageQuality}}(),x.addEventListener("input",v,!1),b.addEventListener("focus",h,!0),t.saveToLocalStorage=o,t.getInputValues=s},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return"width"===e?"height":"width"}function o(e,t,n){var r=i(e),o="same"===t[e]?t[r]:t[e],a=n[e];return o.includes("%")?a*(parseInt(o,10)/100):"original"===o||o===e?parseInt(a,10):o===r?parseInt(n[r],10):parseInt(o,10)}function a(e,t){var n=t.width/t.height,r=0,i=0;return e.width&&(r=o("width",e,t),e.height?"same"===e.width&&(i=r):i=r/n),!i&&e.height&&(i=o("height",e,t),e.width?r||"same"!==e.height||(r=i):r=i*n),{width:r,height:i}}function s(e,t){return e.map(function(e){return a(e,t)})}function u(e,t,n){var r=n.width,i=n.height,o=document.createElement("canvas"),a=document.getElementById("js-image-quality").value/100;return o.width=r,o.height=i,o.getContext("2d").drawImage(e,0,0,r,i),o.toDataURL(t,a)}function c(){x.hide("cancel"),I.reset(),I.setLabel(""),p.generateZip()}function d(e,t,n){return new Promise(function(r){(0,L.postMessageToWorker)({action:"add",image:{name:t.name.setByUser,uri:u(e,t.type,n),type:t.type.slice(6)}}),r()})}function l(e,t,n,r){var i=n.splice(0,1)[0];return d(e,t,i).then(function(){I.update(r),0!==h.get()&&n.length&&l(e,t,n,r)})}function f(e,t,n){var r=new Image,i=e.splice(0,1)[0];r.onload=function(){if(0!==h.get()){var o={width:r.width,height:r.height},a=s(t,o);I.setLabel("Processing: "+i.name.original),l(r,i,a,n).then(function(){if(0!==h.get()){if(!e.length)return void setTimeout(c,1e3);f(e,t,n)}})}},r.src=i.uri}function g(){var e=j.getInputValues();if(!e.length)return void p.resetDropbox();var t=w.getAll(),n=t.length*e.length,r=100/n;p.beforeWork(),f(t,e,r),j.saveToLocalStorage(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.processImages=void 0;var v=n(11),h=r(v),m=n(9),p=r(m),y=n(23),w=r(y),b=n(18),I=r(b),E=n(8),x=r(E),P=n(26),j=r(P),L=n(19);t.processImages=g},function(e,t,n){"use strict";function r(){return u}function i(e){var t=document.getElementById("js-"+e+"-settings");t&&t.classList.toggle("active")}function o(e){var t=e.target,n=t.getAttribute("data-tool");n&&n!==u&&(document.querySelector("[data-tool="+u+"]").classList.remove("active"),t.classList.add("active"),i(u),i(n),s.show(n+" enabled"),u=n)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTool=void 0;var a=n(10),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),u="resizer";document.getElementById("js-tool-selection").addEventListener("click",o),t.getCurrentTool=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){e.stopPropagation(),e.preventDefault()}function o(e){e.preventDefault(),1!==d.get()&&(v+=1,g.classList.add("over"))}function a(){1!==d.get()&&((v-=1)||g.classList.remove("over"))}function s(e){if(v=0,g.classList.remove("over"),e.stopPropagation(),e.preventDefault(),1===d.get())return void(e.dataTransfer.dropEffect="none");e.dataTransfer.dropEffect="copy",f.onFiles(e.dataTransfer.files)}function u(e){1===d.get()&&e.preventDefault()}var c=n(11),d=r(c),l=n(9),f=r(l),g=document.getElementById("js-dropbox"),v=0;g.addEventListener("dragover",i,!1),g.addEventListener("dragenter",o,!1),g.addEventListener("dragleave",a,!1),g.addEventListener("drop",s,!1),g.addEventListener("click",u,!1),window.addEventListener("drop",function(e){e.preventDefault()},!1),window.addEventListener("dragover",function(e){e.preventDefault()},!1)},function(e,t,n){"use strict";n(9),n(8),n(29),n(23),n(10),n(18),n(28),n(11),n(19),n(27),n(26),n(12),n(4),n(5),n(1),n(20),n(2),n(13),n(6),n(21),n(14),n(0),n(15),n(24),n(7),n(22),n(16),n(17),n(3),n(25)}]);