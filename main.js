!function(e){function t(t){for(var i,s,a=t[0],c=t[1],l=t[2],u=0,m=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(d&&d(t);m.length;)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;r.push([101,1]),n()}({101:function(e,t,n){"use strict";n.r(t);n(67),n(68),n(69),n(16);function i(e,t,n){let{width:i,height:o}=n;return new Promise(n=>{const r=document.createElement("canvas");r.width=i,r.height=o,r.getContext("2d").drawImage(e,0,0,i,o),r.toBlob(n,t)})}function o(e,t,n){for(void 0===n&&(n=null);t&&t!==n;){if(t.hasAttribute(e))return{elementRef:t,attrValue:t.getAttribute(e)};t=t.parentElement}}n(55),n(25),n(26);const r=document.getElementById("js-bottom-bar-rotation");let s=0;function a(e){return e>180&&(e-=360),e*Math.PI/180}function c(e){let t=Math.round(180*function(e){const t=2*Math.PI,n=-t;return e>t?e-=t:e<n&&(e-=n),e}(e)/Math.PI);return t<0&&(t+=360),360===t?0:t}function l(){return s}function d(e){const t=document.getElementById("js-rotation-input");t.value=e,t.previousElementSibling.textContent=e+"°"}function u(e){let{currentTarget:t}=e;t.classList.remove("visible"),t.previousElementSibling.classList.add("visible"),(t.value<0||t.value>359)&&(t.value=c(s))}document.getElementById("js-rotation-input").addEventListener("input",e=>{let{target:t}=e,n=parseInt(event.target.value,10)||0;n<0?n=0:n>360&&(n%=360);const i=c(function(e){return s=a(e)}(n));requestAnimationFrame(le),t.previousElementSibling.textContent=i+"°"}),r.addEventListener("click",e=>{const t=o("data-type",e.target,e.currentTarget);if(!t)return;const n=a(15);"left"===t.attrValue?s-=n:"right"===t.attrValue&&(s+=n);const i=c(s);requestAnimationFrame(le),d(i)}),r.addEventListener("focus",e=>{let{target:t}=e;if("SPAN"===t.nodeName){const e=t.nextElementSibling;t.classList.remove("visible"),e.classList.add("visible"),e.focus(),e.addEventListener("blur",u,{once:!0})}},!0);var m=n(66);const f=new Worker("./ww.js");f.onmessage=function(e){Object(m.saveAs)(e.data,"images.zip")},f.onerror=function(e){console.log(e)};const g=document.getElementById("js-image-folder-list"),v=[];function h(e){const t=v.push(e);g.insertAdjacentHTML("beforeend",'\n    <li class="image-folder-list-item" data-index="'+(t-1)+'">\n      <button class="image-folder-enlarge-btn" data-type="enlarge" title="Enlarge">\n        <image src='+URL.createObjectURL(e.file)+' class="image-folder-list-item-image" alt="">\n      </button>\n      <button class="image-folder-remove-btn" data-type="remove" title="Remove">\n        <svg viewBox="0 0 24 24">\n          <use href="#remove"></use>\n        </svg>\n      </button>\n    </li>\n  '),document.getElementById("js-image-folder-message").classList.add("hidden"),g.classList.add("visible")}function w(e){e.target===e.currentTarget&&p()}function p(){const e=document.getElementById("js-image-folder-viewer");e.removeEventListener("click",w),e.remove()}g.addEventListener("click",e=>{let{target:t,currentTarget:n}=e;const i=o("data-type",t,n);if(!i)return;const r=o("data-index",t,n),{attrValue:s}=r,{attrValue:a}=i;"enlarge"===a?function(e){const{file:t}=v[e];document.getElementById("js-editor").insertAdjacentHTML("beforeend",'\n    <div id="js-image-folder-viewer" class="js-right-bar-item image-folder-viewer">\n      <img src="'+URL.createObjectURL(t)+'" class="image-folder-viewer-image" alt="">\n      <button id="js-image-folder-viewer-close-btn" class="icon-btn-round image-folder-viewer-close-btn" title="Close">\n        <svg viewBox="0 0 24 24">\n          <use href="#close"></use>\n        </svg>\n      </button>\n    </div>\n  '),document.getElementById("js-image-folder-viewer-close-btn").addEventListener("click",p,{once:!0}),document.getElementById("js-image-folder-viewer").addEventListener("click",w)}(s):"remove"===a&&(r.elementRef.remove(),v.splice(s,1),function(){if(0===v.length)document.getElementById("js-image-folder-message").classList.remove("hidden"),g.classList.remove("visible");else{[...g.children].forEach((e,t)=>{e.setAttribute("data-index",t)})}}())}),document.getElementById("js-image-folder-download-btn").addEventListener("click",()=>{!function(e){f.postMessage(e)}(v)});const y=document.getElementById("js-uploaded-images-toggle-btn"),b=document.getElementById("js-uploaded-images-modal"),L=document.getElementById("js-uploaded-images-file-input");let E=[],j=0,I=null,x=!1;function k(){return E[j]}function B(){!function(e){if(Z)return;Z=!0,G.insertAdjacentHTML("beforeend",'<canvas id="js-canvas"></canvas>'),G.classList.remove("hidden"),document.getElementById("js-intro").remove(),function(e){t=($=document.getElementById("js-canvas")).getContext("2d"),F=t,se(),pe(e),$.addEventListener("wheel",ue,{passive:!0}),$.addEventListener("mousedown",me);var t}(e),window.addEventListener("resize",()=>{requestAnimationFrame(()=>{!function(){const e=K();se(),Y(e.a,e.b,e.c,e.d,e.e,e.f)}(),le()})})}(E[0].file),O(E[0].name),U(document.querySelector(".uploaded-images-list-item"))}async function R(e){const[t]=e.splice(0,1),n=await(i=t,new Promise(e=>{const t=new Image;t.onload=function(){URL.revokeObjectURL(t.src),e({file:i,name:i.name,type:i.type,width:t.width,height:t.height,aspectRatio:t.width/t.height})},t.src=URL.createObjectURL(i)}));var i;E.push(n),function(e){const t=document.getElementById("js-uploaded-images-list"),n=E.length-1;t.insertAdjacentHTML("beforeend",'\n    <li class="uploaded-images-list-item" data-index="'+n+'" data-type="image">\n        <button class="uploaded-images-list-btn">\n          <img src="'+URL.createObjectURL(e.file)+'" class="uploaded-images-list-image">\n        </button>\n    </li>\n  ')}(n),e.length?R(e):B()}function M(e){const t=function(e){return e.filter(e=>e.type.includes("image"))}([...e]);t.length&&R(t)}function O(e){document.title=e+" | Imagis"}function S(){x=!1,b.classList.remove("visible"),window.removeEventListener("click",T,!0)}function U(e){I&&I.classList.remove("active"),(I=e).classList.add("active")}function T(e){y.contains(e.target)||b.contains(e.target)||S()}function A(e){let{target:t}=e;M(t.files),t.value=""}L.addEventListener("change",A),document.getElementById("js-intro-file-input").addEventListener("change",A),b.addEventListener("click",e=>{const t=o("data-type",e.target,e.currentTarget);if(t&&"image"===t.attrValue){const e=parseInt(t.elementRef.getAttribute("data-index"),10),{file:n}=E[e];j=e,U(t.elementRef),O(n.name),pe(n),S()}}),y.addEventListener("click",()=>{b.classList.toggle("visible"),(x=!x)?window.addEventListener("click",T,!0):window.removeEventListener("click",T,!0)}),document.getElementById("js-intro-file-select-btn").addEventListener("click",()=>{document.getElementById("js-intro-file-input").click()}),document.getElementById("js-uploaded-images-upload-btn").addEventListener("click",()=>{L.click()}),window.addEventListener("drop",e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy",M(e.dataTransfer.files)}),window.addEventListener("dragover",e=>{e.preventDefault()});let z={x:0,y:0,width:0,height:0},P="";function H(){return z}function C(e,t,n){return t?e+="w":n&&(e+="e"),e}function q(e,t){const n=z.x,i=z.y,o=n+z.width,r=i+z.height;if(P="",(e>=n-4&&e<=o+4||e<=n+4&&e>=o-4)&&(t>=i-4&&t<=r+4||t<=i+4&&t>=r-4)){const s=e>=o-4&&e<=o+4,a=t>=r-4&&t<=r+4,c=e>=n-4&&e<=n+4;t>=i-4&&t<=i+4?P=C("n",c,s):a?P=C("s",c,s):s?P="e":c&&(P="w")}return P}function V(e){void 0===e&&(e={}),z=Object.assign({x:0,y:0,width:0,height:0},e)}function W(e,t){const n=z.x,i=z.y,o=n+z.width,r=i+z.height;return(e>=n&&e<=o||e<=n&&e>=o)&&(t>=i&&t<=r||t<=i&&t>=r)}let D=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),F=null;function K(){return D}function _(){return D.a}function N(e,t){D=D.translate(e,t),F.translate(e,t)}function Y(e,t,n,i,o,r){D.a=e,D.b=t,D.c=n,D.d=i,D.e=o,D.f=r,F.setTransform(e,t,n,i,o,r)}function X(e,t){return{x:(e-D.e)/D.a,y:(t-D.f)/D.a}}const J=new Image,G=document.getElementById("js-editor"),Q=document.getElementById("js-crop-btn");let Z=!1,$=null,ee=0,te=0,ne="",ie=!1;const oe=function(){let e=null;return{set:function(t){e=t},get:function(){return e}}}();function re(){return{canvasWidth:ee,canvasHeight:te}}function se(){const e=window.innerWidth,t=window.innerHeight;$.width=e,$.height=t,ee=e,te=t}function ae(e){const t=l(),n=J.width/2,i=J.height/2;!function(e){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,ee,te),e.restore()}(e),e.save(),e.translate(n,i),e.rotate(t),e.translate(-n,-i),e.drawImage(J,0,0,J.width,J.height),e.restore()}function ce(e){const t=H(),n=t.width,i=t.height;let o,r=t.x,s=t.y;e.save(),e.lineWidth=1,e.strokeStyle="#006494",e.setTransform(1,0,0,1,0,0),n&&i&&(o=e.getImageData(r,s,n,i),n<0&&(r+=n),i<0&&(s+=i)),(n||i||ie)&&function(e){e.fillStyle="rgba(0, 0, 0, .4)",e.fillRect(0,0,ee,te)}(e),o&&e.putImageData(o,r,s),e.strokeRect(t.x+.5,t.y+.5,n,i),e.restore()}function le(){const e=$.getContext("2d");ae(e),ce(e)}function de(e){void 0===e&&(e="default"),$.style.cursor=e}function ue(e){Be(e.deltaY>0?.8:1.25,e.clientX,e.clientY)}function me(e){if(1!==e.which)return;const{clientX:t,clientY:n}=e,i=H(),o=i.width&&i.height,r=q(t,n);ne="select",ie=o,e.shiftKey?(oe.set(X(t,n)),ne="drag"):e.ctrlKey&&o&&W(t,n)?(oe.set({x:t-i.x,y:n-i.y}),ne="move"):r&&o?ne="resize":V({x:t,y:n}),requestAnimationFrame(le),Q.classList.remove("visible"),G.style.userSelect="none",window.addEventListener("mousemove",fe),window.addEventListener("mouseup",ge),window.removeEventListener("mousemove",we),window.removeEventListener("keydown",he)}function fe(e){const{clientX:t,clientY:n}=e;switch(ne){case"select":!function(e,t){const n=H();n.width=e-n.x,n.height=t-n.y}(t,n);break;case"resize":!function(e,t){const n=H(),i=P;"n"===i[0]?(n.height=n.y-t+n.height,n.y=t):"s"===i[0]&&(n.height=t-n.y);i.includes("w")?(n.width=n.x-e+n.width,n.x=e):i.includes("e")&&(n.width=e-n.x)}(t,n);break;case"move":if(!e.ctrlKey)return;!function(e,t){const n=H(),i=oe.get();n.x=e-i.x,n.y=t-i.y}(t,n);break;case"drag":if(!e.shiftKey)return;!function(e,t){const n=oe.get();if(n){const i=X(e,t);N(i.x-n.x,i.y-n.y)}}(t,n)}requestAnimationFrame(le)}function ge(){const e=H();ne="",G.style.userSelect="auto",e.width&&e.height?(Q.classList.add("visible"),window.addEventListener("mousemove",we),window.addEventListener("keydown",he)):(ie=!1,ae($.getContext("2d")),ve()),window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",ge)}function ve(){de()}function he(e){const t=oe.get();t&&e.ctrlKey&&W(t.x,t.y)&&(de("move"),window.addEventListener("keyup",ve,{once:!0}))}function we(e){const{clientX:t,clientY:n}=e;if(e.ctrlKey)de(W(t,n)?"move":"default");else{const e=q(t,n);de(e?e+"-resize":"default")}}function pe(e){ie=!1,Q.classList.remove("visible"),s=0,d(0),V(),J.onload=function(){!function(e){const{canvasWidth:t,canvasHeight:n}=re(),{width:i,height:o}=e;let r=_();r=i>o?xe(i,o,t,n):xe(o,i,n,t);(function(e,t){Y(1,0,0,1,e,t)})((t-i*r)/2,(n-o*r)/2),Ee(0,0,r),ke(r)}(J),URL.revokeObjectURL(J.src)},J.src=URL.createObjectURL(e)}function ye(e){const t=document.createElement("canvas"),n=t.getContext("2d"),{a:i,e:o,f:r}=K(),s={x:o/i,y:r/i},a=H(),c={x:Math.round(a.x/i),y:Math.round(a.y/i),width:Math.round(a.width/i),height:Math.round(a.height/i)};t.width=Math.round(ee/i),t.height=Math.round(te/i),n.translate(s.x,s.y);const d=function(e,t,n){const i=l();if(n.save(),i){const t=e.width/2,o=e.height/2;n.translate(t,o),n.rotate(i),n.translate(-t,-o)}return n.drawImage(e,0,0,e.width,e.height),n.restore(),n.getImageData(t.x,t.y,t.width,t.height)}(e,c,n);return t.width=d.width,t.height=d.height,n.putImageData(d,0,0),t}function be(e,t){return new Promise(n=>{ye(e).toBlob(n,t)})}Q.addEventListener("click",()=>{const{file:e}=k(),t=new Image;t.onload=async function(){h({name:e.name,type:e.type,file:await be(t,e.type)}),URL.revokeObjectURL(t.src)},t.src=URL.createObjectURL(e)});const Le=document.getElementById("js-bottom-bar-zoom");function Ee(e,t,n){N(e,t),function(e){D.a=1,D.d=1,D=D.scale(e,e),F.setTransform(D.a,0,0,D.a,D.e,D.f)}(n),N(-e,-t),requestAnimationFrame(le)}function je(e){return e<.08?e=.08:e>80&&(e=80),e}function Ie(e,t){return 1-1/(e/(e-t))}function xe(e,t,n,i){let o=1;return e>n&&t*(o=Ie(e,n))>i&&(o=Ie(t,i)),o}function ke(e){const t=document.getElementById("js-zoom-input");e=Math.round(100*e),t.value=e,t.previousElementSibling.textContent=e+"%"}function Be(e,t,n){const i=_(),{x:o,y:r}=X(t,n),s=je(i*e);Ee(o,r,s),ke(s)}function Re(e){let{currentTarget:t}=e;t.classList.remove("visible"),t.previousElementSibling.classList.add("visible"),t.value<8&&(t.value=8)}document.getElementById("js-zoom-input").addEventListener("input",e=>{let{target:t}=e;const{canvasWidth:n,canvasHeight:i}=re(),{x:o,y:r}=X(n/2,i/2),s=parseInt(t.value,10)||0,a=je(s/100),c=Math.round(100*a);Ee(o,r,a),s>c&&(t.value=c),t.previousElementSibling.textContent=c+"%"}),Le.addEventListener("click",e=>{const t=o("data-type",e.target,e.currentTarget);if(!t)return;const{canvasWidth:n,canvasHeight:i}=re();Be("out"===t.attrValue?.8:1.25,n/2,i/2)}),Le.addEventListener("focus",e=>{let{target:t}=e;if("SPAN"===t.nodeName){const e=t.nextElementSibling;t.classList.remove("visible"),e.classList.add("visible"),e.focus(),e.addEventListener("blur",Re,{once:!0})}},!0);let Me="",Oe=!1;function Se(e){return document.getElementById("js-right-bar-"+e+"-tab")}function Ue(e){if(Oe||e.target.closest(".js-right-bar-item"))return void(Oe=!1);const t=Se(Me);Me="",t.classList.remove("visible"),window.removeEventListener("click",Ue,!0),window.removeEventListener("mousedown",Te,!0)}function Te(e){e.target.closest(".js-right-bar-item")&&(Oe=!0)}document.getElementById("js-right-bar-header").addEventListener("click",e=>{const t=o("data-tab-name",e.target,e.currentTarget);if(!t)return;const{attrValue:n}=t;if(Me){Se(Me).classList.remove("visible")}if(n===Me)Me="",window.removeEventListener("click",Ue,!0),window.removeEventListener("mousedown",Te,!0);else{const e=Se(n);Me=n,e.classList.add("visible"),window.addEventListener("click",Ue,!0),window.addEventListener("mousedown",Te,!0)}});const Ae=document.getElementById("js-resizer-list");function ze(e,t,n){return new Promise(o=>{const r=new Image;r.onload=async function(){h({name:e.name,type:e.type,file:await i(r,e.type,{width:t,height:n})}),URL.revokeObjectURL(r.src),o()},r.src=URL.createObjectURL(e)})}document.getElementById("js-resizer-option-btn").addEventListener("click",()=>{Ae.insertAdjacentHTML("beforeend",'\n    <li class="resizer-list-item">\n      <label class="resizer-list-option">\n        <div class="resizer-list-option-label">Width</div>\n        <input type="number" class="input resizer-list-option-input" min="1" data-type="width">\n      </label>\n      <label class="resizer-list-option">\n        <div class="resizer-list-option-label">Height</div>\n        <input type="number" class="input resizer-list-option-input" min="1" data-type="height">\n      </label>\n    </li>\n  ')}),Ae.addEventListener("input",e=>{let{target:t}=e;const{checked:n}=document.getElementById("js-resizer-aspect-ratio"),i=parseInt(t.value||0,10);if(n){const e=t.getAttribute("data-type"),{aspectRatio:n}=k(),o="width"===e?"height":"width",r=t.parentElement.parentElement.querySelector("[data-type="+o+"]");r.value="width"===e?Math.round(i/n):Math.round(i*n)}}),document.getElementById("js-resize-btn").addEventListener("click",async()=>{const{children:e}=Ae,{file:t}=k();for(const n of e){const[{value:e},{value:i}]=n.querySelectorAll("input");e&&i&&await ze(t,e,i)}})},68:function(e,t,n){},69:function(e,t,n){}});